[23:23:37 Information] 
Starting host...

[23:23:37 Warning] Microsoft.AspNetCore.DataProtection.Repositories.FileSystemXmlRepository
Storing keys in a directory '/root/.aspnet/DataProtection-Keys' that may not be persisted outside of the container. Protected data will be unavailable when container is destroyed.

[23:23:37 Information] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager
User profile is available. Using '/root/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.

[23:23:37 Information] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager
Creating key {af2f2c8d-3545-40fe-91bb-6501d466c414} with creation date 2022-10-28 23:23:37Z, activation date 2022-10-28 23:23:37Z, and expiration date 2023-01-26 23:23:37Z.

[23:23:37 Warning] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager
No XML encryptor configured. Key {af2f2c8d-3545-40fe-91bb-6501d466c414} may be persisted to storage in unencrypted form.

[23:23:37 Information] Microsoft.AspNetCore.DataProtection.Repositories.FileSystemXmlRepository
Writing data to file '/root/.aspnet/DataProtection-Keys/key-af2f2c8d-3545-40fe-91bb-6501d466c414.xml'.

[23:23:59 Fatal] Microsoft.AspNetCore.Hosting.Diagnostics
Application startup exception
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 35 - An internal exception was caught)
 ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000001, 11): Resource temporarily unavailable
   at System.Net.Dns.GetHostEntryOrAddressesCore(String hostName, Boolean justAddresses)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle.Connect(String serverName, Int32 port, TimeSpan timeout, Boolean isInfiniteTimeout, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle..ctor(String serverName, Int32 port, Int64 timerExpire, Object callbackObject, Boolean parallel, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass18_0.<Exists>b__0(DateTime giveUp)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.<>c__DisplayClass12_0`2.<Execute>b__0(DbContext c, TState s)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation, Func`2 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.Exists(Boolean retryOnNotExists)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.Exists()
   at Microsoft.EntityFrameworkCore.Migrations.HistoryRepository.Exists()
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at Starter.Idp.SeedData.EnsureSeedData(String connectionString) in /app/SeedData.cs:line 36
   at Starter.Idp.Startup.Configure(IApplicationBuilder app) in /app/Startup.cs:line 116
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.AspNetCore.Hosting.ConfigureBuilder.Invoke(Object instance, IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.ConfigureBuilder.<>c__DisplayClass4_0.<Build>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.GenericWebHostBuilder.<>c__DisplayClass15_0.<UseStartup>b__1(IApplicationBuilder app)
   at Microsoft.AspNetCore.Mvc.Filters.MiddlewareFilterBuilderStartupFilter.<>c__DisplayClass0_0.<Configure>g__MiddlewareFilterBuilder|0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.HostingStartup.<>c__DisplayClass1_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
ClientConnectionId:00000000-0000-0000-0000-000000000000

[23:23:59 Fatal] 
Host terminated unexpectedly.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 35 - An internal exception was caught)
 ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000001, 11): Resource temporarily unavailable
   at System.Net.Dns.GetHostEntryOrAddressesCore(String hostName, Boolean justAddresses)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle.Connect(String serverName, Int32 port, TimeSpan timeout, Boolean isInfiniteTimeout, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle..ctor(String serverName, Int32 port, Int64 timerExpire, Object callbackObject, Boolean parallel, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass18_0.<Exists>b__0(DateTime giveUp)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.<>c__DisplayClass12_0`2.<Execute>b__0(DbContext c, TState s)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation, Func`2 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.Exists(Boolean retryOnNotExists)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.Exists()
   at Microsoft.EntityFrameworkCore.Migrations.HistoryRepository.Exists()
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at Starter.Idp.SeedData.EnsureSeedData(String connectionString) in /app/SeedData.cs:line 36
   at Starter.Idp.Startup.Configure(IApplicationBuilder app) in /app/Startup.cs:line 116
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.AspNetCore.Hosting.ConfigureBuilder.Invoke(Object instance, IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.ConfigureBuilder.<>c__DisplayClass4_0.<Build>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.GenericWebHostBuilder.<>c__DisplayClass15_0.<UseStartup>b__1(IApplicationBuilder app)
   at Microsoft.AspNetCore.Mvc.Filters.MiddlewareFilterBuilderStartupFilter.<>c__DisplayClass0_0.<Configure>g__MiddlewareFilterBuilder|0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.HostingStartup.<>c__DisplayClass1_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at Starter.Idp.Program.Main(String[] args) in /app/Program.cs:line 66
ClientConnectionId:00000000-0000-0000-0000-000000000000

[23:27:41 Information] 
Starting host...

[23:27:41 Warning] Microsoft.AspNetCore.DataProtection.Repositories.FileSystemXmlRepository
Storing keys in a directory '/root/.aspnet/DataProtection-Keys' that may not be persisted outside of the container. Protected data will be unavailable when container is destroyed.

[23:27:41 Information] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager
User profile is available. Using '/root/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.

[23:27:41 Information] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager
Creating key {7d83a776-45a1-43f0-90db-1ab19106f831} with creation date 2022-10-28 23:27:41Z, activation date 2022-10-28 23:27:41Z, and expiration date 2023-01-26 23:27:41Z.

[23:27:41 Warning] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager
No XML encryptor configured. Key {7d83a776-45a1-43f0-90db-1ab19106f831} may be persisted to storage in unencrypted form.

[23:27:41 Information] Microsoft.AspNetCore.DataProtection.Repositories.FileSystemXmlRepository
Writing data to file '/root/.aspnet/DataProtection-Keys/key-7d83a776-45a1-43f0-90db-1ab19106f831.xml'.

[23:27:43 Debug] 
alice already exists

[23:27:43 Debug] 
bob already exists

[23:27:43 Information] IdentityServer4.Startup
Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e

[23:27:43 Information] IdentityServer4.Startup
You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.

[23:27:43 Debug] IdentityServer4.Startup
Custom IssuerUri set to https://localhost

[23:27:43 Information] IdentityServer4.Startup
Using the default authentication scheme Identity.Application for IdentityServer

[23:27:43 Debug] IdentityServer4.Startup
Using Identity.Application as default ASP.NET Core scheme for authentication

[23:27:43 Debug] IdentityServer4.Startup
Using Identity.External as default ASP.NET Core scheme for sign-in

[23:27:43 Debug] IdentityServer4.Startup
Using Identity.External as default ASP.NET Core scheme for sign-out

[23:27:43 Debug] IdentityServer4.Startup
Using Identity.Application as default ASP.NET Core scheme for challenge

[23:27:43 Debug] IdentityServer4.Startup
Using Identity.Application as default ASP.NET Core scheme for forbid

[23:27:43 Warning] Microsoft.AspNetCore.Server.Kestrel
Overriding address(es) 'https://localhost:5001, http://localhost:5000'. Binding to endpoints defined in UseKestrel() instead.

[23:27:43 Information] Microsoft.Hosting.Lifetime
Now listening on: http://0.0.0.0:5006

[23:27:43 Information] Microsoft.Hosting.Lifetime
Now listening on: https://0.0.0.0:5007

[23:27:43 Information] Microsoft.Hosting.Lifetime
Application started. Press Ctrl+C to shut down.

[23:27:43 Information] Microsoft.Hosting.Lifetime
Hosting environment: Development

[23:27:43 Information] Microsoft.Hosting.Lifetime
Content root path: /app

[23:32:14 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.1 GET http://idp:5006/.well-known/openid-configuration - -

[23:32:14 Debug] IdentityServer4.Startup
Login Url: /Account/Login

[23:32:14 Debug] IdentityServer4.Startup
Login Return Url Parameter: ReturnUrl

[23:32:14 Debug] IdentityServer4.Startup
Logout Url: /Account/Logout

[23:32:14 Debug] IdentityServer4.Startup
ConsentUrl Url: /consent

[23:32:14 Debug] IdentityServer4.Startup
Consent Return Url Parameter: returnUrl

[23:32:14 Debug] IdentityServer4.Startup
Error Url: /home/error

[23:32:14 Debug] IdentityServer4.Startup
Error Id Parameter: errorId

[23:32:14 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:32:14 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:32:14 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /.well-known/openid-configuration matched to endpoint type Discovery

[23:32:14 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint

[23:32:14 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration

[23:32:14 Debug] IdentityServer4.Endpoints.DiscoveryEndpoint
Start discovery request

[23:32:14 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.1 GET http://idp:5006/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 125.4361ms

[23:32:14 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.1 GET http://idp:5006/.well-known/openid-configuration/jwks - -

[23:32:14 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:32:14 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:32:14 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery

[23:32:14 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint

[23:32:14 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks

[23:32:14 Debug] IdentityServer4.Endpoints.DiscoveryKeyEndpoint
Start key discovery request

[23:32:14 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.1 GET http://idp:5006/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 43.7256ms

[23:32:14 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/connect/authorize?client_id=Starter.Bff&redirect_uri=https%3A%2F%2Flocalhost%2Fsignin-oidc&response_type=code&scope=openid%20profile%20Starter.Api%20offline_access&code_challenge=MR5iQcf8_zBKIO8zybp8cPMEoQPgfDjQQLdZsKh2Q84&code_challenge_method=S256&response_mode=form_post&nonce=638025967348779955.OGQ0ZTA2YmMtZDdkMC00NjBjLTkwZDgtMDViMGMwMWJiNDcxZTNkMzNmNWUtYzE2Ni00MzYzLThjMDgtNzkxOTg2ZDg5OGRi&state=CfDJ8NlCXmldZLBHsAViIel-sLxQa6tHWI0uktIecLx165rIS9_fb11c88y9KGZOEvCFRrBRV_DZwGG7Enn8fsfdowHPRoeQJowCW4aC55t5MzmHO6CwzfV3Y92QGRBXGxH2r4G_cqHiYYp7ukWgC7MUD-aod4FSdUkaW0zDCOUei1WbLilBSrFbaeVHjMB0mJpdMRZFGhHfNfH41y6BfNBVM862Qh_-B0bfyPDDqmNPWlHz4TlkRRJzO3hoeVF7PtFRPQ1H8rHPqChfbtaW1TgjE40JbyNm4BUbeZjp_H1P15rG9J9lob5Xb6idAV9wu_GVPeNP7skZrBJIJPFgi5ue4jhDUU1rWzb7gN8Wi7TmR6cRW1MYueURI5Hlo7u3Uw4G2HR64Ah9E-iKbV1q1PZ4KpQ&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.7.1.0 - -

[23:32:14 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService
CORS policy execution successful.

[23:32:14 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware
No CORS policy found for the specified request.

[23:32:14 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:32:14 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:32:14 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /connect/authorize matched to endpoint type Authorize

[23:32:14 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint

[23:32:14 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize

[23:32:14 Debug] IdentityServer4.Endpoints.AuthorizeEndpoint
Start authorize request

[23:32:15 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:32:15 Debug] IdentityServer4.Endpoints.AuthorizeEndpoint
No user present in authorize request

[23:32:15 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Start authorize request protocol validation

[23:32:15 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:32:15 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Checking for PKCE parameters

[23:32:15 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator

[23:32:15 Debug] IdentityServer4.Endpoints.AuthorizeEndpoint
ValidatedAuthorizeRequest
{"ClientId":"Starter.Bff","ClientName":null,"RedirectUri":"https://localhost/signin-oidc","AllowedRedirectUris":["https://localhost/signin-oidc","https://bff:5005/signin-oidc","https://localhost/loggedin"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile Starter.Api offline_access","State":"CfDJ8NlCXmldZLBHsAViIel-sLxQa6tHWI0uktIecLx165rIS9_fb11c88y9KGZOEvCFRrBRV_DZwGG7Enn8fsfdowHPRoeQJowCW4aC55t5MzmHO6CwzfV3Y92QGRBXGxH2r4G_cqHiYYp7ukWgC7MUD-aod4FSdUkaW0zDCOUei1WbLilBSrFbaeVHjMB0mJpdMRZFGhHfNfH41y6BfNBVM862Qh_-B0bfyPDDqmNPWlHz4TlkRRJzO3hoeVF7PtFRPQ1H8rHPqChfbtaW1TgjE40JbyNm4BUbeZjp_H1P15rG9J9lob5Xb6idAV9wu_GVPeNP7skZrBJIJPFgi5ue4jhDUU1rWzb7gN8Wi7TmR6cRW1MYueURI5Hlo7u3Uw4G2HR64Ah9E-iKbV1q1PZ4KpQ","UiLocales":null,"Nonce":"638025967348779955.OGQ0ZTA2YmMtZDdkMC00NjBjLTkwZDgtMDViMGMwMWJiNDcxZTNkMzNmNWUtYzE2Ni00MzYzLThjMDgtNzkxOTg2ZDg5OGRi","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Starter.Bff","redirect_uri":"https://localhost/signin-oidc","response_type":"code","scope":"openid profile Starter.Api offline_access","code_challenge":"MR5iQcf8_zBKIO8zybp8cPMEoQPgfDjQQLdZsKh2Q84","code_challenge_method":"S256","response_mode":"form_post","nonce":"638025967348779955.OGQ0ZTA2YmMtZDdkMC00NjBjLTkwZDgtMDViMGMwMWJiNDcxZTNkMzNmNWUtYzE2Ni00MzYzLThjMDgtNzkxOTg2ZDg5OGRi","state":"CfDJ8NlCXmldZLBHsAViIel-sLxQa6tHWI0uktIecLx165rIS9_fb11c88y9KGZOEvCFRrBRV_DZwGG7Enn8fsfdowHPRoeQJowCW4aC55t5MzmHO6CwzfV3Y92QGRBXGxH2r4G_cqHiYYp7ukWgC7MUD-aod4FSdUkaW0zDCOUei1WbLilBSrFbaeVHjMB0mJpdMRZFGhHfNfH41y6BfNBVM862Qh_-B0bfyPDDqmNPWlHz4TlkRRJzO3hoeVF7PtFRPQ1H8rHPqChfbtaW1TgjE40JbyNm4BUbeZjp_H1P15rG9J9lob5Xb6idAV9wu_GVPeNP7skZrBJIJPFgi5ue4jhDUU1rWzb7gN8Wi7TmR6cRW1MYueURI5Hlo7u3Uw4G2HR64Ah9E-iKbV1q1PZ4KpQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}

[23:32:15 Information] IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator
Showing login: User is not authenticated

[23:32:15 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/connect/authorize?client_id=Starter.Bff&redirect_uri=https%3A%2F%2Flocalhost%2Fsignin-oidc&response_type=code&scope=openid%20profile%20Starter.Api%20offline_access&code_challenge=MR5iQcf8_zBKIO8zybp8cPMEoQPgfDjQQLdZsKh2Q84&code_challenge_method=S256&response_mode=form_post&nonce=638025967348779955.OGQ0ZTA2YmMtZDdkMC00NjBjLTkwZDgtMDViMGMwMWJiNDcxZTNkMzNmNWUtYzE2Ni00MzYzLThjMDgtNzkxOTg2ZDg5OGRi&state=CfDJ8NlCXmldZLBHsAViIel-sLxQa6tHWI0uktIecLx165rIS9_fb11c88y9KGZOEvCFRrBRV_DZwGG7Enn8fsfdowHPRoeQJowCW4aC55t5MzmHO6CwzfV3Y92QGRBXGxH2r4G_cqHiYYp7ukWgC7MUD-aod4FSdUkaW0zDCOUei1WbLilBSrFbaeVHjMB0mJpdMRZFGhHfNfH41y6BfNBVM862Qh_-B0bfyPDDqmNPWlHz4TlkRRJzO3hoeVF7PtFRPQ1H8rHPqChfbtaW1TgjE40JbyNm4BUbeZjp_H1P15rG9J9lob5Xb6idAV9wu_GVPeNP7skZrBJIJPFgi5ue4jhDUU1rWzb7gN8Wi7TmR6cRW1MYueURI5Hlo7u3Uw4G2HR64Ah9E-iKbV1q1PZ4KpQ&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.7.1.0 - - - 302 0 - 127.3453ms

[23:32:15 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3DStarter.Bff%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520Starter.Api%2520offline_access%26code_challenge%3DMR5iQcf8_zBKIO8zybp8cPMEoQPgfDjQQLdZsKh2Q84%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D638025967348779955.OGQ0ZTA2YmMtZDdkMC00NjBjLTkwZDgtMDViMGMwMWJiNDcxZTNkMzNmNWUtYzE2Ni00MzYzLThjMDgtNzkxOTg2ZDg5OGRi%26state%3DCfDJ8NlCXmldZLBHsAViIel-sLxQa6tHWI0uktIecLx165rIS9_fb11c88y9KGZOEvCFRrBRV_DZwGG7Enn8fsfdowHPRoeQJowCW4aC55t5MzmHO6CwzfV3Y92QGRBXGxH2r4G_cqHiYYp7ukWgC7MUD-aod4FSdUkaW0zDCOUei1WbLilBSrFbaeVHjMB0mJpdMRZFGhHfNfH41y6BfNBVM862Qh_-B0bfyPDDqmNPWlHz4TlkRRJzO3hoeVF7PtFRPQ1H8rHPqChfbtaW1TgjE40JbyNm4BUbeZjp_H1P15rG9J9lob5Xb6idAV9wu_GVPeNP7skZrBJIJPFgi5ue4jhDUU1rWzb7gN8Wi7TmR6cRW1MYueURI5Hlo7u3Uw4G2HR64Ah9E-iKbV1q1PZ4KpQ%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.7.1.0 - -

[23:32:15 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService
CORS policy execution successful.

[23:32:15 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware
No CORS policy found for the specified request.

[23:32:15 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:32:15 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:32:15 Information] Microsoft.AspNetCore.Routing.EndpointMiddleware
Executing endpoint 'Starter.Idp.Controllers.Account.AccountController.Login (IDP)'

[23:32:15 Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker
Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller Starter.Idp.Controllers.Account.AccountController (IDP).

[23:32:15 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:32:15 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Start authorize request protocol validation

[23:32:15 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:32:15 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Checking for PKCE parameters

[23:32:15 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator

[23:32:15 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:32:15 Information] Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor
Executing ViewResult, running view Login.

[23:32:15 Information] Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor
Executed ViewResult - view Login executed in 100.5429ms.

[23:32:15 Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker
Executed action Starter.Idp.Controllers.Account.AccountController.Login (IDP) in 133.8157ms

[23:32:15 Information] Microsoft.AspNetCore.Routing.EndpointMiddleware
Executed endpoint 'Starter.Idp.Controllers.Account.AccountController.Login (IDP)'

[23:32:15 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3DStarter.Bff%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520Starter.Api%2520offline_access%26code_challenge%3DMR5iQcf8_zBKIO8zybp8cPMEoQPgfDjQQLdZsKh2Q84%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D638025967348779955.OGQ0ZTA2YmMtZDdkMC00NjBjLTkwZDgtMDViMGMwMWJiNDcxZTNkMzNmNWUtYzE2Ni00MzYzLThjMDgtNzkxOTg2ZDg5OGRi%26state%3DCfDJ8NlCXmldZLBHsAViIel-sLxQa6tHWI0uktIecLx165rIS9_fb11c88y9KGZOEvCFRrBRV_DZwGG7Enn8fsfdowHPRoeQJowCW4aC55t5MzmHO6CwzfV3Y92QGRBXGxH2r4G_cqHiYYp7ukWgC7MUD-aod4FSdUkaW0zDCOUei1WbLilBSrFbaeVHjMB0mJpdMRZFGhHfNfH41y6BfNBVM862Qh_-B0bfyPDDqmNPWlHz4TlkRRJzO3hoeVF7PtFRPQ1H8rHPqChfbtaW1TgjE40JbyNm4BUbeZjp_H1P15rG9J9lob5Xb6idAV9wu_GVPeNP7skZrBJIJPFgi5ue4jhDUU1rWzb7gN8Wi7TmR6cRW1MYueURI5Hlo7u3Uw4G2HR64Ah9E-iKbV1q1PZ4KpQ%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.7.1.0 - - - 200 - text/html;+charset=utf-8 163.9184ms

[23:32:15 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/lib/bootstrap/dist/css/bootstrap.min.css - -

[23:32:15 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/lib/jquery/dist/jquery.slim.min.js - -

[23:32:15 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/css/site.css - -

[23:32:15 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/lib/bootstrap/dist/js/bootstrap.bundle.min.js - -

[23:32:15 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/lib/jquery/dist/jquery.slim.min.js'. Physical path: '/app/wwwroot/lib/jquery/dist/jquery.slim.min.js'

[23:32:15 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/css/site.css'. Physical path: '/app/wwwroot/css/site.css'

[23:32:15 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js'. Physical path: '/app/wwwroot/lib/bootstrap/dist/js/bootstrap.bundle.min.js'

[23:32:15 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/lib/jquery/dist/jquery.slim.min.js - - - 200 72397 application/javascript 35.3480ms

[23:32:15 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/css/site.css - - - 200 497 text/css 34.4692ms

[23:32:15 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/lib/bootstrap/dist/js/bootstrap.bundle.min.js - - - 200 80698 application/javascript 15.4050ms

[23:32:15 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css'. Physical path: '/app/wwwroot/lib/bootstrap/dist/css/bootstrap.min.css'

[23:32:15 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/lib/bootstrap/dist/css/bootstrap.min.css - - - 200 159515 text/css 47.6198ms

[23:32:15 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/favicon.ico - -

[23:32:15 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/favicon.ico'. Physical path: '/app/wwwroot/favicon.ico'

[23:32:15 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/favicon.ico - - - 200 1150 image/x-icon 10.1191ms

[23:32:15 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/favicon.ico - -

[23:32:15 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/favicon.ico'. Physical path: '/app/wwwroot/favicon.ico'

[23:32:15 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/favicon.ico - - - 200 1150 image/x-icon 9.0748ms

[23:32:23 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 POST https://localhost/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3DStarter.Bff%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520Starter.Api%2520offline_access%26code_challenge%3DMR5iQcf8_zBKIO8zybp8cPMEoQPgfDjQQLdZsKh2Q84%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D638025967348779955.OGQ0ZTA2YmMtZDdkMC00NjBjLTkwZDgtMDViMGMwMWJiNDcxZTNkMzNmNWUtYzE2Ni00MzYzLThjMDgtNzkxOTg2ZDg5OGRi%26state%3DCfDJ8NlCXmldZLBHsAViIel-sLxQa6tHWI0uktIecLx165rIS9_fb11c88y9KGZOEvCFRrBRV_DZwGG7Enn8fsfdowHPRoeQJowCW4aC55t5MzmHO6CwzfV3Y92QGRBXGxH2r4G_cqHiYYp7ukWgC7MUD-aod4FSdUkaW0zDCOUei1WbLilBSrFbaeVHjMB0mJpdMRZFGhHfNfH41y6BfNBVM862Qh_-B0bfyPDDqmNPWlHz4TlkRRJzO3hoeVF7PtFRPQ1H8rHPqChfbtaW1TgjE40JbyNm4BUbeZjp_H1P15rG9J9lob5Xb6idAV9wu_GVPeNP7skZrBJIJPFgi5ue4jhDUU1rWzb7gN8Wi7TmR6cRW1MYueURI5Hlo7u3Uw4G2HR64Ah9E-iKbV1q1PZ4KpQ%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.7.1.0 application/x-www-form-urlencoded 1198

[23:32:23 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService
CORS policy execution successful.

[23:32:23 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware
No CORS policy found for the specified request.

[23:32:23 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:32:23 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:32:23 Information] Microsoft.AspNetCore.Routing.EndpointMiddleware
Executing endpoint 'Starter.Idp.Controllers.Account.AccountController.Login (IDP)'

[23:32:23 Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker
Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Starter.Idp.Models.Account.LoginInputModel, System.String) on controller Starter.Idp.Controllers.Account.AccountController (IDP).

[23:32:23 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:32:23 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Start authorize request protocol validation

[23:32:23 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:32:23 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Checking for PKCE parameters

[23:32:23 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator

[23:32:23 Information] Microsoft.EntityFrameworkCore.Infrastructure
Entity Framework Core 5.0.8 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None

[23:32:23 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0

[23:32:23 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (11ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0

[23:32:23 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (19ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0

[23:32:23 Debug] IdentityServer4.Hosting.IdentityServerAuthenticationService
Augmenting SignInContext

[23:32:23 Debug] IdentityServer4.Hosting.IdentityServerAuthenticationService
Adding idp claim with value: local

[23:32:23 Debug] IdentityServer4.Hosting.IdentityServerAuthenticationService
Adding auth_time claim with value: 1666999943

[23:32:23 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:32:23 Information] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application signed in.

[23:32:23 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0

[23:32:23 Information] IdentityServer4.Events.DefaultEventService
{"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"4","DisplayName":"bob","Endpoint":"UI","ClientId":"Starter.Bff","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMLP7IIHD881:00000002","TimeStamp":"2022-10-28T23:32:23.0000000Z","ProcessId":149,"LocalIpAddress":"172.18.0.4:5007","RemoteIpAddress":"172.18.0.1","$type":"UserLoginSuccessEvent"}

[23:32:23 Information] Microsoft.AspNetCore.Mvc.Infrastructure.RedirectResultExecutor
Executing RedirectResult, redirecting to /connect/authorize/callback?client_id=Starter.Bff&redirect_uri=https%3A%2F%2Flocalhost%2Fsignin-oidc&response_type=code&scope=openid%20profile%20Starter.Api%20offline_access&code_challenge=MR5iQcf8_zBKIO8zybp8cPMEoQPgfDjQQLdZsKh2Q84&code_challenge_method=S256&response_mode=form_post&nonce=638025967348779955.OGQ0ZTA2YmMtZDdkMC00NjBjLTkwZDgtMDViMGMwMWJiNDcxZTNkMzNmNWUtYzE2Ni00MzYzLThjMDgtNzkxOTg2ZDg5OGRi&state=CfDJ8NlCXmldZLBHsAViIel-sLxQa6tHWI0uktIecLx165rIS9_fb11c88y9KGZOEvCFRrBRV_DZwGG7Enn8fsfdowHPRoeQJowCW4aC55t5MzmHO6CwzfV3Y92QGRBXGxH2r4G_cqHiYYp7ukWgC7MUD-aod4FSdUkaW0zDCOUei1WbLilBSrFbaeVHjMB0mJpdMRZFGhHfNfH41y6BfNBVM862Qh_-B0bfyPDDqmNPWlHz4TlkRRJzO3hoeVF7PtFRPQ1H8rHPqChfbtaW1TgjE40JbyNm4BUbeZjp_H1P15rG9J9lob5Xb6idAV9wu_GVPeNP7skZrBJIJPFgi5ue4jhDUU1rWzb7gN8Wi7TmR6cRW1MYueURI5Hlo7u3Uw4G2HR64Ah9E-iKbV1q1PZ4KpQ&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.7.1.0.

[23:32:23 Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker
Executed action Starter.Idp.Controllers.Account.AccountController.Login (IDP) in 291.4559ms

[23:32:23 Information] Microsoft.AspNetCore.Routing.EndpointMiddleware
Executed endpoint 'Starter.Idp.Controllers.Account.AccountController.Login (IDP)'

[23:32:23 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 POST https://localhost/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3DStarter.Bff%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520Starter.Api%2520offline_access%26code_challenge%3DMR5iQcf8_zBKIO8zybp8cPMEoQPgfDjQQLdZsKh2Q84%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D638025967348779955.OGQ0ZTA2YmMtZDdkMC00NjBjLTkwZDgtMDViMGMwMWJiNDcxZTNkMzNmNWUtYzE2Ni00MzYzLThjMDgtNzkxOTg2ZDg5OGRi%26state%3DCfDJ8NlCXmldZLBHsAViIel-sLxQa6tHWI0uktIecLx165rIS9_fb11c88y9KGZOEvCFRrBRV_DZwGG7Enn8fsfdowHPRoeQJowCW4aC55t5MzmHO6CwzfV3Y92QGRBXGxH2r4G_cqHiYYp7ukWgC7MUD-aod4FSdUkaW0zDCOUei1WbLilBSrFbaeVHjMB0mJpdMRZFGhHfNfH41y6BfNBVM862Qh_-B0bfyPDDqmNPWlHz4TlkRRJzO3hoeVF7PtFRPQ1H8rHPqChfbtaW1TgjE40JbyNm4BUbeZjp_H1P15rG9J9lob5Xb6idAV9wu_GVPeNP7skZrBJIJPFgi5ue4jhDUU1rWzb7gN8Wi7TmR6cRW1MYueURI5Hlo7u3Uw4G2HR64Ah9E-iKbV1q1PZ4KpQ%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.7.1.0 application/x-www-form-urlencoded 1198 - 302 0 - 309.9328ms

[23:32:23 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/connect/authorize/callback?client_id=Starter.Bff&redirect_uri=https%3A%2F%2Flocalhost%2Fsignin-oidc&response_type=code&scope=openid%20profile%20Starter.Api%20offline_access&code_challenge=MR5iQcf8_zBKIO8zybp8cPMEoQPgfDjQQLdZsKh2Q84&code_challenge_method=S256&response_mode=form_post&nonce=638025967348779955.OGQ0ZTA2YmMtZDdkMC00NjBjLTkwZDgtMDViMGMwMWJiNDcxZTNkMzNmNWUtYzE2Ni00MzYzLThjMDgtNzkxOTg2ZDg5OGRi&state=CfDJ8NlCXmldZLBHsAViIel-sLxQa6tHWI0uktIecLx165rIS9_fb11c88y9KGZOEvCFRrBRV_DZwGG7Enn8fsfdowHPRoeQJowCW4aC55t5MzmHO6CwzfV3Y92QGRBXGxH2r4G_cqHiYYp7ukWgC7MUD-aod4FSdUkaW0zDCOUei1WbLilBSrFbaeVHjMB0mJpdMRZFGhHfNfH41y6BfNBVM862Qh_-B0bfyPDDqmNPWlHz4TlkRRJzO3hoeVF7PtFRPQ1H8rHPqChfbtaW1TgjE40JbyNm4BUbeZjp_H1P15rG9J9lob5Xb6idAV9wu_GVPeNP7skZrBJIJPFgi5ue4jhDUU1rWzb7gN8Wi7TmR6cRW1MYueURI5Hlo7u3Uw4G2HR64Ah9E-iKbV1q1PZ4KpQ&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.7.1.0 - -

[23:32:23 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService
CORS policy execution successful.

[23:32:23 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware
No CORS policy found for the specified request.

[23:32:23 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was successfully authenticated.

[23:32:23 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was successfully authenticated.

[23:32:23 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /connect/authorize/callback matched to endpoint type Authorize

[23:32:23 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint

[23:32:23 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback

[23:32:23 Debug] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
Start authorize callback request

[23:32:23 Debug] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
User in authorize request: 4

[23:32:23 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Start authorize request protocol validation

[23:32:23 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:32:23 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Checking for PKCE parameters

[23:32:23 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator

[23:32:23 Debug] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
ValidatedAuthorizeRequest
{"ClientId":"Starter.Bff","ClientName":null,"RedirectUri":"https://localhost/signin-oidc","AllowedRedirectUris":["https://localhost/signin-oidc","https://bff:5005/signin-oidc","https://localhost/loggedin"],"SubjectId":"4","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile Starter.Api offline_access","State":"CfDJ8NlCXmldZLBHsAViIel-sLxQa6tHWI0uktIecLx165rIS9_fb11c88y9KGZOEvCFRrBRV_DZwGG7Enn8fsfdowHPRoeQJowCW4aC55t5MzmHO6CwzfV3Y92QGRBXGxH2r4G_cqHiYYp7ukWgC7MUD-aod4FSdUkaW0zDCOUei1WbLilBSrFbaeVHjMB0mJpdMRZFGhHfNfH41y6BfNBVM862Qh_-B0bfyPDDqmNPWlHz4TlkRRJzO3hoeVF7PtFRPQ1H8rHPqChfbtaW1TgjE40JbyNm4BUbeZjp_H1P15rG9J9lob5Xb6idAV9wu_GVPeNP7skZrBJIJPFgi5ue4jhDUU1rWzb7gN8Wi7TmR6cRW1MYueURI5Hlo7u3Uw4G2HR64Ah9E-iKbV1q1PZ4KpQ","UiLocales":null,"Nonce":"638025967348779955.OGQ0ZTA2YmMtZDdkMC00NjBjLTkwZDgtMDViMGMwMWJiNDcxZTNkMzNmNWUtYzE2Ni00MzYzLThjMDgtNzkxOTg2ZDg5OGRi","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"6342BDCDD94011918128BA8741902D03","Raw":{"client_id":"Starter.Bff","redirect_uri":"https://localhost/signin-oidc","response_type":"code","scope":"openid profile Starter.Api offline_access","code_challenge":"MR5iQcf8_zBKIO8zybp8cPMEoQPgfDjQQLdZsKh2Q84","code_challenge_method":"S256","response_mode":"form_post","nonce":"638025967348779955.OGQ0ZTA2YmMtZDdkMC00NjBjLTkwZDgtMDViMGMwMWJiNDcxZTNkMzNmNWUtYzE2Ni00MzYzLThjMDgtNzkxOTg2ZDg5OGRi","state":"CfDJ8NlCXmldZLBHsAViIel-sLxQa6tHWI0uktIecLx165rIS9_fb11c88y9KGZOEvCFRrBRV_DZwGG7Enn8fsfdowHPRoeQJowCW4aC55t5MzmHO6CwzfV3Y92QGRBXGxH2r4G_cqHiYYp7ukWgC7MUD-aod4FSdUkaW0zDCOUei1WbLilBSrFbaeVHjMB0mJpdMRZFGhHfNfH41y6BfNBVM862Qh_-B0bfyPDDqmNPWlHz4TlkRRJzO3hoeVF7PtFRPQ1H8rHPqChfbtaW1TgjE40JbyNm4BUbeZjp_H1P15rG9J9lob5Xb6idAV9wu_GVPeNP7skZrBJIJPFgi5ue4jhDUU1rWzb7gN8Wi7TmR6cRW1MYueURI5Hlo7u3Uw4G2HR64Ah9E-iKbV1q1PZ4KpQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}

[23:32:23 Information] Microsoft.EntityFrameworkCore.Infrastructure
Entity Framework Core 5.0.8 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None

[23:32:23 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0

[23:32:23 Debug] IdentityServer4.Services.DefaultConsentService
Client is configured to not require consent, no consent is required

[23:32:23 Debug] IdentityServer4.ResponseHandling.AuthorizeResponseGenerator
Creating Authorization Code Flow response.

[23:32:23 Information] IdentityServer4.Events.DefaultEventService
{"ClientId":"Starter.Bff","ClientName":null,"RedirectUri":"https://localhost/signin-oidc","Endpoint":"Authorize","SubjectId":"4","Scopes":"openid profile Starter.Api offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****A877","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMLP7IIHD882:00000002","TimeStamp":"2022-10-28T23:32:23.0000000Z","ProcessId":149,"LocalIpAddress":"172.18.0.4:5007","RemoteIpAddress":"172.18.0.1","$type":"TokenIssuedSuccessEvent"}

[23:32:23 Debug] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
Authorize endpoint response
{"SubjectId":"4","ClientId":"Starter.Bff","RedirectUri":"https://localhost/signin-oidc","State":"CfDJ8NlCXmldZLBHsAViIel-sLxQa6tHWI0uktIecLx165rIS9_fb11c88y9KGZOEvCFRrBRV_DZwGG7Enn8fsfdowHPRoeQJowCW4aC55t5MzmHO6CwzfV3Y92QGRBXGxH2r4G_cqHiYYp7ukWgC7MUD-aod4FSdUkaW0zDCOUei1WbLilBSrFbaeVHjMB0mJpdMRZFGhHfNfH41y6BfNBVM862Qh_-B0bfyPDDqmNPWlHz4TlkRRJzO3hoeVF7PtFRPQ1H8rHPqChfbtaW1TgjE40JbyNm4BUbeZjp_H1P15rG9J9lob5Xb6idAV9wu_GVPeNP7skZrBJIJPFgi5ue4jhDUU1rWzb7gN8Wi7TmR6cRW1MYueURI5Hlo7u3Uw4G2HR64Ah9E-iKbV1q1PZ4KpQ","Scope":"openid profile Starter.Api offline_access","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}

[23:32:23 Debug] IdentityServer4.Hosting.IdentityServerAuthenticationService
Augmenting SignInContext

[23:32:23 Information] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application signed in.

[23:32:23 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/connect/authorize/callback?client_id=Starter.Bff&redirect_uri=https%3A%2F%2Flocalhost%2Fsignin-oidc&response_type=code&scope=openid%20profile%20Starter.Api%20offline_access&code_challenge=MR5iQcf8_zBKIO8zybp8cPMEoQPgfDjQQLdZsKh2Q84&code_challenge_method=S256&response_mode=form_post&nonce=638025967348779955.OGQ0ZTA2YmMtZDdkMC00NjBjLTkwZDgtMDViMGMwMWJiNDcxZTNkMzNmNWUtYzE2Ni00MzYzLThjMDgtNzkxOTg2ZDg5OGRi&state=CfDJ8NlCXmldZLBHsAViIel-sLxQa6tHWI0uktIecLx165rIS9_fb11c88y9KGZOEvCFRrBRV_DZwGG7Enn8fsfdowHPRoeQJowCW4aC55t5MzmHO6CwzfV3Y92QGRBXGxH2r4G_cqHiYYp7ukWgC7MUD-aod4FSdUkaW0zDCOUei1WbLilBSrFbaeVHjMB0mJpdMRZFGhHfNfH41y6BfNBVM862Qh_-B0bfyPDDqmNPWlHz4TlkRRJzO3hoeVF7PtFRPQ1H8rHPqChfbtaW1TgjE40JbyNm4BUbeZjp_H1P15rG9J9lob5Xb6idAV9wu_GVPeNP7skZrBJIJPFgi5ue4jhDUU1rWzb7gN8Wi7TmR6cRW1MYueURI5Hlo7u3Uw4G2HR64Ah9E-iKbV1q1PZ4KpQ&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.7.1.0 - - - 200 - text/html;+charset=UTF-8 124.5172ms

[23:32:23 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.1 POST http://idp:5006/connect/token application/x-www-form-urlencoded 251

[23:32:23 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:32:23 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:32:23 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /connect/token matched to endpoint type Token

[23:32:23 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint

[23:32:23 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token

[23:32:23 Debug] IdentityServer4.Endpoints.TokenEndpoint
Start token request.

[23:32:23 Debug] IdentityServer4.Validation.ClientSecretValidator
Start client validation

[23:32:23 Debug] IdentityServer4.Validation.BasicAuthenticationSecretParser
Start parsing Basic Authentication secret

[23:32:23 Debug] IdentityServer4.Validation.PostBodySecretParser
Start parsing for secret in post body

[23:32:23 Debug] IdentityServer4.Validation.ISecretsListParser
Parser found secret: PostBodySecretParser

[23:32:23 Debug] IdentityServer4.Validation.ISecretsListParser
Secret id found: Starter.Bff

[23:32:23 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:32:23 Debug] IdentityServer4.Validation.ISecretsListValidator
Secret validator success: HashedSharedSecretValidator

[23:32:23 Debug] IdentityServer4.Validation.ClientSecretValidator
Client validation success

[23:32:23 Information] IdentityServer4.Events.DefaultEventService
{"ClientId":"Starter.Bff","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMLP7IIHD87O:00000004","TimeStamp":"2022-10-28T23:32:23.0000000Z","ProcessId":149,"LocalIpAddress":"172.18.0.4:5006","RemoteIpAddress":"172.18.0.5","$type":"ClientAuthenticationSuccessEvent"}

[23:32:23 Debug] IdentityServer4.Validation.TokenRequestValidator
Start token request validation

[23:32:23 Debug] IdentityServer4.Validation.TokenRequestValidator
Start validation of authorization code token request

[23:32:23 Debug] IdentityServer4.Validation.TokenRequestValidator
Client required a proof key for code exchange. Starting PKCE validation

[23:32:23 Information] Microsoft.EntityFrameworkCore.Infrastructure
Entity Framework Core 5.0.8 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None

[23:32:23 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0

[23:32:23 Debug] IdentityServer4.Validation.TokenRequestValidator
Validation of authorization code token request success

[23:32:23 Information] IdentityServer4.Validation.TokenRequestValidator
Token request validation success, {"ClientId":"Starter.Bff","ClientName":null,"GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****A877","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"Starter.Bff","client_secret":"***REDACTED***","code":"392D75ABF55A9809F0E8F3DF35C39BC2D88733D8FD2B7FF43246465C3D26A877","grant_type":"authorization_code","redirect_uri":"https://localhost/signin-oidc","code_verifier":"aqdUPeJ0gsGdMr8OmrJ8iSsxGL-YQIv0yWFnrVpfj1Q"},"$type":"TokenRequestValidationLog"}

[23:32:23 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:32:23 Debug] IdentityServer4.Services.DefaultClaimsService
Getting claims for access token for client: Starter.Bff

[23:32:23 Debug] IdentityServer4.Services.DefaultClaimsService
Getting claims for access token for subject: 4

[23:32:23 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0

[23:32:23 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0

[23:32:23 Debug] IdentityServer4.Services.DefaultRefreshTokenService
Creating refresh token

[23:32:23 Debug] IdentityServer4.Services.DefaultRefreshTokenService
Setting an absolute lifetime: 2592000

[23:32:23 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:32:23 Debug] IdentityServer4.Services.DefaultClaimsService
Getting claims for identity token for subject: 4 and client: Starter.Bff

[23:32:23 Debug] IdentityServer4.Services.DefaultClaimsService
In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.

[23:32:23 Information] IdentityServer4.Events.DefaultEventService
{"ClientId":"Starter.Bff","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4","Scopes":"openid profile Starter.Api offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****lhTw","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****4429","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Ri1A","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMLP7IIHD87O:00000004","TimeStamp":"2022-10-28T23:32:23.0000000Z","ProcessId":149,"LocalIpAddress":"172.18.0.4:5006","RemoteIpAddress":"172.18.0.5","$type":"TokenIssuedSuccessEvent"}

[23:32:23 Debug] IdentityServer4.Endpoints.TokenEndpoint
Token request success.

[23:32:24 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.1 POST http://idp:5006/connect/token application/x-www-form-urlencoded 251 - 200 - application/json;+charset=UTF-8 160.2658ms

[23:32:24 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.1 GET http://idp:5006/connect/userinfo - -

[23:32:24 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:32:24 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:32:24 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /connect/userinfo matched to endpoint type Userinfo

[23:32:24 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint

[23:32:24 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo

[23:32:24 Debug] IdentityServer4.Endpoints.UserInfoEndpoint
Start userinfo request

[23:32:24 Debug] IdentityServer4.Validation.BearerTokenUsageValidator
Bearer token found in header

[23:32:24 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:32:24 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:32:24 Information] Microsoft.EntityFrameworkCore.Infrastructure
Entity Framework Core 5.0.8 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None

[23:32:24 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0

[23:32:24 Debug] IdentityServer4.Validation.TokenValidator
Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator

[23:32:24 Debug] IdentityServer4.Validation.TokenValidator
Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"F1FE23AEF0D7839FA9DBBB9A8A3C96BC","Claims":{"nbf":1666999943,"exp":1667003543,"iss":"https://localhost","aud":["starter.api","https://localhost/resources"],"client_id":"Starter.Bff","sub":"4","auth_time":1666999943,"idp":"local","jti":"F1FE23AEF0D7839FA9DBBB9A8A3C96BC","sid":"6342BDCDD94011918128BA8741902D03","iat":1666999943,"scope":["openid","profile","Starter.Api","offline_access"],"amr":"pwd"},"$type":"TokenValidationLog"}

[23:32:24 Debug] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Creating userinfo response

[23:32:24 Debug] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Scopes in access token: openid profile Starter.Api offline_access

[23:32:24 Debug] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at

[23:32:24 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0

[23:32:24 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0

[23:32:24 Information] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Profile service returned the following claim types: sub website family_name given_name name preferred_username

[23:32:24 Debug] IdentityServer4.Endpoints.UserInfoEndpoint
End userinfo request

[23:32:24 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.1 GET http://idp:5006/connect/userinfo - - - 200 - application/json;+charset=UTF-8 85.9094ms

[23:32:24 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.1 GET http://idp:5006/.well-known/openid-configuration - -

[23:32:24 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:32:24 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:32:24 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /.well-known/openid-configuration matched to endpoint type Discovery

[23:32:24 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint

[23:32:24 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration

[23:32:24 Debug] IdentityServer4.Endpoints.DiscoveryEndpoint
Start discovery request

[23:32:24 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.1 GET http://idp:5006/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 3.7614ms

[23:32:24 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.1 GET http://idp:5006/.well-known/openid-configuration/jwks - -

[23:32:24 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:32:24 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:32:24 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery

[23:32:24 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint

[23:32:24 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks

[23:32:24 Debug] IdentityServer4.Endpoints.DiscoveryKeyEndpoint
Start key discovery request

[23:32:24 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.1 GET http://idp:5006/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 5.6066ms

[23:32:24 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.1 GET http://idp:5006/connect/userinfo - -

[23:32:24 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:32:24 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:32:24 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /connect/userinfo matched to endpoint type Userinfo

[23:32:24 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint

[23:32:24 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo

[23:32:24 Debug] IdentityServer4.Endpoints.UserInfoEndpoint
Start userinfo request

[23:32:24 Debug] IdentityServer4.Validation.BearerTokenUsageValidator
Bearer token found in header

[23:32:24 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:32:24 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:32:24 Information] Microsoft.EntityFrameworkCore.Infrastructure
Entity Framework Core 5.0.8 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None

[23:32:24 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0

[23:32:24 Debug] IdentityServer4.Validation.TokenValidator
Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator

[23:32:24 Debug] IdentityServer4.Validation.TokenValidator
Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"F1FE23AEF0D7839FA9DBBB9A8A3C96BC","Claims":{"nbf":1666999943,"exp":1667003543,"iss":"https://localhost","aud":["starter.api","https://localhost/resources"],"client_id":"Starter.Bff","sub":"4","auth_time":1666999943,"idp":"local","jti":"F1FE23AEF0D7839FA9DBBB9A8A3C96BC","sid":"6342BDCDD94011918128BA8741902D03","iat":1666999943,"scope":["openid","profile","Starter.Api","offline_access"],"amr":"pwd"},"$type":"TokenValidationLog"}

[23:32:24 Debug] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Creating userinfo response

[23:32:24 Debug] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Scopes in access token: openid profile Starter.Api offline_access

[23:32:24 Debug] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at

[23:32:24 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0

[23:32:24 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0

[23:32:24 Information] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Profile service returned the following claim types: sub website family_name given_name name preferred_username

[23:32:24 Debug] IdentityServer4.Endpoints.UserInfoEndpoint
End userinfo request

[23:32:24 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.1 GET http://idp:5006/connect/userinfo - - - 200 - application/json;+charset=UTF-8 25.7947ms

[23:35:59 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/connect/authorize?client_id=Starter.Bff&redirect_uri=https%3A%2F%2Flocalhost%2Fsignin-oidc&response_type=code&scope=openid%20profile%20Starter.Api%20offline_access&code_challenge=fM1inwpB8L4-iEm1fmrcE8zIeN3K7mN9urj-cISw1sk&code_challenge_method=S256&response_mode=form_post&nonce=638025969593319054.YjVmZmIwNTItNzZmNC00ODU5LWJlOWYtOGZjN2NhZWUwMWFiNmZkOTg0NjQtODA3Ni00YzFlLTk0NzQtODMzMmM1YTQzMGI1&state=CfDJ8NlCXmldZLBHsAViIel-sLwqYlu3H2LGqHtRPQRO0nGextifcYmIjWN-4J-p84AKrgaZ_-u_pvcCkWcaCQqX2b2q-fvm2pRaaobn83XOiPbkF7BdFIP8eeaGUrdrOO_qBEScJUVuXt5LnV4gLgqTtnnCqEPczzfd7FVeJl_UJLtthQmHHwcz-sfpHHQ3M0g9QGiCgLzQec8xD5ezozAo2rxxM36NlC9SRv1Y-TMBKweFo-IaTao6ps7f6H8ynKfJDn-TI8TqYukZZyOC02t82kgKqexu7qAPiNk6ydv97iRBG9rFV5UmRD6TEPmZnIEVERfPJ2eJso7UsnD1I9IoQo9uDHOF13g01nazCvxt4JBwAKtSN5l58a0b2cNAuFiMw7jJIAeaWvB3scMrhEltB04&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.7.1.0 - -

[23:35:59 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService
CORS policy execution successful.

[23:35:59 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware
No CORS policy found for the specified request.

[23:35:59 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:35:59 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:35:59 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /connect/authorize matched to endpoint type Authorize

[23:35:59 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint

[23:35:59 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize

[23:35:59 Debug] IdentityServer4.Endpoints.AuthorizeEndpoint
Start authorize request

[23:35:59 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:35:59 Debug] IdentityServer4.Endpoints.AuthorizeEndpoint
No user present in authorize request

[23:35:59 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Start authorize request protocol validation

[23:35:59 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:35:59 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Checking for PKCE parameters

[23:35:59 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator

[23:35:59 Debug] IdentityServer4.Endpoints.AuthorizeEndpoint
ValidatedAuthorizeRequest
{"ClientId":"Starter.Bff","ClientName":null,"RedirectUri":"https://localhost/signin-oidc","AllowedRedirectUris":["https://localhost/signin-oidc","https://bff:5005/signin-oidc","https://localhost/loggedin"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile Starter.Api offline_access","State":"CfDJ8NlCXmldZLBHsAViIel-sLwqYlu3H2LGqHtRPQRO0nGextifcYmIjWN-4J-p84AKrgaZ_-u_pvcCkWcaCQqX2b2q-fvm2pRaaobn83XOiPbkF7BdFIP8eeaGUrdrOO_qBEScJUVuXt5LnV4gLgqTtnnCqEPczzfd7FVeJl_UJLtthQmHHwcz-sfpHHQ3M0g9QGiCgLzQec8xD5ezozAo2rxxM36NlC9SRv1Y-TMBKweFo-IaTao6ps7f6H8ynKfJDn-TI8TqYukZZyOC02t82kgKqexu7qAPiNk6ydv97iRBG9rFV5UmRD6TEPmZnIEVERfPJ2eJso7UsnD1I9IoQo9uDHOF13g01nazCvxt4JBwAKtSN5l58a0b2cNAuFiMw7jJIAeaWvB3scMrhEltB04","UiLocales":null,"Nonce":"638025969593319054.YjVmZmIwNTItNzZmNC00ODU5LWJlOWYtOGZjN2NhZWUwMWFiNmZkOTg0NjQtODA3Ni00YzFlLTk0NzQtODMzMmM1YTQzMGI1","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Starter.Bff","redirect_uri":"https://localhost/signin-oidc","response_type":"code","scope":"openid profile Starter.Api offline_access","code_challenge":"fM1inwpB8L4-iEm1fmrcE8zIeN3K7mN9urj-cISw1sk","code_challenge_method":"S256","response_mode":"form_post","nonce":"638025969593319054.YjVmZmIwNTItNzZmNC00ODU5LWJlOWYtOGZjN2NhZWUwMWFiNmZkOTg0NjQtODA3Ni00YzFlLTk0NzQtODMzMmM1YTQzMGI1","state":"CfDJ8NlCXmldZLBHsAViIel-sLwqYlu3H2LGqHtRPQRO0nGextifcYmIjWN-4J-p84AKrgaZ_-u_pvcCkWcaCQqX2b2q-fvm2pRaaobn83XOiPbkF7BdFIP8eeaGUrdrOO_qBEScJUVuXt5LnV4gLgqTtnnCqEPczzfd7FVeJl_UJLtthQmHHwcz-sfpHHQ3M0g9QGiCgLzQec8xD5ezozAo2rxxM36NlC9SRv1Y-TMBKweFo-IaTao6ps7f6H8ynKfJDn-TI8TqYukZZyOC02t82kgKqexu7qAPiNk6ydv97iRBG9rFV5UmRD6TEPmZnIEVERfPJ2eJso7UsnD1I9IoQo9uDHOF13g01nazCvxt4JBwAKtSN5l58a0b2cNAuFiMw7jJIAeaWvB3scMrhEltB04","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}

[23:35:59 Information] IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator
Showing login: User is not authenticated

[23:35:59 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/connect/authorize?client_id=Starter.Bff&redirect_uri=https%3A%2F%2Flocalhost%2Fsignin-oidc&response_type=code&scope=openid%20profile%20Starter.Api%20offline_access&code_challenge=fM1inwpB8L4-iEm1fmrcE8zIeN3K7mN9urj-cISw1sk&code_challenge_method=S256&response_mode=form_post&nonce=638025969593319054.YjVmZmIwNTItNzZmNC00ODU5LWJlOWYtOGZjN2NhZWUwMWFiNmZkOTg0NjQtODA3Ni00YzFlLTk0NzQtODMzMmM1YTQzMGI1&state=CfDJ8NlCXmldZLBHsAViIel-sLwqYlu3H2LGqHtRPQRO0nGextifcYmIjWN-4J-p84AKrgaZ_-u_pvcCkWcaCQqX2b2q-fvm2pRaaobn83XOiPbkF7BdFIP8eeaGUrdrOO_qBEScJUVuXt5LnV4gLgqTtnnCqEPczzfd7FVeJl_UJLtthQmHHwcz-sfpHHQ3M0g9QGiCgLzQec8xD5ezozAo2rxxM36NlC9SRv1Y-TMBKweFo-IaTao6ps7f6H8ynKfJDn-TI8TqYukZZyOC02t82kgKqexu7qAPiNk6ydv97iRBG9rFV5UmRD6TEPmZnIEVERfPJ2eJso7UsnD1I9IoQo9uDHOF13g01nazCvxt4JBwAKtSN5l58a0b2cNAuFiMw7jJIAeaWvB3scMrhEltB04&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.7.1.0 - - - 302 0 - 18.7171ms

[23:35:59 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3DStarter.Bff%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520Starter.Api%2520offline_access%26code_challenge%3DfM1inwpB8L4-iEm1fmrcE8zIeN3K7mN9urj-cISw1sk%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D638025969593319054.YjVmZmIwNTItNzZmNC00ODU5LWJlOWYtOGZjN2NhZWUwMWFiNmZkOTg0NjQtODA3Ni00YzFlLTk0NzQtODMzMmM1YTQzMGI1%26state%3DCfDJ8NlCXmldZLBHsAViIel-sLwqYlu3H2LGqHtRPQRO0nGextifcYmIjWN-4J-p84AKrgaZ_-u_pvcCkWcaCQqX2b2q-fvm2pRaaobn83XOiPbkF7BdFIP8eeaGUrdrOO_qBEScJUVuXt5LnV4gLgqTtnnCqEPczzfd7FVeJl_UJLtthQmHHwcz-sfpHHQ3M0g9QGiCgLzQec8xD5ezozAo2rxxM36NlC9SRv1Y-TMBKweFo-IaTao6ps7f6H8ynKfJDn-TI8TqYukZZyOC02t82kgKqexu7qAPiNk6ydv97iRBG9rFV5UmRD6TEPmZnIEVERfPJ2eJso7UsnD1I9IoQo9uDHOF13g01nazCvxt4JBwAKtSN5l58a0b2cNAuFiMw7jJIAeaWvB3scMrhEltB04%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.7.1.0 - -

[23:35:59 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService
CORS policy execution successful.

[23:35:59 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware
No CORS policy found for the specified request.

[23:35:59 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:35:59 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:35:59 Information] Microsoft.AspNetCore.Routing.EndpointMiddleware
Executing endpoint 'Starter.Idp.Controllers.Account.AccountController.Login (IDP)'

[23:35:59 Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker
Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller Starter.Idp.Controllers.Account.AccountController (IDP).

[23:35:59 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:35:59 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Start authorize request protocol validation

[23:35:59 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:35:59 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Checking for PKCE parameters

[23:35:59 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator

[23:35:59 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:35:59 Information] Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor
Executing ViewResult, running view Login.

[23:35:59 Information] Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor
Executed ViewResult - view Login executed in 10.5526ms.

[23:35:59 Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker
Executed action Starter.Idp.Controllers.Account.AccountController.Login (IDP) in 75.0397ms

[23:35:59 Information] Microsoft.AspNetCore.Routing.EndpointMiddleware
Executed endpoint 'Starter.Idp.Controllers.Account.AccountController.Login (IDP)'

[23:35:59 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3DStarter.Bff%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520Starter.Api%2520offline_access%26code_challenge%3DfM1inwpB8L4-iEm1fmrcE8zIeN3K7mN9urj-cISw1sk%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D638025969593319054.YjVmZmIwNTItNzZmNC00ODU5LWJlOWYtOGZjN2NhZWUwMWFiNmZkOTg0NjQtODA3Ni00YzFlLTk0NzQtODMzMmM1YTQzMGI1%26state%3DCfDJ8NlCXmldZLBHsAViIel-sLwqYlu3H2LGqHtRPQRO0nGextifcYmIjWN-4J-p84AKrgaZ_-u_pvcCkWcaCQqX2b2q-fvm2pRaaobn83XOiPbkF7BdFIP8eeaGUrdrOO_qBEScJUVuXt5LnV4gLgqTtnnCqEPczzfd7FVeJl_UJLtthQmHHwcz-sfpHHQ3M0g9QGiCgLzQec8xD5ezozAo2rxxM36NlC9SRv1Y-TMBKweFo-IaTao6ps7f6H8ynKfJDn-TI8TqYukZZyOC02t82kgKqexu7qAPiNk6ydv97iRBG9rFV5UmRD6TEPmZnIEVERfPJ2eJso7UsnD1I9IoQo9uDHOF13g01nazCvxt4JBwAKtSN5l58a0b2cNAuFiMw7jJIAeaWvB3scMrhEltB04%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.7.1.0 - - - 200 - text/html;+charset=utf-8 101.3290ms

[23:35:59 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/css/site.css - -

[23:35:59 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/lib/bootstrap/dist/css/bootstrap.min.css - -

[23:35:59 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/lib/jquery/dist/jquery.slim.min.js - -

[23:35:59 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/css/site.css'. Physical path: '/app/wwwroot/css/site.css'

[23:35:59 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/css/site.css - - - 200 497 text/css 22.7445ms

[23:35:59 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css'. Physical path: '/app/wwwroot/lib/bootstrap/dist/css/bootstrap.min.css'

[23:35:59 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/lib/bootstrap/dist/css/bootstrap.min.css - - - 200 159515 text/css 44.7046ms

[23:35:59 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/lib/jquery/dist/jquery.slim.min.js'. Physical path: '/app/wwwroot/lib/jquery/dist/jquery.slim.min.js'

[23:35:59 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/lib/jquery/dist/jquery.slim.min.js - - - 200 72397 application/javascript 35.9898ms

[23:35:59 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/lib/bootstrap/dist/js/bootstrap.bundle.min.js - -

[23:35:59 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js'. Physical path: '/app/wwwroot/lib/bootstrap/dist/js/bootstrap.bundle.min.js'

[23:35:59 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/lib/bootstrap/dist/js/bootstrap.bundle.min.js - - - 200 80698 application/javascript 24.8697ms

[23:35:59 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/lib/bootstrap/dist/css/bootstrap.min.css.map - -

[23:35:59 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - -

[23:35:59 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map'. Physical path: '/app/wwwroot/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map'

[23:35:59 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - - - 200 318045 text/plain 31.6855ms

[23:35:59 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css.map'. Physical path: '/app/wwwroot/lib/bootstrap/dist/css/bootstrap.min.css.map'

[23:35:59 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/lib/bootstrap/dist/css/bootstrap.min.css.map - - - 200 641867 text/plain 53.5865ms

[23:36:06 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 POST https://localhost/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3DStarter.Bff%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520Starter.Api%2520offline_access%26code_challenge%3DfM1inwpB8L4-iEm1fmrcE8zIeN3K7mN9urj-cISw1sk%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D638025969593319054.YjVmZmIwNTItNzZmNC00ODU5LWJlOWYtOGZjN2NhZWUwMWFiNmZkOTg0NjQtODA3Ni00YzFlLTk0NzQtODMzMmM1YTQzMGI1%26state%3DCfDJ8NlCXmldZLBHsAViIel-sLwqYlu3H2LGqHtRPQRO0nGextifcYmIjWN-4J-p84AKrgaZ_-u_pvcCkWcaCQqX2b2q-fvm2pRaaobn83XOiPbkF7BdFIP8eeaGUrdrOO_qBEScJUVuXt5LnV4gLgqTtnnCqEPczzfd7FVeJl_UJLtthQmHHwcz-sfpHHQ3M0g9QGiCgLzQec8xD5ezozAo2rxxM36NlC9SRv1Y-TMBKweFo-IaTao6ps7f6H8ynKfJDn-TI8TqYukZZyOC02t82kgKqexu7qAPiNk6ydv97iRBG9rFV5UmRD6TEPmZnIEVERfPJ2eJso7UsnD1I9IoQo9uDHOF13g01nazCvxt4JBwAKtSN5l58a0b2cNAuFiMw7jJIAeaWvB3scMrhEltB04%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.7.1.0 application/x-www-form-urlencoded 1198

[23:36:06 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService
CORS policy execution successful.

[23:36:06 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware
No CORS policy found for the specified request.

[23:36:06 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:36:06 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:36:06 Information] Microsoft.AspNetCore.Routing.EndpointMiddleware
Executing endpoint 'Starter.Idp.Controllers.Account.AccountController.Login (IDP)'

[23:36:06 Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker
Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Starter.Idp.Models.Account.LoginInputModel, System.String) on controller Starter.Idp.Controllers.Account.AccountController (IDP).

[23:36:06 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:36:06 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Start authorize request protocol validation

[23:36:06 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:36:06 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Checking for PKCE parameters

[23:36:06 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator

[23:36:06 Information] Microsoft.EntityFrameworkCore.Infrastructure
Entity Framework Core 5.0.8 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None

[23:36:06 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0

[23:36:06 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0

[23:36:06 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0

[23:36:06 Debug] IdentityServer4.Hosting.IdentityServerAuthenticationService
Augmenting SignInContext

[23:36:06 Debug] IdentityServer4.Hosting.IdentityServerAuthenticationService
Adding idp claim with value: local

[23:36:06 Debug] IdentityServer4.Hosting.IdentityServerAuthenticationService
Adding auth_time claim with value: 1667000166

[23:36:06 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:36:06 Information] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application signed in.

[23:36:06 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0

[23:36:06 Information] IdentityServer4.Events.DefaultEventService
{"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"4","DisplayName":"bob","Endpoint":"UI","ClientId":"Starter.Bff","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMLP7IIHD88D:00000002","TimeStamp":"2022-10-28T23:36:06.0000000Z","ProcessId":149,"LocalIpAddress":"172.18.0.4:5007","RemoteIpAddress":"172.18.0.1","$type":"UserLoginSuccessEvent"}

[23:36:06 Information] Microsoft.AspNetCore.Mvc.Infrastructure.RedirectResultExecutor
Executing RedirectResult, redirecting to /connect/authorize/callback?client_id=Starter.Bff&redirect_uri=https%3A%2F%2Flocalhost%2Fsignin-oidc&response_type=code&scope=openid%20profile%20Starter.Api%20offline_access&code_challenge=fM1inwpB8L4-iEm1fmrcE8zIeN3K7mN9urj-cISw1sk&code_challenge_method=S256&response_mode=form_post&nonce=638025969593319054.YjVmZmIwNTItNzZmNC00ODU5LWJlOWYtOGZjN2NhZWUwMWFiNmZkOTg0NjQtODA3Ni00YzFlLTk0NzQtODMzMmM1YTQzMGI1&state=CfDJ8NlCXmldZLBHsAViIel-sLwqYlu3H2LGqHtRPQRO0nGextifcYmIjWN-4J-p84AKrgaZ_-u_pvcCkWcaCQqX2b2q-fvm2pRaaobn83XOiPbkF7BdFIP8eeaGUrdrOO_qBEScJUVuXt5LnV4gLgqTtnnCqEPczzfd7FVeJl_UJLtthQmHHwcz-sfpHHQ3M0g9QGiCgLzQec8xD5ezozAo2rxxM36NlC9SRv1Y-TMBKweFo-IaTao6ps7f6H8ynKfJDn-TI8TqYukZZyOC02t82kgKqexu7qAPiNk6ydv97iRBG9rFV5UmRD6TEPmZnIEVERfPJ2eJso7UsnD1I9IoQo9uDHOF13g01nazCvxt4JBwAKtSN5l58a0b2cNAuFiMw7jJIAeaWvB3scMrhEltB04&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.7.1.0.

[23:36:06 Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker
Executed action Starter.Idp.Controllers.Account.AccountController.Login (IDP) in 26.085ms

[23:36:06 Information] Microsoft.AspNetCore.Routing.EndpointMiddleware
Executed endpoint 'Starter.Idp.Controllers.Account.AccountController.Login (IDP)'

[23:36:06 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 POST https://localhost/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3DStarter.Bff%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520Starter.Api%2520offline_access%26code_challenge%3DfM1inwpB8L4-iEm1fmrcE8zIeN3K7mN9urj-cISw1sk%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D638025969593319054.YjVmZmIwNTItNzZmNC00ODU5LWJlOWYtOGZjN2NhZWUwMWFiNmZkOTg0NjQtODA3Ni00YzFlLTk0NzQtODMzMmM1YTQzMGI1%26state%3DCfDJ8NlCXmldZLBHsAViIel-sLwqYlu3H2LGqHtRPQRO0nGextifcYmIjWN-4J-p84AKrgaZ_-u_pvcCkWcaCQqX2b2q-fvm2pRaaobn83XOiPbkF7BdFIP8eeaGUrdrOO_qBEScJUVuXt5LnV4gLgqTtnnCqEPczzfd7FVeJl_UJLtthQmHHwcz-sfpHHQ3M0g9QGiCgLzQec8xD5ezozAo2rxxM36NlC9SRv1Y-TMBKweFo-IaTao6ps7f6H8ynKfJDn-TI8TqYukZZyOC02t82kgKqexu7qAPiNk6ydv97iRBG9rFV5UmRD6TEPmZnIEVERfPJ2eJso7UsnD1I9IoQo9uDHOF13g01nazCvxt4JBwAKtSN5l58a0b2cNAuFiMw7jJIAeaWvB3scMrhEltB04%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.7.1.0 application/x-www-form-urlencoded 1198 - 302 0 - 30.0725ms

[23:36:06 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/connect/authorize/callback?client_id=Starter.Bff&redirect_uri=https%3A%2F%2Flocalhost%2Fsignin-oidc&response_type=code&scope=openid%20profile%20Starter.Api%20offline_access&code_challenge=fM1inwpB8L4-iEm1fmrcE8zIeN3K7mN9urj-cISw1sk&code_challenge_method=S256&response_mode=form_post&nonce=638025969593319054.YjVmZmIwNTItNzZmNC00ODU5LWJlOWYtOGZjN2NhZWUwMWFiNmZkOTg0NjQtODA3Ni00YzFlLTk0NzQtODMzMmM1YTQzMGI1&state=CfDJ8NlCXmldZLBHsAViIel-sLwqYlu3H2LGqHtRPQRO0nGextifcYmIjWN-4J-p84AKrgaZ_-u_pvcCkWcaCQqX2b2q-fvm2pRaaobn83XOiPbkF7BdFIP8eeaGUrdrOO_qBEScJUVuXt5LnV4gLgqTtnnCqEPczzfd7FVeJl_UJLtthQmHHwcz-sfpHHQ3M0g9QGiCgLzQec8xD5ezozAo2rxxM36NlC9SRv1Y-TMBKweFo-IaTao6ps7f6H8ynKfJDn-TI8TqYukZZyOC02t82kgKqexu7qAPiNk6ydv97iRBG9rFV5UmRD6TEPmZnIEVERfPJ2eJso7UsnD1I9IoQo9uDHOF13g01nazCvxt4JBwAKtSN5l58a0b2cNAuFiMw7jJIAeaWvB3scMrhEltB04&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.7.1.0 - -

[23:36:06 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService
CORS policy execution successful.

[23:36:06 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware
No CORS policy found for the specified request.

[23:36:06 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was successfully authenticated.

[23:36:06 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was successfully authenticated.

[23:36:06 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /connect/authorize/callback matched to endpoint type Authorize

[23:36:06 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint

[23:36:06 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback

[23:36:06 Debug] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
Start authorize callback request

[23:36:06 Debug] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
User in authorize request: 4

[23:36:06 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Start authorize request protocol validation

[23:36:06 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:36:06 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Checking for PKCE parameters

[23:36:06 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator

[23:36:06 Debug] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
ValidatedAuthorizeRequest
{"ClientId":"Starter.Bff","ClientName":null,"RedirectUri":"https://localhost/signin-oidc","AllowedRedirectUris":["https://localhost/signin-oidc","https://bff:5005/signin-oidc","https://localhost/loggedin"],"SubjectId":"4","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile Starter.Api offline_access","State":"CfDJ8NlCXmldZLBHsAViIel-sLwqYlu3H2LGqHtRPQRO0nGextifcYmIjWN-4J-p84AKrgaZ_-u_pvcCkWcaCQqX2b2q-fvm2pRaaobn83XOiPbkF7BdFIP8eeaGUrdrOO_qBEScJUVuXt5LnV4gLgqTtnnCqEPczzfd7FVeJl_UJLtthQmHHwcz-sfpHHQ3M0g9QGiCgLzQec8xD5ezozAo2rxxM36NlC9SRv1Y-TMBKweFo-IaTao6ps7f6H8ynKfJDn-TI8TqYukZZyOC02t82kgKqexu7qAPiNk6ydv97iRBG9rFV5UmRD6TEPmZnIEVERfPJ2eJso7UsnD1I9IoQo9uDHOF13g01nazCvxt4JBwAKtSN5l58a0b2cNAuFiMw7jJIAeaWvB3scMrhEltB04","UiLocales":null,"Nonce":"638025969593319054.YjVmZmIwNTItNzZmNC00ODU5LWJlOWYtOGZjN2NhZWUwMWFiNmZkOTg0NjQtODA3Ni00YzFlLTk0NzQtODMzMmM1YTQzMGI1","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"A84751184C15086FE88B22D756A521D2","Raw":{"client_id":"Starter.Bff","redirect_uri":"https://localhost/signin-oidc","response_type":"code","scope":"openid profile Starter.Api offline_access","code_challenge":"fM1inwpB8L4-iEm1fmrcE8zIeN3K7mN9urj-cISw1sk","code_challenge_method":"S256","response_mode":"form_post","nonce":"638025969593319054.YjVmZmIwNTItNzZmNC00ODU5LWJlOWYtOGZjN2NhZWUwMWFiNmZkOTg0NjQtODA3Ni00YzFlLTk0NzQtODMzMmM1YTQzMGI1","state":"CfDJ8NlCXmldZLBHsAViIel-sLwqYlu3H2LGqHtRPQRO0nGextifcYmIjWN-4J-p84AKrgaZ_-u_pvcCkWcaCQqX2b2q-fvm2pRaaobn83XOiPbkF7BdFIP8eeaGUrdrOO_qBEScJUVuXt5LnV4gLgqTtnnCqEPczzfd7FVeJl_UJLtthQmHHwcz-sfpHHQ3M0g9QGiCgLzQec8xD5ezozAo2rxxM36NlC9SRv1Y-TMBKweFo-IaTao6ps7f6H8ynKfJDn-TI8TqYukZZyOC02t82kgKqexu7qAPiNk6ydv97iRBG9rFV5UmRD6TEPmZnIEVERfPJ2eJso7UsnD1I9IoQo9uDHOF13g01nazCvxt4JBwAKtSN5l58a0b2cNAuFiMw7jJIAeaWvB3scMrhEltB04","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}

[23:36:06 Information] Microsoft.EntityFrameworkCore.Infrastructure
Entity Framework Core 5.0.8 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None

[23:36:06 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0

[23:36:06 Debug] IdentityServer4.Services.DefaultConsentService
Client is configured to not require consent, no consent is required

[23:36:06 Debug] IdentityServer4.ResponseHandling.AuthorizeResponseGenerator
Creating Authorization Code Flow response.

[23:36:06 Information] IdentityServer4.Events.DefaultEventService
{"ClientId":"Starter.Bff","ClientName":null,"RedirectUri":"https://localhost/signin-oidc","Endpoint":"Authorize","SubjectId":"4","Scopes":"openid profile Starter.Api offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****89F6","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMLP7IIHD88E:00000002","TimeStamp":"2022-10-28T23:36:06.0000000Z","ProcessId":149,"LocalIpAddress":"172.18.0.4:5007","RemoteIpAddress":"172.18.0.1","$type":"TokenIssuedSuccessEvent"}

[23:36:06 Debug] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
Authorize endpoint response
{"SubjectId":"4","ClientId":"Starter.Bff","RedirectUri":"https://localhost/signin-oidc","State":"CfDJ8NlCXmldZLBHsAViIel-sLwqYlu3H2LGqHtRPQRO0nGextifcYmIjWN-4J-p84AKrgaZ_-u_pvcCkWcaCQqX2b2q-fvm2pRaaobn83XOiPbkF7BdFIP8eeaGUrdrOO_qBEScJUVuXt5LnV4gLgqTtnnCqEPczzfd7FVeJl_UJLtthQmHHwcz-sfpHHQ3M0g9QGiCgLzQec8xD5ezozAo2rxxM36NlC9SRv1Y-TMBKweFo-IaTao6ps7f6H8ynKfJDn-TI8TqYukZZyOC02t82kgKqexu7qAPiNk6ydv97iRBG9rFV5UmRD6TEPmZnIEVERfPJ2eJso7UsnD1I9IoQo9uDHOF13g01nazCvxt4JBwAKtSN5l58a0b2cNAuFiMw7jJIAeaWvB3scMrhEltB04","Scope":"openid profile Starter.Api offline_access","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}

[23:36:06 Debug] IdentityServer4.Hosting.IdentityServerAuthenticationService
Augmenting SignInContext

[23:36:06 Information] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application signed in.

[23:36:06 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/connect/authorize/callback?client_id=Starter.Bff&redirect_uri=https%3A%2F%2Flocalhost%2Fsignin-oidc&response_type=code&scope=openid%20profile%20Starter.Api%20offline_access&code_challenge=fM1inwpB8L4-iEm1fmrcE8zIeN3K7mN9urj-cISw1sk&code_challenge_method=S256&response_mode=form_post&nonce=638025969593319054.YjVmZmIwNTItNzZmNC00ODU5LWJlOWYtOGZjN2NhZWUwMWFiNmZkOTg0NjQtODA3Ni00YzFlLTk0NzQtODMzMmM1YTQzMGI1&state=CfDJ8NlCXmldZLBHsAViIel-sLwqYlu3H2LGqHtRPQRO0nGextifcYmIjWN-4J-p84AKrgaZ_-u_pvcCkWcaCQqX2b2q-fvm2pRaaobn83XOiPbkF7BdFIP8eeaGUrdrOO_qBEScJUVuXt5LnV4gLgqTtnnCqEPczzfd7FVeJl_UJLtthQmHHwcz-sfpHHQ3M0g9QGiCgLzQec8xD5ezozAo2rxxM36NlC9SRv1Y-TMBKweFo-IaTao6ps7f6H8ynKfJDn-TI8TqYukZZyOC02t82kgKqexu7qAPiNk6ydv97iRBG9rFV5UmRD6TEPmZnIEVERfPJ2eJso7UsnD1I9IoQo9uDHOF13g01nazCvxt4JBwAKtSN5l58a0b2cNAuFiMw7jJIAeaWvB3scMrhEltB04&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.7.1.0 - - - 200 - text/html;+charset=UTF-8 16.6573ms

[23:36:06 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.1 POST http://idp:5006/connect/token application/x-www-form-urlencoded 251

[23:36:06 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:36:06 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:36:06 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /connect/token matched to endpoint type Token

[23:36:06 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint

[23:36:06 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token

[23:36:06 Debug] IdentityServer4.Endpoints.TokenEndpoint
Start token request.

[23:36:06 Debug] IdentityServer4.Validation.ClientSecretValidator
Start client validation

[23:36:06 Debug] IdentityServer4.Validation.BasicAuthenticationSecretParser
Start parsing Basic Authentication secret

[23:36:06 Debug] IdentityServer4.Validation.PostBodySecretParser
Start parsing for secret in post body

[23:36:06 Debug] IdentityServer4.Validation.ISecretsListParser
Parser found secret: PostBodySecretParser

[23:36:06 Debug] IdentityServer4.Validation.ISecretsListParser
Secret id found: Starter.Bff

[23:36:06 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:36:06 Debug] IdentityServer4.Validation.ISecretsListValidator
Secret validator success: HashedSharedSecretValidator

[23:36:06 Debug] IdentityServer4.Validation.ClientSecretValidator
Client validation success

[23:36:06 Information] IdentityServer4.Events.DefaultEventService
{"ClientId":"Starter.Bff","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMLP7IIHD88F:00000002","TimeStamp":"2022-10-28T23:36:06.0000000Z","ProcessId":149,"LocalIpAddress":"172.18.0.4:5006","RemoteIpAddress":"172.18.0.5","$type":"ClientAuthenticationSuccessEvent"}

[23:36:06 Debug] IdentityServer4.Validation.TokenRequestValidator
Start token request validation

[23:36:06 Debug] IdentityServer4.Validation.TokenRequestValidator
Start validation of authorization code token request

[23:36:06 Debug] IdentityServer4.Validation.TokenRequestValidator
Client required a proof key for code exchange. Starting PKCE validation

[23:36:06 Information] Microsoft.EntityFrameworkCore.Infrastructure
Entity Framework Core 5.0.8 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None

[23:36:06 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0

[23:36:06 Debug] IdentityServer4.Validation.TokenRequestValidator
Validation of authorization code token request success

[23:36:06 Information] IdentityServer4.Validation.TokenRequestValidator
Token request validation success, {"ClientId":"Starter.Bff","ClientName":null,"GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****89F6","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"Starter.Bff","client_secret":"***REDACTED***","code":"6E906D96052048E6C8B9FE58B876259B497440732D9EE4BBC03026C67E6A89F6","grant_type":"authorization_code","redirect_uri":"https://localhost/signin-oidc","code_verifier":"IFVXBpoUIVuscdNRADo3OBrUPkZBSxHkMW6-Fu1bKbI"},"$type":"TokenRequestValidationLog"}

[23:36:06 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:36:06 Debug] IdentityServer4.Services.DefaultClaimsService
Getting claims for access token for client: Starter.Bff

[23:36:06 Debug] IdentityServer4.Services.DefaultClaimsService
Getting claims for access token for subject: 4

[23:36:06 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0

[23:36:06 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0

[23:36:06 Debug] IdentityServer4.Services.DefaultRefreshTokenService
Creating refresh token

[23:36:06 Debug] IdentityServer4.Services.DefaultRefreshTokenService
Setting an absolute lifetime: 2592000

[23:36:06 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:36:06 Debug] IdentityServer4.Services.DefaultClaimsService
Getting claims for identity token for subject: 4 and client: Starter.Bff

[23:36:06 Debug] IdentityServer4.Services.DefaultClaimsService
In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.

[23:36:06 Information] IdentityServer4.Events.DefaultEventService
{"ClientId":"Starter.Bff","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4","Scopes":"openid profile Starter.Api offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****esyQ","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****F127","$type":"Token"},{"TokenType":"access_token","TokenValue":"****1OBA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMLP7IIHD88F:00000002","TimeStamp":"2022-10-28T23:36:06.0000000Z","ProcessId":149,"LocalIpAddress":"172.18.0.4:5006","RemoteIpAddress":"172.18.0.5","$type":"TokenIssuedSuccessEvent"}

[23:36:06 Debug] IdentityServer4.Endpoints.TokenEndpoint
Token request success.

[23:36:06 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.1 POST http://idp:5006/connect/token application/x-www-form-urlencoded 251 - 200 - application/json;+charset=UTF-8 57.8366ms

[23:36:06 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.1 GET http://idp:5006/connect/userinfo - -

[23:36:06 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:36:06 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:36:06 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /connect/userinfo matched to endpoint type Userinfo

[23:36:06 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint

[23:36:06 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo

[23:36:06 Debug] IdentityServer4.Endpoints.UserInfoEndpoint
Start userinfo request

[23:36:06 Debug] IdentityServer4.Validation.BearerTokenUsageValidator
Bearer token found in header

[23:36:06 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:36:06 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:36:06 Information] Microsoft.EntityFrameworkCore.Infrastructure
Entity Framework Core 5.0.8 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None

[23:36:06 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0

[23:36:06 Debug] IdentityServer4.Validation.TokenValidator
Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator

[23:36:06 Debug] IdentityServer4.Validation.TokenValidator
Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"76A3E3710A2446D72BDE55B6CF193265","Claims":{"nbf":1667000166,"exp":1667003766,"iss":"https://localhost","aud":["starter.api","https://localhost/resources"],"client_id":"Starter.Bff","sub":"4","auth_time":1667000166,"idp":"local","jti":"76A3E3710A2446D72BDE55B6CF193265","sid":"A84751184C15086FE88B22D756A521D2","iat":1667000166,"scope":["openid","profile","Starter.Api","offline_access"],"amr":"pwd"},"$type":"TokenValidationLog"}

[23:36:06 Debug] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Creating userinfo response

[23:36:06 Debug] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Scopes in access token: openid profile Starter.Api offline_access

[23:36:06 Debug] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at

[23:36:06 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0

[23:36:06 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0

[23:36:06 Information] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Profile service returned the following claim types: sub website family_name given_name name preferred_username

[23:36:06 Debug] IdentityServer4.Endpoints.UserInfoEndpoint
End userinfo request

[23:36:06 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.1 GET http://idp:5006/connect/userinfo - - - 200 - application/json;+charset=UTF-8 43.7873ms

[23:36:06 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.1 GET http://idp:5006/connect/userinfo - -

[23:36:06 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:36:06 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:36:06 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /connect/userinfo matched to endpoint type Userinfo

[23:36:06 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint

[23:36:06 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo

[23:36:06 Debug] IdentityServer4.Endpoints.UserInfoEndpoint
Start userinfo request

[23:36:06 Debug] IdentityServer4.Validation.BearerTokenUsageValidator
Bearer token found in header

[23:36:06 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:36:06 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:36:06 Information] Microsoft.EntityFrameworkCore.Infrastructure
Entity Framework Core 5.0.8 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None

[23:36:06 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0

[23:36:06 Debug] IdentityServer4.Validation.TokenValidator
Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator

[23:36:06 Debug] IdentityServer4.Validation.TokenValidator
Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"76A3E3710A2446D72BDE55B6CF193265","Claims":{"nbf":1667000166,"exp":1667003766,"iss":"https://localhost","aud":["starter.api","https://localhost/resources"],"client_id":"Starter.Bff","sub":"4","auth_time":1667000166,"idp":"local","jti":"76A3E3710A2446D72BDE55B6CF193265","sid":"A84751184C15086FE88B22D756A521D2","iat":1667000166,"scope":["openid","profile","Starter.Api","offline_access"],"amr":"pwd"},"$type":"TokenValidationLog"}

[23:36:06 Debug] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Creating userinfo response

[23:36:06 Debug] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Scopes in access token: openid profile Starter.Api offline_access

[23:36:06 Debug] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at

[23:36:06 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0

[23:36:06 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0

[23:36:06 Information] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Profile service returned the following claim types: sub website family_name given_name name preferred_username

[23:36:06 Debug] IdentityServer4.Endpoints.UserInfoEndpoint
End userinfo request

[23:36:06 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.1 GET http://idp:5006/connect/userinfo - - - 200 - application/json;+charset=UTF-8 86.1467ms

[23:39:06 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/connect/authorize?client_id=Starter.Bff&redirect_uri=https%3A%2F%2Flocalhost%2Fsignin-oidc&response_type=code&scope=openid%20profile%20Starter.Api%20offline_access&code_challenge=rrqmMhvhZ8xtS97U8Yxwkz17EERPC_ESr7ntHcoHbtU&code_challenge_method=S256&response_mode=form_post&nonce=638025971464667525.YzI1N2UwMGUtNGI4NC00NWQwLTgwZmYtOGU3NTMyMzhmNzQ1ZDgyYzVhNTMtYjJjNi00Nzc5LTg0OGMtNzY5MjRiYWNhYjc0&state=CfDJ8NlCXmldZLBHsAViIel-sLzj7AF1zGwaJTWkId3ZK2rDsgxfYSWtU7azgPrjhVyj6_zrCUFaHF8Y9HJi-YS-Pfu0tdllSDEhQj3K7E3-M-e9ewwl97moOc_OQynCwK-dkpj8Obxy4VNOvXxWejqXP3wPpdSjNcmQuL2HRH9mwEVdcwAHv3W0jErQRrm75gNAkBECZcj2JK14RLFSKR2lSWKZ8haqWatZhuCX5obcVS_PqqUore3IQ1d0tFMHDn42Ecj8br3TkEc_sKtZoOGjuuxoWGKE49rn93bvMSjH7kAxeLhubP5PVIaeModnTjRmMOUj20XlJXcXQY0PkH7yXOqyrv7kRMay8uR-b6VQi0VkSKooL7j2p7RHDJRR5O0NUzD1MGJz_ZHUlqXXudZjILU&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.7.1.0 - -

[23:39:06 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService
CORS policy execution successful.

[23:39:06 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware
No CORS policy found for the specified request.

[23:39:06 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:39:06 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:39:06 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /connect/authorize matched to endpoint type Authorize

[23:39:06 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint

[23:39:06 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize

[23:39:06 Debug] IdentityServer4.Endpoints.AuthorizeEndpoint
Start authorize request

[23:39:06 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:39:06 Debug] IdentityServer4.Endpoints.AuthorizeEndpoint
No user present in authorize request

[23:39:06 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Start authorize request protocol validation

[23:39:06 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:39:06 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Checking for PKCE parameters

[23:39:06 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator

[23:39:06 Debug] IdentityServer4.Endpoints.AuthorizeEndpoint
ValidatedAuthorizeRequest
{"ClientId":"Starter.Bff","ClientName":null,"RedirectUri":"https://localhost/signin-oidc","AllowedRedirectUris":["https://localhost/signin-oidc","https://bff:5005/signin-oidc","https://localhost/loggedin"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile Starter.Api offline_access","State":"CfDJ8NlCXmldZLBHsAViIel-sLzj7AF1zGwaJTWkId3ZK2rDsgxfYSWtU7azgPrjhVyj6_zrCUFaHF8Y9HJi-YS-Pfu0tdllSDEhQj3K7E3-M-e9ewwl97moOc_OQynCwK-dkpj8Obxy4VNOvXxWejqXP3wPpdSjNcmQuL2HRH9mwEVdcwAHv3W0jErQRrm75gNAkBECZcj2JK14RLFSKR2lSWKZ8haqWatZhuCX5obcVS_PqqUore3IQ1d0tFMHDn42Ecj8br3TkEc_sKtZoOGjuuxoWGKE49rn93bvMSjH7kAxeLhubP5PVIaeModnTjRmMOUj20XlJXcXQY0PkH7yXOqyrv7kRMay8uR-b6VQi0VkSKooL7j2p7RHDJRR5O0NUzD1MGJz_ZHUlqXXudZjILU","UiLocales":null,"Nonce":"638025971464667525.YzI1N2UwMGUtNGI4NC00NWQwLTgwZmYtOGU3NTMyMzhmNzQ1ZDgyYzVhNTMtYjJjNi00Nzc5LTg0OGMtNzY5MjRiYWNhYjc0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Starter.Bff","redirect_uri":"https://localhost/signin-oidc","response_type":"code","scope":"openid profile Starter.Api offline_access","code_challenge":"rrqmMhvhZ8xtS97U8Yxwkz17EERPC_ESr7ntHcoHbtU","code_challenge_method":"S256","response_mode":"form_post","nonce":"638025971464667525.YzI1N2UwMGUtNGI4NC00NWQwLTgwZmYtOGU3NTMyMzhmNzQ1ZDgyYzVhNTMtYjJjNi00Nzc5LTg0OGMtNzY5MjRiYWNhYjc0","state":"CfDJ8NlCXmldZLBHsAViIel-sLzj7AF1zGwaJTWkId3ZK2rDsgxfYSWtU7azgPrjhVyj6_zrCUFaHF8Y9HJi-YS-Pfu0tdllSDEhQj3K7E3-M-e9ewwl97moOc_OQynCwK-dkpj8Obxy4VNOvXxWejqXP3wPpdSjNcmQuL2HRH9mwEVdcwAHv3W0jErQRrm75gNAkBECZcj2JK14RLFSKR2lSWKZ8haqWatZhuCX5obcVS_PqqUore3IQ1d0tFMHDn42Ecj8br3TkEc_sKtZoOGjuuxoWGKE49rn93bvMSjH7kAxeLhubP5PVIaeModnTjRmMOUj20XlJXcXQY0PkH7yXOqyrv7kRMay8uR-b6VQi0VkSKooL7j2p7RHDJRR5O0NUzD1MGJz_ZHUlqXXudZjILU","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}

[23:39:06 Information] IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator
Showing login: User is not authenticated

[23:39:06 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/connect/authorize?client_id=Starter.Bff&redirect_uri=https%3A%2F%2Flocalhost%2Fsignin-oidc&response_type=code&scope=openid%20profile%20Starter.Api%20offline_access&code_challenge=rrqmMhvhZ8xtS97U8Yxwkz17EERPC_ESr7ntHcoHbtU&code_challenge_method=S256&response_mode=form_post&nonce=638025971464667525.YzI1N2UwMGUtNGI4NC00NWQwLTgwZmYtOGU3NTMyMzhmNzQ1ZDgyYzVhNTMtYjJjNi00Nzc5LTg0OGMtNzY5MjRiYWNhYjc0&state=CfDJ8NlCXmldZLBHsAViIel-sLzj7AF1zGwaJTWkId3ZK2rDsgxfYSWtU7azgPrjhVyj6_zrCUFaHF8Y9HJi-YS-Pfu0tdllSDEhQj3K7E3-M-e9ewwl97moOc_OQynCwK-dkpj8Obxy4VNOvXxWejqXP3wPpdSjNcmQuL2HRH9mwEVdcwAHv3W0jErQRrm75gNAkBECZcj2JK14RLFSKR2lSWKZ8haqWatZhuCX5obcVS_PqqUore3IQ1d0tFMHDn42Ecj8br3TkEc_sKtZoOGjuuxoWGKE49rn93bvMSjH7kAxeLhubP5PVIaeModnTjRmMOUj20XlJXcXQY0PkH7yXOqyrv7kRMay8uR-b6VQi0VkSKooL7j2p7RHDJRR5O0NUzD1MGJz_ZHUlqXXudZjILU&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.7.1.0 - - - 302 0 - 14.1755ms

[23:39:06 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3DStarter.Bff%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520Starter.Api%2520offline_access%26code_challenge%3DrrqmMhvhZ8xtS97U8Yxwkz17EERPC_ESr7ntHcoHbtU%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D638025971464667525.YzI1N2UwMGUtNGI4NC00NWQwLTgwZmYtOGU3NTMyMzhmNzQ1ZDgyYzVhNTMtYjJjNi00Nzc5LTg0OGMtNzY5MjRiYWNhYjc0%26state%3DCfDJ8NlCXmldZLBHsAViIel-sLzj7AF1zGwaJTWkId3ZK2rDsgxfYSWtU7azgPrjhVyj6_zrCUFaHF8Y9HJi-YS-Pfu0tdllSDEhQj3K7E3-M-e9ewwl97moOc_OQynCwK-dkpj8Obxy4VNOvXxWejqXP3wPpdSjNcmQuL2HRH9mwEVdcwAHv3W0jErQRrm75gNAkBECZcj2JK14RLFSKR2lSWKZ8haqWatZhuCX5obcVS_PqqUore3IQ1d0tFMHDn42Ecj8br3TkEc_sKtZoOGjuuxoWGKE49rn93bvMSjH7kAxeLhubP5PVIaeModnTjRmMOUj20XlJXcXQY0PkH7yXOqyrv7kRMay8uR-b6VQi0VkSKooL7j2p7RHDJRR5O0NUzD1MGJz_ZHUlqXXudZjILU%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.7.1.0 - -

[23:39:06 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService
CORS policy execution successful.

[23:39:06 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware
No CORS policy found for the specified request.

[23:39:06 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:39:06 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:39:06 Information] Microsoft.AspNetCore.Routing.EndpointMiddleware
Executing endpoint 'Starter.Idp.Controllers.Account.AccountController.Login (IDP)'

[23:39:06 Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker
Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller Starter.Idp.Controllers.Account.AccountController (IDP).

[23:39:06 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:39:06 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Start authorize request protocol validation

[23:39:06 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:39:06 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Checking for PKCE parameters

[23:39:06 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator

[23:39:06 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:39:06 Information] Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor
Executing ViewResult, running view Login.

[23:39:06 Information] Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor
Executed ViewResult - view Login executed in 10.9356ms.

[23:39:06 Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker
Executed action Starter.Idp.Controllers.Account.AccountController.Login (IDP) in 39.1091ms

[23:39:06 Information] Microsoft.AspNetCore.Routing.EndpointMiddleware
Executed endpoint 'Starter.Idp.Controllers.Account.AccountController.Login (IDP)'

[23:39:06 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3DStarter.Bff%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520Starter.Api%2520offline_access%26code_challenge%3DrrqmMhvhZ8xtS97U8Yxwkz17EERPC_ESr7ntHcoHbtU%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D638025971464667525.YzI1N2UwMGUtNGI4NC00NWQwLTgwZmYtOGU3NTMyMzhmNzQ1ZDgyYzVhNTMtYjJjNi00Nzc5LTg0OGMtNzY5MjRiYWNhYjc0%26state%3DCfDJ8NlCXmldZLBHsAViIel-sLzj7AF1zGwaJTWkId3ZK2rDsgxfYSWtU7azgPrjhVyj6_zrCUFaHF8Y9HJi-YS-Pfu0tdllSDEhQj3K7E3-M-e9ewwl97moOc_OQynCwK-dkpj8Obxy4VNOvXxWejqXP3wPpdSjNcmQuL2HRH9mwEVdcwAHv3W0jErQRrm75gNAkBECZcj2JK14RLFSKR2lSWKZ8haqWatZhuCX5obcVS_PqqUore3IQ1d0tFMHDn42Ecj8br3TkEc_sKtZoOGjuuxoWGKE49rn93bvMSjH7kAxeLhubP5PVIaeModnTjRmMOUj20XlJXcXQY0PkH7yXOqyrv7kRMay8uR-b6VQi0VkSKooL7j2p7RHDJRR5O0NUzD1MGJz_ZHUlqXXudZjILU%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.7.1.0 - - - 200 - text/html;+charset=utf-8 54.6184ms

[23:39:06 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/css/site.css - -

[23:39:06 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/lib/bootstrap/dist/css/bootstrap.min.css - -

[23:39:06 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/lib/bootstrap/dist/js/bootstrap.bundle.min.js - -

[23:39:06 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/css/site.css'. Physical path: '/app/wwwroot/css/site.css'

[23:39:06 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/lib/jquery/dist/jquery.slim.min.js - -

[23:39:06 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/css/site.css - - - 200 497 text/css 23.6720ms

[23:39:06 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css'. Physical path: '/app/wwwroot/lib/bootstrap/dist/css/bootstrap.min.css'

[23:39:06 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/lib/bootstrap/dist/css/bootstrap.min.css - - - 200 159515 text/css 34.3792ms

[23:39:06 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js'. Physical path: '/app/wwwroot/lib/bootstrap/dist/js/bootstrap.bundle.min.js'

[23:39:06 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/lib/bootstrap/dist/js/bootstrap.bundle.min.js - - - 200 80698 application/javascript 20.4700ms

[23:39:06 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/lib/jquery/dist/jquery.slim.min.js'. Physical path: '/app/wwwroot/lib/jquery/dist/jquery.slim.min.js'

[23:39:06 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/lib/jquery/dist/jquery.slim.min.js - - - 200 72397 application/javascript 21.8248ms

[23:39:06 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/lib/bootstrap/dist/css/bootstrap.min.css.map - -

[23:39:06 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - -

[23:39:06 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map'. Physical path: '/app/wwwroot/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map'

[23:39:06 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - - - 200 318045 text/plain 20.9901ms

[23:39:06 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css.map'. Physical path: '/app/wwwroot/lib/bootstrap/dist/css/bootstrap.min.css.map'

[23:39:06 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/lib/bootstrap/dist/css/bootstrap.min.css.map - - - 200 641867 text/plain 53.4345ms

[23:39:13 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 POST https://localhost/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3DStarter.Bff%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520Starter.Api%2520offline_access%26code_challenge%3DrrqmMhvhZ8xtS97U8Yxwkz17EERPC_ESr7ntHcoHbtU%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D638025971464667525.YzI1N2UwMGUtNGI4NC00NWQwLTgwZmYtOGU3NTMyMzhmNzQ1ZDgyYzVhNTMtYjJjNi00Nzc5LTg0OGMtNzY5MjRiYWNhYjc0%26state%3DCfDJ8NlCXmldZLBHsAViIel-sLzj7AF1zGwaJTWkId3ZK2rDsgxfYSWtU7azgPrjhVyj6_zrCUFaHF8Y9HJi-YS-Pfu0tdllSDEhQj3K7E3-M-e9ewwl97moOc_OQynCwK-dkpj8Obxy4VNOvXxWejqXP3wPpdSjNcmQuL2HRH9mwEVdcwAHv3W0jErQRrm75gNAkBECZcj2JK14RLFSKR2lSWKZ8haqWatZhuCX5obcVS_PqqUore3IQ1d0tFMHDn42Ecj8br3TkEc_sKtZoOGjuuxoWGKE49rn93bvMSjH7kAxeLhubP5PVIaeModnTjRmMOUj20XlJXcXQY0PkH7yXOqyrv7kRMay8uR-b6VQi0VkSKooL7j2p7RHDJRR5O0NUzD1MGJz_ZHUlqXXudZjILU%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.7.1.0 application/x-www-form-urlencoded 1198

[23:39:13 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService
CORS policy execution successful.

[23:39:13 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware
No CORS policy found for the specified request.

[23:39:13 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:39:13 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:39:13 Information] Microsoft.AspNetCore.Routing.EndpointMiddleware
Executing endpoint 'Starter.Idp.Controllers.Account.AccountController.Login (IDP)'

[23:39:13 Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker
Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Starter.Idp.Models.Account.LoginInputModel, System.String) on controller Starter.Idp.Controllers.Account.AccountController (IDP).

[23:39:13 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:39:13 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Start authorize request protocol validation

[23:39:13 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:39:13 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Checking for PKCE parameters

[23:39:13 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator

[23:39:13 Information] Microsoft.EntityFrameworkCore.Infrastructure
Entity Framework Core 5.0.8 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None

[23:39:13 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0

[23:39:13 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0

[23:39:13 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0

[23:39:13 Debug] IdentityServer4.Hosting.IdentityServerAuthenticationService
Augmenting SignInContext

[23:39:13 Debug] IdentityServer4.Hosting.IdentityServerAuthenticationService
Adding idp claim with value: local

[23:39:13 Debug] IdentityServer4.Hosting.IdentityServerAuthenticationService
Adding auth_time claim with value: 1667000353

[23:39:13 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:39:13 Information] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application signed in.

[23:39:13 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0

[23:39:13 Information] IdentityServer4.Events.DefaultEventService
{"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"4","DisplayName":"bob","Endpoint":"UI","ClientId":"Starter.Bff","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMLP7IIHD88P:00000002","TimeStamp":"2022-10-28T23:39:13.0000000Z","ProcessId":149,"LocalIpAddress":"172.18.0.4:5007","RemoteIpAddress":"172.18.0.1","$type":"UserLoginSuccessEvent"}

[23:39:13 Information] Microsoft.AspNetCore.Mvc.Infrastructure.RedirectResultExecutor
Executing RedirectResult, redirecting to /connect/authorize/callback?client_id=Starter.Bff&redirect_uri=https%3A%2F%2Flocalhost%2Fsignin-oidc&response_type=code&scope=openid%20profile%20Starter.Api%20offline_access&code_challenge=rrqmMhvhZ8xtS97U8Yxwkz17EERPC_ESr7ntHcoHbtU&code_challenge_method=S256&response_mode=form_post&nonce=638025971464667525.YzI1N2UwMGUtNGI4NC00NWQwLTgwZmYtOGU3NTMyMzhmNzQ1ZDgyYzVhNTMtYjJjNi00Nzc5LTg0OGMtNzY5MjRiYWNhYjc0&state=CfDJ8NlCXmldZLBHsAViIel-sLzj7AF1zGwaJTWkId3ZK2rDsgxfYSWtU7azgPrjhVyj6_zrCUFaHF8Y9HJi-YS-Pfu0tdllSDEhQj3K7E3-M-e9ewwl97moOc_OQynCwK-dkpj8Obxy4VNOvXxWejqXP3wPpdSjNcmQuL2HRH9mwEVdcwAHv3W0jErQRrm75gNAkBECZcj2JK14RLFSKR2lSWKZ8haqWatZhuCX5obcVS_PqqUore3IQ1d0tFMHDn42Ecj8br3TkEc_sKtZoOGjuuxoWGKE49rn93bvMSjH7kAxeLhubP5PVIaeModnTjRmMOUj20XlJXcXQY0PkH7yXOqyrv7kRMay8uR-b6VQi0VkSKooL7j2p7RHDJRR5O0NUzD1MGJz_ZHUlqXXudZjILU&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.7.1.0.

[23:39:13 Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker
Executed action Starter.Idp.Controllers.Account.AccountController.Login (IDP) in 33.7757ms

[23:39:13 Information] Microsoft.AspNetCore.Routing.EndpointMiddleware
Executed endpoint 'Starter.Idp.Controllers.Account.AccountController.Login (IDP)'

[23:39:13 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 POST https://localhost/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3DStarter.Bff%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520Starter.Api%2520offline_access%26code_challenge%3DrrqmMhvhZ8xtS97U8Yxwkz17EERPC_ESr7ntHcoHbtU%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D638025971464667525.YzI1N2UwMGUtNGI4NC00NWQwLTgwZmYtOGU3NTMyMzhmNzQ1ZDgyYzVhNTMtYjJjNi00Nzc5LTg0OGMtNzY5MjRiYWNhYjc0%26state%3DCfDJ8NlCXmldZLBHsAViIel-sLzj7AF1zGwaJTWkId3ZK2rDsgxfYSWtU7azgPrjhVyj6_zrCUFaHF8Y9HJi-YS-Pfu0tdllSDEhQj3K7E3-M-e9ewwl97moOc_OQynCwK-dkpj8Obxy4VNOvXxWejqXP3wPpdSjNcmQuL2HRH9mwEVdcwAHv3W0jErQRrm75gNAkBECZcj2JK14RLFSKR2lSWKZ8haqWatZhuCX5obcVS_PqqUore3IQ1d0tFMHDn42Ecj8br3TkEc_sKtZoOGjuuxoWGKE49rn93bvMSjH7kAxeLhubP5PVIaeModnTjRmMOUj20XlJXcXQY0PkH7yXOqyrv7kRMay8uR-b6VQi0VkSKooL7j2p7RHDJRR5O0NUzD1MGJz_ZHUlqXXudZjILU%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.7.1.0 application/x-www-form-urlencoded 1198 - 302 0 - 40.9980ms

[23:39:13 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/connect/authorize/callback?client_id=Starter.Bff&redirect_uri=https%3A%2F%2Flocalhost%2Fsignin-oidc&response_type=code&scope=openid%20profile%20Starter.Api%20offline_access&code_challenge=rrqmMhvhZ8xtS97U8Yxwkz17EERPC_ESr7ntHcoHbtU&code_challenge_method=S256&response_mode=form_post&nonce=638025971464667525.YzI1N2UwMGUtNGI4NC00NWQwLTgwZmYtOGU3NTMyMzhmNzQ1ZDgyYzVhNTMtYjJjNi00Nzc5LTg0OGMtNzY5MjRiYWNhYjc0&state=CfDJ8NlCXmldZLBHsAViIel-sLzj7AF1zGwaJTWkId3ZK2rDsgxfYSWtU7azgPrjhVyj6_zrCUFaHF8Y9HJi-YS-Pfu0tdllSDEhQj3K7E3-M-e9ewwl97moOc_OQynCwK-dkpj8Obxy4VNOvXxWejqXP3wPpdSjNcmQuL2HRH9mwEVdcwAHv3W0jErQRrm75gNAkBECZcj2JK14RLFSKR2lSWKZ8haqWatZhuCX5obcVS_PqqUore3IQ1d0tFMHDn42Ecj8br3TkEc_sKtZoOGjuuxoWGKE49rn93bvMSjH7kAxeLhubP5PVIaeModnTjRmMOUj20XlJXcXQY0PkH7yXOqyrv7kRMay8uR-b6VQi0VkSKooL7j2p7RHDJRR5O0NUzD1MGJz_ZHUlqXXudZjILU&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.7.1.0 - -

[23:39:13 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService
CORS policy execution successful.

[23:39:13 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware
No CORS policy found for the specified request.

[23:39:13 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was successfully authenticated.

[23:39:13 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was successfully authenticated.

[23:39:13 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /connect/authorize/callback matched to endpoint type Authorize

[23:39:13 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint

[23:39:13 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback

[23:39:13 Debug] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
Start authorize callback request

[23:39:13 Debug] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
User in authorize request: 4

[23:39:13 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Start authorize request protocol validation

[23:39:13 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:39:13 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Checking for PKCE parameters

[23:39:13 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator

[23:39:13 Debug] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
ValidatedAuthorizeRequest
{"ClientId":"Starter.Bff","ClientName":null,"RedirectUri":"https://localhost/signin-oidc","AllowedRedirectUris":["https://localhost/signin-oidc","https://bff:5005/signin-oidc","https://localhost/loggedin"],"SubjectId":"4","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile Starter.Api offline_access","State":"CfDJ8NlCXmldZLBHsAViIel-sLzj7AF1zGwaJTWkId3ZK2rDsgxfYSWtU7azgPrjhVyj6_zrCUFaHF8Y9HJi-YS-Pfu0tdllSDEhQj3K7E3-M-e9ewwl97moOc_OQynCwK-dkpj8Obxy4VNOvXxWejqXP3wPpdSjNcmQuL2HRH9mwEVdcwAHv3W0jErQRrm75gNAkBECZcj2JK14RLFSKR2lSWKZ8haqWatZhuCX5obcVS_PqqUore3IQ1d0tFMHDn42Ecj8br3TkEc_sKtZoOGjuuxoWGKE49rn93bvMSjH7kAxeLhubP5PVIaeModnTjRmMOUj20XlJXcXQY0PkH7yXOqyrv7kRMay8uR-b6VQi0VkSKooL7j2p7RHDJRR5O0NUzD1MGJz_ZHUlqXXudZjILU","UiLocales":null,"Nonce":"638025971464667525.YzI1N2UwMGUtNGI4NC00NWQwLTgwZmYtOGU3NTMyMzhmNzQ1ZDgyYzVhNTMtYjJjNi00Nzc5LTg0OGMtNzY5MjRiYWNhYjc0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"7625EA1B2EDFEDFFA90FC88FEF34E0E9","Raw":{"client_id":"Starter.Bff","redirect_uri":"https://localhost/signin-oidc","response_type":"code","scope":"openid profile Starter.Api offline_access","code_challenge":"rrqmMhvhZ8xtS97U8Yxwkz17EERPC_ESr7ntHcoHbtU","code_challenge_method":"S256","response_mode":"form_post","nonce":"638025971464667525.YzI1N2UwMGUtNGI4NC00NWQwLTgwZmYtOGU3NTMyMzhmNzQ1ZDgyYzVhNTMtYjJjNi00Nzc5LTg0OGMtNzY5MjRiYWNhYjc0","state":"CfDJ8NlCXmldZLBHsAViIel-sLzj7AF1zGwaJTWkId3ZK2rDsgxfYSWtU7azgPrjhVyj6_zrCUFaHF8Y9HJi-YS-Pfu0tdllSDEhQj3K7E3-M-e9ewwl97moOc_OQynCwK-dkpj8Obxy4VNOvXxWejqXP3wPpdSjNcmQuL2HRH9mwEVdcwAHv3W0jErQRrm75gNAkBECZcj2JK14RLFSKR2lSWKZ8haqWatZhuCX5obcVS_PqqUore3IQ1d0tFMHDn42Ecj8br3TkEc_sKtZoOGjuuxoWGKE49rn93bvMSjH7kAxeLhubP5PVIaeModnTjRmMOUj20XlJXcXQY0PkH7yXOqyrv7kRMay8uR-b6VQi0VkSKooL7j2p7RHDJRR5O0NUzD1MGJz_ZHUlqXXudZjILU","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}

[23:39:13 Information] Microsoft.EntityFrameworkCore.Infrastructure
Entity Framework Core 5.0.8 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None

[23:39:13 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0

[23:39:13 Debug] IdentityServer4.Services.DefaultConsentService
Client is configured to not require consent, no consent is required

[23:39:13 Debug] IdentityServer4.ResponseHandling.AuthorizeResponseGenerator
Creating Authorization Code Flow response.

[23:39:13 Information] IdentityServer4.Events.DefaultEventService
{"ClientId":"Starter.Bff","ClientName":null,"RedirectUri":"https://localhost/signin-oidc","Endpoint":"Authorize","SubjectId":"4","Scopes":"openid profile Starter.Api offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****DEA5","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMLP7IIHD88Q:00000002","TimeStamp":"2022-10-28T23:39:13.0000000Z","ProcessId":149,"LocalIpAddress":"172.18.0.4:5007","RemoteIpAddress":"172.18.0.1","$type":"TokenIssuedSuccessEvent"}

[23:39:13 Debug] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
Authorize endpoint response
{"SubjectId":"4","ClientId":"Starter.Bff","RedirectUri":"https://localhost/signin-oidc","State":"CfDJ8NlCXmldZLBHsAViIel-sLzj7AF1zGwaJTWkId3ZK2rDsgxfYSWtU7azgPrjhVyj6_zrCUFaHF8Y9HJi-YS-Pfu0tdllSDEhQj3K7E3-M-e9ewwl97moOc_OQynCwK-dkpj8Obxy4VNOvXxWejqXP3wPpdSjNcmQuL2HRH9mwEVdcwAHv3W0jErQRrm75gNAkBECZcj2JK14RLFSKR2lSWKZ8haqWatZhuCX5obcVS_PqqUore3IQ1d0tFMHDn42Ecj8br3TkEc_sKtZoOGjuuxoWGKE49rn93bvMSjH7kAxeLhubP5PVIaeModnTjRmMOUj20XlJXcXQY0PkH7yXOqyrv7kRMay8uR-b6VQi0VkSKooL7j2p7RHDJRR5O0NUzD1MGJz_ZHUlqXXudZjILU","Scope":"openid profile Starter.Api offline_access","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}

[23:39:13 Debug] IdentityServer4.Hosting.IdentityServerAuthenticationService
Augmenting SignInContext

[23:39:13 Information] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application signed in.

[23:39:13 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/connect/authorize/callback?client_id=Starter.Bff&redirect_uri=https%3A%2F%2Flocalhost%2Fsignin-oidc&response_type=code&scope=openid%20profile%20Starter.Api%20offline_access&code_challenge=rrqmMhvhZ8xtS97U8Yxwkz17EERPC_ESr7ntHcoHbtU&code_challenge_method=S256&response_mode=form_post&nonce=638025971464667525.YzI1N2UwMGUtNGI4NC00NWQwLTgwZmYtOGU3NTMyMzhmNzQ1ZDgyYzVhNTMtYjJjNi00Nzc5LTg0OGMtNzY5MjRiYWNhYjc0&state=CfDJ8NlCXmldZLBHsAViIel-sLzj7AF1zGwaJTWkId3ZK2rDsgxfYSWtU7azgPrjhVyj6_zrCUFaHF8Y9HJi-YS-Pfu0tdllSDEhQj3K7E3-M-e9ewwl97moOc_OQynCwK-dkpj8Obxy4VNOvXxWejqXP3wPpdSjNcmQuL2HRH9mwEVdcwAHv3W0jErQRrm75gNAkBECZcj2JK14RLFSKR2lSWKZ8haqWatZhuCX5obcVS_PqqUore3IQ1d0tFMHDn42Ecj8br3TkEc_sKtZoOGjuuxoWGKE49rn93bvMSjH7kAxeLhubP5PVIaeModnTjRmMOUj20XlJXcXQY0PkH7yXOqyrv7kRMay8uR-b6VQi0VkSKooL7j2p7RHDJRR5O0NUzD1MGJz_ZHUlqXXudZjILU&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.7.1.0 - - - 200 - text/html;+charset=UTF-8 49.6246ms

[23:39:13 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.1 POST http://idp:5006/connect/token application/x-www-form-urlencoded 251

[23:39:13 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:39:13 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:39:13 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /connect/token matched to endpoint type Token

[23:39:13 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint

[23:39:13 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token

[23:39:13 Debug] IdentityServer4.Endpoints.TokenEndpoint
Start token request.

[23:39:13 Debug] IdentityServer4.Validation.ClientSecretValidator
Start client validation

[23:39:13 Debug] IdentityServer4.Validation.BasicAuthenticationSecretParser
Start parsing Basic Authentication secret

[23:39:13 Debug] IdentityServer4.Validation.PostBodySecretParser
Start parsing for secret in post body

[23:39:13 Debug] IdentityServer4.Validation.ISecretsListParser
Parser found secret: PostBodySecretParser

[23:39:13 Debug] IdentityServer4.Validation.ISecretsListParser
Secret id found: Starter.Bff

[23:39:13 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:39:13 Debug] IdentityServer4.Validation.ISecretsListValidator
Secret validator success: HashedSharedSecretValidator

[23:39:13 Debug] IdentityServer4.Validation.ClientSecretValidator
Client validation success

[23:39:13 Information] IdentityServer4.Events.DefaultEventService
{"ClientId":"Starter.Bff","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMLP7IIHD88R:00000002","TimeStamp":"2022-10-28T23:39:13.0000000Z","ProcessId":149,"LocalIpAddress":"172.18.0.4:5006","RemoteIpAddress":"172.18.0.5","$type":"ClientAuthenticationSuccessEvent"}

[23:39:13 Debug] IdentityServer4.Validation.TokenRequestValidator
Start token request validation

[23:39:13 Debug] IdentityServer4.Validation.TokenRequestValidator
Start validation of authorization code token request

[23:39:13 Debug] IdentityServer4.Validation.TokenRequestValidator
Client required a proof key for code exchange. Starting PKCE validation

[23:39:13 Information] Microsoft.EntityFrameworkCore.Infrastructure
Entity Framework Core 5.0.8 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None

[23:39:13 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0

[23:39:13 Debug] IdentityServer4.Validation.TokenRequestValidator
Validation of authorization code token request success

[23:39:13 Information] IdentityServer4.Validation.TokenRequestValidator
Token request validation success, {"ClientId":"Starter.Bff","ClientName":null,"GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****DEA5","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"Starter.Bff","client_secret":"***REDACTED***","code":"7A411F1EE4A4EBBF467593D00E5C30C5DD2B942DFBE0CDEAB5D1790CF70DDEA5","grant_type":"authorization_code","redirect_uri":"https://localhost/signin-oidc","code_verifier":"dp93ESDHoDXLOY50_JwZYG8y-6uvA0eo3IkMwzFR2PA"},"$type":"TokenRequestValidationLog"}

[23:39:13 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:39:13 Debug] IdentityServer4.Services.DefaultClaimsService
Getting claims for access token for client: Starter.Bff

[23:39:13 Debug] IdentityServer4.Services.DefaultClaimsService
Getting claims for access token for subject: 4

[23:39:13 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0

[23:39:13 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0

[23:39:13 Debug] IdentityServer4.Services.DefaultRefreshTokenService
Creating refresh token

[23:39:13 Debug] IdentityServer4.Services.DefaultRefreshTokenService
Setting an absolute lifetime: 2592000

[23:39:13 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:39:13 Debug] IdentityServer4.Services.DefaultClaimsService
Getting claims for identity token for subject: 4 and client: Starter.Bff

[23:39:13 Debug] IdentityServer4.Services.DefaultClaimsService
In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.

[23:39:13 Information] IdentityServer4.Events.DefaultEventService
{"ClientId":"Starter.Bff","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4","Scopes":"openid profile Starter.Api offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****QCDw","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****FB36","$type":"Token"},{"TokenType":"access_token","TokenValue":"****GFew","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMLP7IIHD88R:00000002","TimeStamp":"2022-10-28T23:39:13.0000000Z","ProcessId":149,"LocalIpAddress":"172.18.0.4:5006","RemoteIpAddress":"172.18.0.5","$type":"TokenIssuedSuccessEvent"}

[23:39:13 Debug] IdentityServer4.Endpoints.TokenEndpoint
Token request success.

[23:39:13 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.1 POST http://idp:5006/connect/token application/x-www-form-urlencoded 251 - 200 - application/json;+charset=UTF-8 72.0943ms

[23:39:13 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.1 GET http://idp:5006/connect/userinfo - -

[23:39:13 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:39:13 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:39:13 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /connect/userinfo matched to endpoint type Userinfo

[23:39:13 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint

[23:39:13 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo

[23:39:13 Debug] IdentityServer4.Endpoints.UserInfoEndpoint
Start userinfo request

[23:39:13 Debug] IdentityServer4.Validation.BearerTokenUsageValidator
Bearer token found in header

[23:39:13 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:39:13 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:39:13 Information] Microsoft.EntityFrameworkCore.Infrastructure
Entity Framework Core 5.0.8 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None

[23:39:13 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0

[23:39:13 Debug] IdentityServer4.Validation.TokenValidator
Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator

[23:39:13 Debug] IdentityServer4.Validation.TokenValidator
Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"38E73D34072E73DE42199273735B132E","Claims":{"nbf":1667000353,"exp":1667003953,"iss":"https://localhost","aud":["starter.api","https://localhost/resources"],"client_id":"Starter.Bff","sub":"4","auth_time":1667000353,"idp":"local","jti":"38E73D34072E73DE42199273735B132E","sid":"7625EA1B2EDFEDFFA90FC88FEF34E0E9","iat":1667000353,"scope":["openid","profile","Starter.Api","offline_access"],"amr":"pwd"},"$type":"TokenValidationLog"}

[23:39:13 Debug] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Creating userinfo response

[23:39:13 Debug] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Scopes in access token: openid profile Starter.Api offline_access

[23:39:13 Debug] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at

[23:39:13 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0

[23:39:13 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0

[23:39:13 Information] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Profile service returned the following claim types: sub website family_name given_name name preferred_username

[23:39:13 Debug] IdentityServer4.Endpoints.UserInfoEndpoint
End userinfo request

[23:39:13 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.1 GET http://idp:5006/connect/userinfo - - - 200 - application/json;+charset=UTF-8 51.3782ms

[23:39:13 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.1 GET http://idp:5006/connect/userinfo - -

[23:39:13 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:39:13 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:39:13 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /connect/userinfo matched to endpoint type Userinfo

[23:39:13 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint

[23:39:13 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo

[23:39:13 Debug] IdentityServer4.Endpoints.UserInfoEndpoint
Start userinfo request

[23:39:13 Debug] IdentityServer4.Validation.BearerTokenUsageValidator
Bearer token found in header

[23:39:13 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:39:13 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:39:13 Information] Microsoft.EntityFrameworkCore.Infrastructure
Entity Framework Core 5.0.8 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None

[23:39:13 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0

[23:39:13 Debug] IdentityServer4.Validation.TokenValidator
Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator

[23:39:13 Debug] IdentityServer4.Validation.TokenValidator
Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"38E73D34072E73DE42199273735B132E","Claims":{"nbf":1667000353,"exp":1667003953,"iss":"https://localhost","aud":["starter.api","https://localhost/resources"],"client_id":"Starter.Bff","sub":"4","auth_time":1667000353,"idp":"local","jti":"38E73D34072E73DE42199273735B132E","sid":"7625EA1B2EDFEDFFA90FC88FEF34E0E9","iat":1667000353,"scope":["openid","profile","Starter.Api","offline_access"],"amr":"pwd"},"$type":"TokenValidationLog"}

[23:39:13 Debug] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Creating userinfo response

[23:39:13 Debug] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Scopes in access token: openid profile Starter.Api offline_access

[23:39:13 Debug] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at

[23:39:13 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (13ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0

[23:39:13 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0

[23:39:13 Information] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Profile service returned the following claim types: sub website family_name given_name name preferred_username

[23:39:13 Debug] IdentityServer4.Endpoints.UserInfoEndpoint
End userinfo request

[23:39:13 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.1 GET http://idp:5006/connect/userinfo - - - 200 - application/json;+charset=UTF-8 37.2896ms

[23:41:57 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/connect/authorize?client_id=Starter.Bff&redirect_uri=https%3A%2F%2Flocalhost%2Fsignin-oidc&response_type=code&scope=openid%20profile%20Starter.Api%20offline_access&code_challenge=Sbtay7zVwm8CorclSERytvJ0SBK5plzI67prtzr9bo8&code_challenge_method=S256&response_mode=form_post&nonce=638025973172784571.Y2JkOWZkMjUtZWRiNi00ZTQ1LTk4YzgtYjk0N2ZlZDAxNWZmYjdhZWViNDAtNDc5Yy00ZjMzLWE5MTctMDk0MmM3MzVhYjBi&state=CfDJ8NlCXmldZLBHsAViIel-sLydIJMJsl-wFm3MdvOtTlPp8CE1MX4MA0A_L3-MZ5kFRg3DnGfOPfD-XxLVe7_kZuh1zLeqXvTeGTV37LQZrK6IuPwjPUxye33EEA3yEPe9JPt3VTEtKs3JP6ow1oLRIZnDxfsGateL-cdn_7hHc7wyXcMQuo9mdlWkoTJ86MfKSpKjF0ZswdFkl8BPio8EJIImA9sbu6QflgfyAvaXmHTd9bdYXPXcS1gosFW-QpNJ5C-JxfuuN_NdD7RL2_ZAILVBK9YQeftTRCD4Vsu4cx26KbY8e-c81hi9yARA-JgvC2VbgKxXCWsnJfKM2ClKVqmtGCI6G8Y5Awy6g2TlVC1JG8t7iLrOfW1Yxi37VN9yYdE_bBGxq0SYQP5da3klaB0&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.7.1.0 - -

[23:41:57 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService
CORS policy execution successful.

[23:41:57 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware
No CORS policy found for the specified request.

[23:41:57 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:41:57 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:41:57 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /connect/authorize matched to endpoint type Authorize

[23:41:57 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint

[23:41:57 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize

[23:41:57 Debug] IdentityServer4.Endpoints.AuthorizeEndpoint
Start authorize request

[23:41:57 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:41:57 Debug] IdentityServer4.Endpoints.AuthorizeEndpoint
No user present in authorize request

[23:41:57 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Start authorize request protocol validation

[23:41:57 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:41:57 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Checking for PKCE parameters

[23:41:57 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator

[23:41:57 Debug] IdentityServer4.Endpoints.AuthorizeEndpoint
ValidatedAuthorizeRequest
{"ClientId":"Starter.Bff","ClientName":null,"RedirectUri":"https://localhost/signin-oidc","AllowedRedirectUris":["https://localhost/signin-oidc","https://bff:5005/signin-oidc","https://localhost/loggedin"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile Starter.Api offline_access","State":"CfDJ8NlCXmldZLBHsAViIel-sLydIJMJsl-wFm3MdvOtTlPp8CE1MX4MA0A_L3-MZ5kFRg3DnGfOPfD-XxLVe7_kZuh1zLeqXvTeGTV37LQZrK6IuPwjPUxye33EEA3yEPe9JPt3VTEtKs3JP6ow1oLRIZnDxfsGateL-cdn_7hHc7wyXcMQuo9mdlWkoTJ86MfKSpKjF0ZswdFkl8BPio8EJIImA9sbu6QflgfyAvaXmHTd9bdYXPXcS1gosFW-QpNJ5C-JxfuuN_NdD7RL2_ZAILVBK9YQeftTRCD4Vsu4cx26KbY8e-c81hi9yARA-JgvC2VbgKxXCWsnJfKM2ClKVqmtGCI6G8Y5Awy6g2TlVC1JG8t7iLrOfW1Yxi37VN9yYdE_bBGxq0SYQP5da3klaB0","UiLocales":null,"Nonce":"638025973172784571.Y2JkOWZkMjUtZWRiNi00ZTQ1LTk4YzgtYjk0N2ZlZDAxNWZmYjdhZWViNDAtNDc5Yy00ZjMzLWE5MTctMDk0MmM3MzVhYjBi","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Starter.Bff","redirect_uri":"https://localhost/signin-oidc","response_type":"code","scope":"openid profile Starter.Api offline_access","code_challenge":"Sbtay7zVwm8CorclSERytvJ0SBK5plzI67prtzr9bo8","code_challenge_method":"S256","response_mode":"form_post","nonce":"638025973172784571.Y2JkOWZkMjUtZWRiNi00ZTQ1LTk4YzgtYjk0N2ZlZDAxNWZmYjdhZWViNDAtNDc5Yy00ZjMzLWE5MTctMDk0MmM3MzVhYjBi","state":"CfDJ8NlCXmldZLBHsAViIel-sLydIJMJsl-wFm3MdvOtTlPp8CE1MX4MA0A_L3-MZ5kFRg3DnGfOPfD-XxLVe7_kZuh1zLeqXvTeGTV37LQZrK6IuPwjPUxye33EEA3yEPe9JPt3VTEtKs3JP6ow1oLRIZnDxfsGateL-cdn_7hHc7wyXcMQuo9mdlWkoTJ86MfKSpKjF0ZswdFkl8BPio8EJIImA9sbu6QflgfyAvaXmHTd9bdYXPXcS1gosFW-QpNJ5C-JxfuuN_NdD7RL2_ZAILVBK9YQeftTRCD4Vsu4cx26KbY8e-c81hi9yARA-JgvC2VbgKxXCWsnJfKM2ClKVqmtGCI6G8Y5Awy6g2TlVC1JG8t7iLrOfW1Yxi37VN9yYdE_bBGxq0SYQP5da3klaB0","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}

[23:41:57 Information] IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator
Showing login: User is not authenticated

[23:41:57 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/connect/authorize?client_id=Starter.Bff&redirect_uri=https%3A%2F%2Flocalhost%2Fsignin-oidc&response_type=code&scope=openid%20profile%20Starter.Api%20offline_access&code_challenge=Sbtay7zVwm8CorclSERytvJ0SBK5plzI67prtzr9bo8&code_challenge_method=S256&response_mode=form_post&nonce=638025973172784571.Y2JkOWZkMjUtZWRiNi00ZTQ1LTk4YzgtYjk0N2ZlZDAxNWZmYjdhZWViNDAtNDc5Yy00ZjMzLWE5MTctMDk0MmM3MzVhYjBi&state=CfDJ8NlCXmldZLBHsAViIel-sLydIJMJsl-wFm3MdvOtTlPp8CE1MX4MA0A_L3-MZ5kFRg3DnGfOPfD-XxLVe7_kZuh1zLeqXvTeGTV37LQZrK6IuPwjPUxye33EEA3yEPe9JPt3VTEtKs3JP6ow1oLRIZnDxfsGateL-cdn_7hHc7wyXcMQuo9mdlWkoTJ86MfKSpKjF0ZswdFkl8BPio8EJIImA9sbu6QflgfyAvaXmHTd9bdYXPXcS1gosFW-QpNJ5C-JxfuuN_NdD7RL2_ZAILVBK9YQeftTRCD4Vsu4cx26KbY8e-c81hi9yARA-JgvC2VbgKxXCWsnJfKM2ClKVqmtGCI6G8Y5Awy6g2TlVC1JG8t7iLrOfW1Yxi37VN9yYdE_bBGxq0SYQP5da3klaB0&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.7.1.0 - - - 302 0 - 7.5102ms

[23:41:57 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3DStarter.Bff%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520Starter.Api%2520offline_access%26code_challenge%3DSbtay7zVwm8CorclSERytvJ0SBK5plzI67prtzr9bo8%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D638025973172784571.Y2JkOWZkMjUtZWRiNi00ZTQ1LTk4YzgtYjk0N2ZlZDAxNWZmYjdhZWViNDAtNDc5Yy00ZjMzLWE5MTctMDk0MmM3MzVhYjBi%26state%3DCfDJ8NlCXmldZLBHsAViIel-sLydIJMJsl-wFm3MdvOtTlPp8CE1MX4MA0A_L3-MZ5kFRg3DnGfOPfD-XxLVe7_kZuh1zLeqXvTeGTV37LQZrK6IuPwjPUxye33EEA3yEPe9JPt3VTEtKs3JP6ow1oLRIZnDxfsGateL-cdn_7hHc7wyXcMQuo9mdlWkoTJ86MfKSpKjF0ZswdFkl8BPio8EJIImA9sbu6QflgfyAvaXmHTd9bdYXPXcS1gosFW-QpNJ5C-JxfuuN_NdD7RL2_ZAILVBK9YQeftTRCD4Vsu4cx26KbY8e-c81hi9yARA-JgvC2VbgKxXCWsnJfKM2ClKVqmtGCI6G8Y5Awy6g2TlVC1JG8t7iLrOfW1Yxi37VN9yYdE_bBGxq0SYQP5da3klaB0%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.7.1.0 - -

[23:41:57 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService
CORS policy execution successful.

[23:41:57 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware
No CORS policy found for the specified request.

[23:41:57 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:41:57 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:41:57 Information] Microsoft.AspNetCore.Routing.EndpointMiddleware
Executing endpoint 'Starter.Idp.Controllers.Account.AccountController.Login (IDP)'

[23:41:57 Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker
Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller Starter.Idp.Controllers.Account.AccountController (IDP).

[23:41:57 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:41:57 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Start authorize request protocol validation

[23:41:57 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:41:57 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Checking for PKCE parameters

[23:41:57 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator

[23:41:57 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:41:57 Information] Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor
Executing ViewResult, running view Login.

[23:41:57 Information] Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor
Executed ViewResult - view Login executed in 1.9743ms.

[23:41:57 Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker
Executed action Starter.Idp.Controllers.Account.AccountController.Login (IDP) in 8.7936ms

[23:41:57 Information] Microsoft.AspNetCore.Routing.EndpointMiddleware
Executed endpoint 'Starter.Idp.Controllers.Account.AccountController.Login (IDP)'

[23:41:57 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3DStarter.Bff%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520Starter.Api%2520offline_access%26code_challenge%3DSbtay7zVwm8CorclSERytvJ0SBK5plzI67prtzr9bo8%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D638025973172784571.Y2JkOWZkMjUtZWRiNi00ZTQ1LTk4YzgtYjk0N2ZlZDAxNWZmYjdhZWViNDAtNDc5Yy00ZjMzLWE5MTctMDk0MmM3MzVhYjBi%26state%3DCfDJ8NlCXmldZLBHsAViIel-sLydIJMJsl-wFm3MdvOtTlPp8CE1MX4MA0A_L3-MZ5kFRg3DnGfOPfD-XxLVe7_kZuh1zLeqXvTeGTV37LQZrK6IuPwjPUxye33EEA3yEPe9JPt3VTEtKs3JP6ow1oLRIZnDxfsGateL-cdn_7hHc7wyXcMQuo9mdlWkoTJ86MfKSpKjF0ZswdFkl8BPio8EJIImA9sbu6QflgfyAvaXmHTd9bdYXPXcS1gosFW-QpNJ5C-JxfuuN_NdD7RL2_ZAILVBK9YQeftTRCD4Vsu4cx26KbY8e-c81hi9yARA-JgvC2VbgKxXCWsnJfKM2ClKVqmtGCI6G8Y5Awy6g2TlVC1JG8t7iLrOfW1Yxi37VN9yYdE_bBGxq0SYQP5da3klaB0%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.7.1.0 - - - 200 - text/html;+charset=utf-8 12.9735ms

[23:41:57 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/lib/bootstrap/dist/css/bootstrap.min.css - -

[23:41:57 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/css/site.css - -

[23:41:57 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/lib/jquery/dist/jquery.slim.min.js - -

[23:41:57 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/lib/jquery/dist/jquery.slim.min.js'. Physical path: '/app/wwwroot/lib/jquery/dist/jquery.slim.min.js'

[23:41:57 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/lib/jquery/dist/jquery.slim.min.js - - - 200 72397 application/javascript 38.7193ms

[23:41:57 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/css/site.css'. Physical path: '/app/wwwroot/css/site.css'

[23:41:57 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/css/site.css - - - 200 497 text/css 42.3938ms

[23:41:57 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css'. Physical path: '/app/wwwroot/lib/bootstrap/dist/css/bootstrap.min.css'

[23:41:57 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/lib/bootstrap/dist/css/bootstrap.min.css - - - 200 159515 text/css 56.8235ms

[23:41:57 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/lib/bootstrap/dist/js/bootstrap.bundle.min.js - -

[23:41:57 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js'. Physical path: '/app/wwwroot/lib/bootstrap/dist/js/bootstrap.bundle.min.js'

[23:41:57 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/lib/bootstrap/dist/js/bootstrap.bundle.min.js - - - 200 80698 application/javascript 23.5034ms

[23:41:57 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/lib/bootstrap/dist/css/bootstrap.min.css.map - -

[23:41:57 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css.map'. Physical path: '/app/wwwroot/lib/bootstrap/dist/css/bootstrap.min.css.map'

[23:41:57 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/lib/bootstrap/dist/css/bootstrap.min.css.map - - - 200 641867 text/plain 56.6383ms

[23:41:57 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - -

[23:41:57 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map'. Physical path: '/app/wwwroot/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map'

[23:41:57 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - - - 200 318045 text/plain 63.9074ms

[23:42:03 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 POST https://localhost/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3DStarter.Bff%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520Starter.Api%2520offline_access%26code_challenge%3DSbtay7zVwm8CorclSERytvJ0SBK5plzI67prtzr9bo8%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D638025973172784571.Y2JkOWZkMjUtZWRiNi00ZTQ1LTk4YzgtYjk0N2ZlZDAxNWZmYjdhZWViNDAtNDc5Yy00ZjMzLWE5MTctMDk0MmM3MzVhYjBi%26state%3DCfDJ8NlCXmldZLBHsAViIel-sLydIJMJsl-wFm3MdvOtTlPp8CE1MX4MA0A_L3-MZ5kFRg3DnGfOPfD-XxLVe7_kZuh1zLeqXvTeGTV37LQZrK6IuPwjPUxye33EEA3yEPe9JPt3VTEtKs3JP6ow1oLRIZnDxfsGateL-cdn_7hHc7wyXcMQuo9mdlWkoTJ86MfKSpKjF0ZswdFkl8BPio8EJIImA9sbu6QflgfyAvaXmHTd9bdYXPXcS1gosFW-QpNJ5C-JxfuuN_NdD7RL2_ZAILVBK9YQeftTRCD4Vsu4cx26KbY8e-c81hi9yARA-JgvC2VbgKxXCWsnJfKM2ClKVqmtGCI6G8Y5Awy6g2TlVC1JG8t7iLrOfW1Yxi37VN9yYdE_bBGxq0SYQP5da3klaB0%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.7.1.0 application/x-www-form-urlencoded 1198

[23:42:03 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService
CORS policy execution successful.

[23:42:03 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware
No CORS policy found for the specified request.

[23:42:03 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:42:03 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:42:03 Information] Microsoft.AspNetCore.Routing.EndpointMiddleware
Executing endpoint 'Starter.Idp.Controllers.Account.AccountController.Login (IDP)'

[23:42:03 Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker
Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Starter.Idp.Models.Account.LoginInputModel, System.String) on controller Starter.Idp.Controllers.Account.AccountController (IDP).

[23:42:03 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:42:03 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Start authorize request protocol validation

[23:42:03 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:42:03 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Checking for PKCE parameters

[23:42:03 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator

[23:42:03 Information] Microsoft.EntityFrameworkCore.Infrastructure
Entity Framework Core 5.0.8 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None

[23:42:03 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0

[23:42:03 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0

[23:42:03 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0

[23:42:03 Debug] IdentityServer4.Hosting.IdentityServerAuthenticationService
Augmenting SignInContext

[23:42:03 Debug] IdentityServer4.Hosting.IdentityServerAuthenticationService
Adding idp claim with value: local

[23:42:03 Debug] IdentityServer4.Hosting.IdentityServerAuthenticationService
Adding auth_time claim with value: 1667000523

[23:42:03 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:42:03 Information] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application signed in.

[23:42:03 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0

[23:42:03 Information] IdentityServer4.Events.DefaultEventService
{"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"4","DisplayName":"bob","Endpoint":"UI","ClientId":"Starter.Bff","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMLP7IIHD895:00000002","TimeStamp":"2022-10-28T23:42:03.0000000Z","ProcessId":149,"LocalIpAddress":"172.18.0.4:5007","RemoteIpAddress":"172.18.0.1","$type":"UserLoginSuccessEvent"}

[23:42:03 Information] Microsoft.AspNetCore.Mvc.Infrastructure.RedirectResultExecutor
Executing RedirectResult, redirecting to /connect/authorize/callback?client_id=Starter.Bff&redirect_uri=https%3A%2F%2Flocalhost%2Fsignin-oidc&response_type=code&scope=openid%20profile%20Starter.Api%20offline_access&code_challenge=Sbtay7zVwm8CorclSERytvJ0SBK5plzI67prtzr9bo8&code_challenge_method=S256&response_mode=form_post&nonce=638025973172784571.Y2JkOWZkMjUtZWRiNi00ZTQ1LTk4YzgtYjk0N2ZlZDAxNWZmYjdhZWViNDAtNDc5Yy00ZjMzLWE5MTctMDk0MmM3MzVhYjBi&state=CfDJ8NlCXmldZLBHsAViIel-sLydIJMJsl-wFm3MdvOtTlPp8CE1MX4MA0A_L3-MZ5kFRg3DnGfOPfD-XxLVe7_kZuh1zLeqXvTeGTV37LQZrK6IuPwjPUxye33EEA3yEPe9JPt3VTEtKs3JP6ow1oLRIZnDxfsGateL-cdn_7hHc7wyXcMQuo9mdlWkoTJ86MfKSpKjF0ZswdFkl8BPio8EJIImA9sbu6QflgfyAvaXmHTd9bdYXPXcS1gosFW-QpNJ5C-JxfuuN_NdD7RL2_ZAILVBK9YQeftTRCD4Vsu4cx26KbY8e-c81hi9yARA-JgvC2VbgKxXCWsnJfKM2ClKVqmtGCI6G8Y5Awy6g2TlVC1JG8t7iLrOfW1Yxi37VN9yYdE_bBGxq0SYQP5da3klaB0&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.7.1.0.

[23:42:03 Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker
Executed action Starter.Idp.Controllers.Account.AccountController.Login (IDP) in 25.6605ms

[23:42:03 Information] Microsoft.AspNetCore.Routing.EndpointMiddleware
Executed endpoint 'Starter.Idp.Controllers.Account.AccountController.Login (IDP)'

[23:42:03 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 POST https://localhost/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3DStarter.Bff%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520Starter.Api%2520offline_access%26code_challenge%3DSbtay7zVwm8CorclSERytvJ0SBK5plzI67prtzr9bo8%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D638025973172784571.Y2JkOWZkMjUtZWRiNi00ZTQ1LTk4YzgtYjk0N2ZlZDAxNWZmYjdhZWViNDAtNDc5Yy00ZjMzLWE5MTctMDk0MmM3MzVhYjBi%26state%3DCfDJ8NlCXmldZLBHsAViIel-sLydIJMJsl-wFm3MdvOtTlPp8CE1MX4MA0A_L3-MZ5kFRg3DnGfOPfD-XxLVe7_kZuh1zLeqXvTeGTV37LQZrK6IuPwjPUxye33EEA3yEPe9JPt3VTEtKs3JP6ow1oLRIZnDxfsGateL-cdn_7hHc7wyXcMQuo9mdlWkoTJ86MfKSpKjF0ZswdFkl8BPio8EJIImA9sbu6QflgfyAvaXmHTd9bdYXPXcS1gosFW-QpNJ5C-JxfuuN_NdD7RL2_ZAILVBK9YQeftTRCD4Vsu4cx26KbY8e-c81hi9yARA-JgvC2VbgKxXCWsnJfKM2ClKVqmtGCI6G8Y5Awy6g2TlVC1JG8t7iLrOfW1Yxi37VN9yYdE_bBGxq0SYQP5da3klaB0%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.7.1.0 application/x-www-form-urlencoded 1198 - 302 0 - 32.6860ms

[23:42:03 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/connect/authorize/callback?client_id=Starter.Bff&redirect_uri=https%3A%2F%2Flocalhost%2Fsignin-oidc&response_type=code&scope=openid%20profile%20Starter.Api%20offline_access&code_challenge=Sbtay7zVwm8CorclSERytvJ0SBK5plzI67prtzr9bo8&code_challenge_method=S256&response_mode=form_post&nonce=638025973172784571.Y2JkOWZkMjUtZWRiNi00ZTQ1LTk4YzgtYjk0N2ZlZDAxNWZmYjdhZWViNDAtNDc5Yy00ZjMzLWE5MTctMDk0MmM3MzVhYjBi&state=CfDJ8NlCXmldZLBHsAViIel-sLydIJMJsl-wFm3MdvOtTlPp8CE1MX4MA0A_L3-MZ5kFRg3DnGfOPfD-XxLVe7_kZuh1zLeqXvTeGTV37LQZrK6IuPwjPUxye33EEA3yEPe9JPt3VTEtKs3JP6ow1oLRIZnDxfsGateL-cdn_7hHc7wyXcMQuo9mdlWkoTJ86MfKSpKjF0ZswdFkl8BPio8EJIImA9sbu6QflgfyAvaXmHTd9bdYXPXcS1gosFW-QpNJ5C-JxfuuN_NdD7RL2_ZAILVBK9YQeftTRCD4Vsu4cx26KbY8e-c81hi9yARA-JgvC2VbgKxXCWsnJfKM2ClKVqmtGCI6G8Y5Awy6g2TlVC1JG8t7iLrOfW1Yxi37VN9yYdE_bBGxq0SYQP5da3klaB0&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.7.1.0 - -

[23:42:03 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService
CORS policy execution successful.

[23:42:03 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware
No CORS policy found for the specified request.

[23:42:03 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was successfully authenticated.

[23:42:03 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was successfully authenticated.

[23:42:03 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /connect/authorize/callback matched to endpoint type Authorize

[23:42:03 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint

[23:42:03 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback

[23:42:03 Debug] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
Start authorize callback request

[23:42:03 Debug] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
User in authorize request: 4

[23:42:03 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Start authorize request protocol validation

[23:42:03 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:42:03 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Checking for PKCE parameters

[23:42:03 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator

[23:42:03 Debug] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
ValidatedAuthorizeRequest
{"ClientId":"Starter.Bff","ClientName":null,"RedirectUri":"https://localhost/signin-oidc","AllowedRedirectUris":["https://localhost/signin-oidc","https://bff:5005/signin-oidc","https://localhost/loggedin"],"SubjectId":"4","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile Starter.Api offline_access","State":"CfDJ8NlCXmldZLBHsAViIel-sLydIJMJsl-wFm3MdvOtTlPp8CE1MX4MA0A_L3-MZ5kFRg3DnGfOPfD-XxLVe7_kZuh1zLeqXvTeGTV37LQZrK6IuPwjPUxye33EEA3yEPe9JPt3VTEtKs3JP6ow1oLRIZnDxfsGateL-cdn_7hHc7wyXcMQuo9mdlWkoTJ86MfKSpKjF0ZswdFkl8BPio8EJIImA9sbu6QflgfyAvaXmHTd9bdYXPXcS1gosFW-QpNJ5C-JxfuuN_NdD7RL2_ZAILVBK9YQeftTRCD4Vsu4cx26KbY8e-c81hi9yARA-JgvC2VbgKxXCWsnJfKM2ClKVqmtGCI6G8Y5Awy6g2TlVC1JG8t7iLrOfW1Yxi37VN9yYdE_bBGxq0SYQP5da3klaB0","UiLocales":null,"Nonce":"638025973172784571.Y2JkOWZkMjUtZWRiNi00ZTQ1LTk4YzgtYjk0N2ZlZDAxNWZmYjdhZWViNDAtNDc5Yy00ZjMzLWE5MTctMDk0MmM3MzVhYjBi","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"F05A159CE7855C62965938CC3918AD1C","Raw":{"client_id":"Starter.Bff","redirect_uri":"https://localhost/signin-oidc","response_type":"code","scope":"openid profile Starter.Api offline_access","code_challenge":"Sbtay7zVwm8CorclSERytvJ0SBK5plzI67prtzr9bo8","code_challenge_method":"S256","response_mode":"form_post","nonce":"638025973172784571.Y2JkOWZkMjUtZWRiNi00ZTQ1LTk4YzgtYjk0N2ZlZDAxNWZmYjdhZWViNDAtNDc5Yy00ZjMzLWE5MTctMDk0MmM3MzVhYjBi","state":"CfDJ8NlCXmldZLBHsAViIel-sLydIJMJsl-wFm3MdvOtTlPp8CE1MX4MA0A_L3-MZ5kFRg3DnGfOPfD-XxLVe7_kZuh1zLeqXvTeGTV37LQZrK6IuPwjPUxye33EEA3yEPe9JPt3VTEtKs3JP6ow1oLRIZnDxfsGateL-cdn_7hHc7wyXcMQuo9mdlWkoTJ86MfKSpKjF0ZswdFkl8BPio8EJIImA9sbu6QflgfyAvaXmHTd9bdYXPXcS1gosFW-QpNJ5C-JxfuuN_NdD7RL2_ZAILVBK9YQeftTRCD4Vsu4cx26KbY8e-c81hi9yARA-JgvC2VbgKxXCWsnJfKM2ClKVqmtGCI6G8Y5Awy6g2TlVC1JG8t7iLrOfW1Yxi37VN9yYdE_bBGxq0SYQP5da3klaB0","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}

[23:42:03 Information] Microsoft.EntityFrameworkCore.Infrastructure
Entity Framework Core 5.0.8 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None

[23:42:03 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0

[23:42:03 Debug] IdentityServer4.Services.DefaultConsentService
Client is configured to not require consent, no consent is required

[23:42:03 Debug] IdentityServer4.ResponseHandling.AuthorizeResponseGenerator
Creating Authorization Code Flow response.

[23:42:03 Information] IdentityServer4.Events.DefaultEventService
{"ClientId":"Starter.Bff","ClientName":null,"RedirectUri":"https://localhost/signin-oidc","Endpoint":"Authorize","SubjectId":"4","Scopes":"openid profile Starter.Api offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****4695","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMLP7IIHD896:00000002","TimeStamp":"2022-10-28T23:42:03.0000000Z","ProcessId":149,"LocalIpAddress":"172.18.0.4:5007","RemoteIpAddress":"172.18.0.1","$type":"TokenIssuedSuccessEvent"}

[23:42:03 Debug] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
Authorize endpoint response
{"SubjectId":"4","ClientId":"Starter.Bff","RedirectUri":"https://localhost/signin-oidc","State":"CfDJ8NlCXmldZLBHsAViIel-sLydIJMJsl-wFm3MdvOtTlPp8CE1MX4MA0A_L3-MZ5kFRg3DnGfOPfD-XxLVe7_kZuh1zLeqXvTeGTV37LQZrK6IuPwjPUxye33EEA3yEPe9JPt3VTEtKs3JP6ow1oLRIZnDxfsGateL-cdn_7hHc7wyXcMQuo9mdlWkoTJ86MfKSpKjF0ZswdFkl8BPio8EJIImA9sbu6QflgfyAvaXmHTd9bdYXPXcS1gosFW-QpNJ5C-JxfuuN_NdD7RL2_ZAILVBK9YQeftTRCD4Vsu4cx26KbY8e-c81hi9yARA-JgvC2VbgKxXCWsnJfKM2ClKVqmtGCI6G8Y5Awy6g2TlVC1JG8t7iLrOfW1Yxi37VN9yYdE_bBGxq0SYQP5da3klaB0","Scope":"openid profile Starter.Api offline_access","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}

[23:42:03 Debug] IdentityServer4.Hosting.IdentityServerAuthenticationService
Augmenting SignInContext

[23:42:03 Information] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application signed in.

[23:42:03 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/connect/authorize/callback?client_id=Starter.Bff&redirect_uri=https%3A%2F%2Flocalhost%2Fsignin-oidc&response_type=code&scope=openid%20profile%20Starter.Api%20offline_access&code_challenge=Sbtay7zVwm8CorclSERytvJ0SBK5plzI67prtzr9bo8&code_challenge_method=S256&response_mode=form_post&nonce=638025973172784571.Y2JkOWZkMjUtZWRiNi00ZTQ1LTk4YzgtYjk0N2ZlZDAxNWZmYjdhZWViNDAtNDc5Yy00ZjMzLWE5MTctMDk0MmM3MzVhYjBi&state=CfDJ8NlCXmldZLBHsAViIel-sLydIJMJsl-wFm3MdvOtTlPp8CE1MX4MA0A_L3-MZ5kFRg3DnGfOPfD-XxLVe7_kZuh1zLeqXvTeGTV37LQZrK6IuPwjPUxye33EEA3yEPe9JPt3VTEtKs3JP6ow1oLRIZnDxfsGateL-cdn_7hHc7wyXcMQuo9mdlWkoTJ86MfKSpKjF0ZswdFkl8BPio8EJIImA9sbu6QflgfyAvaXmHTd9bdYXPXcS1gosFW-QpNJ5C-JxfuuN_NdD7RL2_ZAILVBK9YQeftTRCD4Vsu4cx26KbY8e-c81hi9yARA-JgvC2VbgKxXCWsnJfKM2ClKVqmtGCI6G8Y5Awy6g2TlVC1JG8t7iLrOfW1Yxi37VN9yYdE_bBGxq0SYQP5da3klaB0&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.7.1.0 - - - 200 - text/html;+charset=UTF-8 20.2197ms

[23:42:03 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.1 POST http://idp:5006/connect/token application/x-www-form-urlencoded 251

[23:42:03 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:42:03 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:42:03 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /connect/token matched to endpoint type Token

[23:42:03 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint

[23:42:03 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token

[23:42:03 Debug] IdentityServer4.Endpoints.TokenEndpoint
Start token request.

[23:42:03 Debug] IdentityServer4.Validation.ClientSecretValidator
Start client validation

[23:42:03 Debug] IdentityServer4.Validation.BasicAuthenticationSecretParser
Start parsing Basic Authentication secret

[23:42:03 Debug] IdentityServer4.Validation.PostBodySecretParser
Start parsing for secret in post body

[23:42:03 Debug] IdentityServer4.Validation.ISecretsListParser
Parser found secret: PostBodySecretParser

[23:42:03 Debug] IdentityServer4.Validation.ISecretsListParser
Secret id found: Starter.Bff

[23:42:03 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:42:03 Debug] IdentityServer4.Validation.ISecretsListValidator
Secret validator success: HashedSharedSecretValidator

[23:42:03 Debug] IdentityServer4.Validation.ClientSecretValidator
Client validation success

[23:42:03 Information] IdentityServer4.Events.DefaultEventService
{"ClientId":"Starter.Bff","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMLP7IIHD897:00000002","TimeStamp":"2022-10-28T23:42:03.0000000Z","ProcessId":149,"LocalIpAddress":"172.18.0.4:5006","RemoteIpAddress":"172.18.0.5","$type":"ClientAuthenticationSuccessEvent"}

[23:42:03 Debug] IdentityServer4.Validation.TokenRequestValidator
Start token request validation

[23:42:03 Debug] IdentityServer4.Validation.TokenRequestValidator
Start validation of authorization code token request

[23:42:03 Debug] IdentityServer4.Validation.TokenRequestValidator
Client required a proof key for code exchange. Starting PKCE validation

[23:42:03 Information] Microsoft.EntityFrameworkCore.Infrastructure
Entity Framework Core 5.0.8 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None

[23:42:03 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0

[23:42:03 Debug] IdentityServer4.Validation.TokenRequestValidator
Validation of authorization code token request success

[23:42:03 Information] IdentityServer4.Validation.TokenRequestValidator
Token request validation success, {"ClientId":"Starter.Bff","ClientName":null,"GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****4695","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"Starter.Bff","client_secret":"***REDACTED***","code":"787EBC44BD34EB1607512F0EAF7507B1D8A8AEB7DAC76F5C58BF74F9BFF94695","grant_type":"authorization_code","redirect_uri":"https://localhost/signin-oidc","code_verifier":"qhrL1yujzouym5H703Pva4IBlf2ZMBzmLveV-jj9-tk"},"$type":"TokenRequestValidationLog"}

[23:42:03 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:42:03 Debug] IdentityServer4.Services.DefaultClaimsService
Getting claims for access token for client: Starter.Bff

[23:42:03 Debug] IdentityServer4.Services.DefaultClaimsService
Getting claims for access token for subject: 4

[23:42:03 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0

[23:42:03 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0

[23:42:03 Debug] IdentityServer4.Services.DefaultRefreshTokenService
Creating refresh token

[23:42:03 Debug] IdentityServer4.Services.DefaultRefreshTokenService
Setting an absolute lifetime: 2592000

[23:42:03 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:42:03 Debug] IdentityServer4.Services.DefaultClaimsService
Getting claims for identity token for subject: 4 and client: Starter.Bff

[23:42:03 Debug] IdentityServer4.Services.DefaultClaimsService
In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.

[23:42:03 Information] IdentityServer4.Events.DefaultEventService
{"ClientId":"Starter.Bff","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4","Scopes":"openid profile Starter.Api offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****DgSA","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****2986","$type":"Token"},{"TokenType":"access_token","TokenValue":"****rkVw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMLP7IIHD897:00000002","TimeStamp":"2022-10-28T23:42:03.0000000Z","ProcessId":149,"LocalIpAddress":"172.18.0.4:5006","RemoteIpAddress":"172.18.0.5","$type":"TokenIssuedSuccessEvent"}

[23:42:03 Debug] IdentityServer4.Endpoints.TokenEndpoint
Token request success.

[23:42:03 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.1 POST http://idp:5006/connect/token application/x-www-form-urlencoded 251 - 200 - application/json;+charset=UTF-8 46.4736ms

[23:42:03 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.1 GET http://idp:5006/connect/userinfo - -

[23:42:03 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:42:03 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:42:03 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /connect/userinfo matched to endpoint type Userinfo

[23:42:03 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint

[23:42:03 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo

[23:42:03 Debug] IdentityServer4.Endpoints.UserInfoEndpoint
Start userinfo request

[23:42:03 Debug] IdentityServer4.Validation.BearerTokenUsageValidator
Bearer token found in header

[23:42:03 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:42:03 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:42:03 Information] Microsoft.EntityFrameworkCore.Infrastructure
Entity Framework Core 5.0.8 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None

[23:42:03 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0

[23:42:03 Debug] IdentityServer4.Validation.TokenValidator
Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator

[23:42:03 Debug] IdentityServer4.Validation.TokenValidator
Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"031427E56594AA48C71892BC118F181C","Claims":{"nbf":1667000523,"exp":1667004123,"iss":"https://localhost","aud":["starter.api","https://localhost/resources"],"client_id":"Starter.Bff","sub":"4","auth_time":1667000523,"idp":"local","jti":"031427E56594AA48C71892BC118F181C","sid":"F05A159CE7855C62965938CC3918AD1C","iat":1667000523,"scope":["openid","profile","Starter.Api","offline_access"],"amr":"pwd"},"$type":"TokenValidationLog"}

[23:42:03 Debug] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Creating userinfo response

[23:42:03 Debug] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Scopes in access token: openid profile Starter.Api offline_access

[23:42:03 Debug] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at

[23:42:03 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0

[23:42:03 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0

[23:42:03 Information] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Profile service returned the following claim types: sub website family_name given_name name preferred_username

[23:42:03 Debug] IdentityServer4.Endpoints.UserInfoEndpoint
End userinfo request

[23:42:03 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.1 GET http://idp:5006/connect/userinfo - - - 200 - application/json;+charset=UTF-8 31.6605ms

[23:42:03 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.1 GET http://idp:5006/connect/userinfo - -

[23:42:03 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:42:03 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:42:03 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /connect/userinfo matched to endpoint type Userinfo

[23:42:03 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint

[23:42:03 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo

[23:42:03 Debug] IdentityServer4.Endpoints.UserInfoEndpoint
Start userinfo request

[23:42:03 Debug] IdentityServer4.Validation.BearerTokenUsageValidator
Bearer token found in header

[23:42:03 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:42:03 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:42:03 Information] Microsoft.EntityFrameworkCore.Infrastructure
Entity Framework Core 5.0.8 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None

[23:42:03 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0

[23:42:03 Debug] IdentityServer4.Validation.TokenValidator
Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator

[23:42:03 Debug] IdentityServer4.Validation.TokenValidator
Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"031427E56594AA48C71892BC118F181C","Claims":{"nbf":1667000523,"exp":1667004123,"iss":"https://localhost","aud":["starter.api","https://localhost/resources"],"client_id":"Starter.Bff","sub":"4","auth_time":1667000523,"idp":"local","jti":"031427E56594AA48C71892BC118F181C","sid":"F05A159CE7855C62965938CC3918AD1C","iat":1667000523,"scope":["openid","profile","Starter.Api","offline_access"],"amr":"pwd"},"$type":"TokenValidationLog"}

[23:42:03 Debug] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Creating userinfo response

[23:42:03 Debug] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Scopes in access token: openid profile Starter.Api offline_access

[23:42:03 Debug] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at

[23:42:03 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0

[23:42:03 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0

[23:42:03 Information] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Profile service returned the following claim types: sub website family_name given_name name preferred_username

[23:42:03 Debug] IdentityServer4.Endpoints.UserInfoEndpoint
End userinfo request

[23:42:03 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.1 GET http://idp:5006/connect/userinfo - - - 200 - application/json;+charset=UTF-8 28.7133ms

[23:44:44 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/connect/endsession?post_logout_redirect_uri=https%3A%2F%2Flocalhost%2Fsignout-callback-oidc&id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6Ijg1RTc3MDAyODhFOUFCMkRBOEJFODA4QkEyREZGRTZDIiwidHlwIjoiSldUIn0.eyJuYmYiOjE2NjcwMDA1MjMsImV4cCI6MTY2NzAwMDgyMywiaXNzIjoiaHR0cHM6Ly9sb2NhbGhvc3QiLCJhdWQiOiJTdGFydGVyLkJmZiIsIm5vbmNlIjoiNjM4MDI1OTczMTcyNzg0NTcxLlkySmtPV1prTWpVdFpXUmlOaTAwWlRRMUxUazRZemd0WWprME4yWmxaREF4TldabVlqZGhaV1ZpTkRBdE5EYzVZeTAwWmpNekxXRTVNVGN0TURrME1tTTNNelZoWWpCaSIsImlhdCI6MTY2NzAwMDUyMywiYXRfaGFzaCI6IlVyYm1SLS05R3lZQVZmVVhQNDFZTUEiLCJzX2hhc2giOiI1ZXU0em5JTUExX3JPalczMkhHWDJRIiwic2lkIjoiRjA1QTE1OUNFNzg1NUM2Mjk2NTkzOENDMzkxOEFEMUMiLCJzdWIiOiI0IiwiYXV0aF90aW1lIjoxNjY3MDAwNTIzLCJpZHAiOiJsb2NhbCIsImFtciI6WyJwd2QiXX0.3aAr2wO1ADyJmDXQe-P7XjB6A7RMLT_GTbhGPH1WWs-dPy4djlCqmexefYJKPY8z-MCTzakqbndo3IRyNEahvFsciYVskEJYFaSsIKaa_-FYUoLfyMNfUD_R12tNSX2lUPPgJAw5Rfko4zoBEse3ZSJh-Uw3fCFcutSdoY3fxRCrlBOKCeABqpL3X_QRdhUQhzcxy6GYDMnUKE_7vvcB6q_tQDXoOl4PbVZTskzEHnbf0PfKzAv57nrPj7eeyXxmCd9YT-q8QQHdAkYK5psdPTLagca09r6blQmVe0OES373UBPx4KnBOZ17MhwTDVMwgq9NiujECHJpGs4u4RDgSA&state=CfDJ8NlCXmldZLBHsAViIel-sLyaAv4T17TQ3wz5GmwNxebkfzLfQHfRO_8o9qMYsO4qrvxFfklMtQvYl-HBKJFCq-Kqqy_sjn4is9EifREdldC3KMbRF1XsxgDJ3f_FJjkF-AQ6kcXQ5hQaqBhp1WCk839e9M0S8cUMm_Zk67PJ2pFr&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.7.1.0 - -

[23:44:44 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService
CORS policy execution successful.

[23:44:44 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware
No CORS policy found for the specified request.

[23:44:44 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was successfully authenticated.

[23:44:44 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was successfully authenticated.

[23:44:44 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /connect/endsession matched to endpoint type Endsession

[23:44:44 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint

[23:44:44 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession

[23:44:44 Debug] IdentityServer4.Endpoints.EndSessionEndpoint
Processing signout request for 4

[23:44:44 Debug] IdentityServer4.Validation.EndSessionRequestValidator
Start end session request validation

[23:44:44 Debug] IdentityServer4.Validation.TokenValidator
Start identity token validation

[23:44:44 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:44:44 Debug] IdentityServer4.Validation.TokenValidator
Client found: Starter.Bff / null

[23:44:44 Debug] IdentityServer4.Validation.TokenValidator
Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator

[23:44:44 Debug] IdentityServer4.Validation.TokenValidator
Token validation success
{"ClientId":"Starter.Bff","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1667000523,"exp":1667000823,"iss":"https://localhost","aud":"Starter.Bff","nonce":"638025973172784571.Y2JkOWZkMjUtZWRiNi00ZTQ1LTk4YzgtYjk0N2ZlZDAxNWZmYjdhZWViNDAtNDc5Yy00ZjMzLWE5MTctMDk0MmM3MzVhYjBi","iat":1667000523,"at_hash":"UrbmR--9GyYAVfUXP41YMA","s_hash":"5eu4znIMA1_rOjW32HGX2Q","sid":"F05A159CE7855C62965938CC3918AD1C","sub":"4","auth_time":1667000523,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}

[23:44:44 Information] IdentityServer4.Validation.EndSessionRequestValidator
End session request validation success
{"ClientId":"Starter.Bff","ClientName":null,"SubjectId":"4","PostLogOutUri":"https://localhost/signout-callback-oidc","State":"CfDJ8NlCXmldZLBHsAViIel-sLyaAv4T17TQ3wz5GmwNxebkfzLfQHfRO_8o9qMYsO4qrvxFfklMtQvYl-HBKJFCq-Kqqy_sjn4is9EifREdldC3KMbRF1XsxgDJ3f_FJjkF-AQ6kcXQ5hQaqBhp1WCk839e9M0S8cUMm_Zk67PJ2pFr","Raw":{"post_logout_redirect_uri":"https://localhost/signout-callback-oidc","id_token_hint":"***REDACTED***","state":"CfDJ8NlCXmldZLBHsAViIel-sLyaAv4T17TQ3wz5GmwNxebkfzLfQHfRO_8o9qMYsO4qrvxFfklMtQvYl-HBKJFCq-Kqqy_sjn4is9EifREdldC3KMbRF1XsxgDJ3f_FJjkF-AQ6kcXQ5hQaqBhp1WCk839e9M0S8cUMm_Zk67PJ2pFr","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"EndSessionRequestValidationLog"}

[23:44:44 Debug] IdentityServer4.Endpoints.EndSessionEndpoint
Success validating end session request from Starter.Bff

[23:44:44 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/connect/endsession?post_logout_redirect_uri=https%3A%2F%2Flocalhost%2Fsignout-callback-oidc&id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6Ijg1RTc3MDAyODhFOUFCMkRBOEJFODA4QkEyREZGRTZDIiwidHlwIjoiSldUIn0.eyJuYmYiOjE2NjcwMDA1MjMsImV4cCI6MTY2NzAwMDgyMywiaXNzIjoiaHR0cHM6Ly9sb2NhbGhvc3QiLCJhdWQiOiJTdGFydGVyLkJmZiIsIm5vbmNlIjoiNjM4MDI1OTczMTcyNzg0NTcxLlkySmtPV1prTWpVdFpXUmlOaTAwWlRRMUxUazRZemd0WWprME4yWmxaREF4TldabVlqZGhaV1ZpTkRBdE5EYzVZeTAwWmpNekxXRTVNVGN0TURrME1tTTNNelZoWWpCaSIsImlhdCI6MTY2NzAwMDUyMywiYXRfaGFzaCI6IlVyYm1SLS05R3lZQVZmVVhQNDFZTUEiLCJzX2hhc2giOiI1ZXU0em5JTUExX3JPalczMkhHWDJRIiwic2lkIjoiRjA1QTE1OUNFNzg1NUM2Mjk2NTkzOENDMzkxOEFEMUMiLCJzdWIiOiI0IiwiYXV0aF90aW1lIjoxNjY3MDAwNTIzLCJpZHAiOiJsb2NhbCIsImFtciI6WyJwd2QiXX0.3aAr2wO1ADyJmDXQe-P7XjB6A7RMLT_GTbhGPH1WWs-dPy4djlCqmexefYJKPY8z-MCTzakqbndo3IRyNEahvFsciYVskEJYFaSsIKaa_-FYUoLfyMNfUD_R12tNSX2lUPPgJAw5Rfko4zoBEse3ZSJh-Uw3fCFcutSdoY3fxRCrlBOKCeABqpL3X_QRdhUQhzcxy6GYDMnUKE_7vvcB6q_tQDXoOl4PbVZTskzEHnbf0PfKzAv57nrPj7eeyXxmCd9YT-q8QQHdAkYK5psdPTLagca09r6blQmVe0OES373UBPx4KnBOZ17MhwTDVMwgq9NiujECHJpGs4u4RDgSA&state=CfDJ8NlCXmldZLBHsAViIel-sLyaAv4T17TQ3wz5GmwNxebkfzLfQHfRO_8o9qMYsO4qrvxFfklMtQvYl-HBKJFCq-Kqqy_sjn4is9EifREdldC3KMbRF1XsxgDJ3f_FJjkF-AQ6kcXQ5hQaqBhp1WCk839e9M0S8cUMm_Zk67PJ2pFr&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.7.1.0 - - - 302 0 - 36.5677ms

[23:44:44 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/Account/Logout?logoutId=CfDJ8Hang32hRfBDkNsasZEG-DHxMcSAu_CpyaIIOsr6ows7wz641xK8TIxy-GOlT5eRzYOLgeTUdw_C7QfbVXkkI444eZoOY2TJClhG3LjYyHMAccSD4DGHaCSy8qemVcgLJoJ3arDjtwsvKZ1Z-BCIApze21_9HSUzkxVhlfJzW5mIZSmPIyXcv8BNAzGbkXs2_tXr2ywf8IzIwPCUjvLI6_PBDvDWgZbj0AzvAVz33Z9loo-LYVRoUVwAnkrjaK83WlOKTwf0-boH6nTwSkNzZiz0KKZIslk8bA6A7Qoth3THeZ86HJDiMVBCqazYJB1-eAYWW5a0XTGMhk9NJxXvGZP6hkAHYJOrabju0bvPLL45s--T3Fo8aD6l8AC8cQ13eYtJtbUGsJpeW7OhEHTBF62Jfxjjjj3xwps03tR-b_qQlqK9RIWUm7G6umZ_f6BXGjc1GkLlXmqwvSsp78aIKUNvSXr1uldTWWWDvb91IvN82dy7xlvGwGIEdDwHK9SUtGSGnwIfhZ_EUM7LG0dL3cDaGKGYCazufBB3ekM1LzMmB_Dfp1QjZuz6uYroHlJSjp32HjoLYpoFr0kcP85WpomNhKSS0MtwWiYjh5YqpGlCD0h6jLnE4k0ZUAZQFKUzkCpuQPbS1AMa-LM07vW5L58XsCN2DhPokuf5NPjp6_-OBTeaHiHU54InN7Y1fRInYylMGExrAibmE9kJY7QNBcCfI-t3PSSusn6ysxRGFyX6zt5iBtqLJGVN0uscAbxF1Q - -

[23:44:44 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService
CORS policy execution successful.

[23:44:44 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware
No CORS policy found for the specified request.

[23:44:44 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was successfully authenticated.

[23:44:44 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was successfully authenticated.

[23:44:44 Information] Microsoft.AspNetCore.Routing.EndpointMiddleware
Executing endpoint 'Starter.Idp.Controllers.Account.AccountController.Logout (IDP)'

[23:44:44 Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker
Route matched with {action = "Logout", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout(System.String) on controller Starter.Idp.Controllers.Account.AccountController (IDP).

[23:44:44 Information] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application signed out.

[23:44:44 Information] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.External signed out.

[23:44:44 Information] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.TwoFactorUserId signed out.

[23:44:44 Information] IdentityServer4.Events.DefaultEventService
{"SubjectId":"4","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HMLP7IIHD89A:00000002","TimeStamp":"2022-10-28T23:44:44.0000000Z","ProcessId":149,"LocalIpAddress":"172.18.0.4:5007","RemoteIpAddress":"172.18.0.1","$type":"UserLogoutSuccessEvent"}

[23:44:44 Information] Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor
Executing ViewResult, running view LoggedOut.

[23:44:44 Debug] IdentityServer4.Hosting.IdentityServerMiddleware
SignOutCalled set; processing post-signout session cleanup.

[23:44:44 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:44:44 Debug] IdentityServer4.Services.LogoutNotificationService
No client back-channel logout URLs

[23:44:44 Information] Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor
Executed ViewResult - view LoggedOut executed in 11.3707ms.

[23:44:44 Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker
Executed action Starter.Idp.Controllers.Account.AccountController.Logout (IDP) in 32.5427ms

[23:44:44 Information] Microsoft.AspNetCore.Routing.EndpointMiddleware
Executed endpoint 'Starter.Idp.Controllers.Account.AccountController.Logout (IDP)'

[23:44:44 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/Account/Logout?logoutId=CfDJ8Hang32hRfBDkNsasZEG-DHxMcSAu_CpyaIIOsr6ows7wz641xK8TIxy-GOlT5eRzYOLgeTUdw_C7QfbVXkkI444eZoOY2TJClhG3LjYyHMAccSD4DGHaCSy8qemVcgLJoJ3arDjtwsvKZ1Z-BCIApze21_9HSUzkxVhlfJzW5mIZSmPIyXcv8BNAzGbkXs2_tXr2ywf8IzIwPCUjvLI6_PBDvDWgZbj0AzvAVz33Z9loo-LYVRoUVwAnkrjaK83WlOKTwf0-boH6nTwSkNzZiz0KKZIslk8bA6A7Qoth3THeZ86HJDiMVBCqazYJB1-eAYWW5a0XTGMhk9NJxXvGZP6hkAHYJOrabju0bvPLL45s--T3Fo8aD6l8AC8cQ13eYtJtbUGsJpeW7OhEHTBF62Jfxjjjj3xwps03tR-b_qQlqK9RIWUm7G6umZ_f6BXGjc1GkLlXmqwvSsp78aIKUNvSXr1uldTWWWDvb91IvN82dy7xlvGwGIEdDwHK9SUtGSGnwIfhZ_EUM7LG0dL3cDaGKGYCazufBB3ekM1LzMmB_Dfp1QjZuz6uYroHlJSjp32HjoLYpoFr0kcP85WpomNhKSS0MtwWiYjh5YqpGlCD0h6jLnE4k0ZUAZQFKUzkCpuQPbS1AMa-LM07vW5L58XsCN2DhPokuf5NPjp6_-OBTeaHiHU54InN7Y1fRInYylMGExrAibmE9kJY7QNBcCfI-t3PSSusn6ysxRGFyX6zt5iBtqLJGVN0uscAbxF1Q - - - 200 - text/html;+charset=utf-8 42.4360ms

[23:44:44 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/css/site.css - -

[23:44:44 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/connect/endsession/callback?endSessionId=CfDJ8Hang32hRfBDkNsasZEG-DGbIpjSlWjw_6He_pAT4hnrLW-Ab4NNk_eTLLe7hS2Ki2weosysrMnwzEWtq7Vg4Jz024YL0TOxN_9KDxeShngnU7cWQ3OrJNY1fSBzImM974l4GeE-iJsE4uj47QQu5bwqMNhIx7pBRYK3tKHv1NdA0YF32gzirr_QPw70Y_-o8v42a35nukd3Yw4wGc4AucPH11S9NmQdgUVLqeRiuYOl_McFoVaJQvSR1jnRHw-ufnfW40ZELGyc6Tv9hAVcRhQUAkpRdFxbdQXsJbmXSWnt - -

[23:44:44 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService
CORS policy execution successful.

[23:44:44 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware
No CORS policy found for the specified request.

[23:44:44 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:44:44 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:44:44 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /connect/endsession/callback matched to endpoint type Endsession

[23:44:44 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint

[23:44:44 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback

[23:44:44 Debug] IdentityServer4.Endpoints.EndSessionCallbackEndpoint
Processing signout callback request

[23:44:44 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/lib/bootstrap/dist/css/bootstrap.min.css - -

[23:44:44 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/lib/jquery/dist/jquery.slim.min.js - -

[23:44:44 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/css/site.css'. Physical path: '/app/wwwroot/css/site.css'

[23:44:44 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/css/site.css - - - 200 497 text/css 17.4100ms

[23:44:44 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:44:44 Debug] IdentityServer4.Services.LogoutNotificationService
No client front-channel logout URLs

[23:44:44 Information] IdentityServer4.Endpoints.EndSessionCallbackEndpoint
Successful signout callback.

[23:44:44 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/connect/endsession/callback?endSessionId=CfDJ8Hang32hRfBDkNsasZEG-DGbIpjSlWjw_6He_pAT4hnrLW-Ab4NNk_eTLLe7hS2Ki2weosysrMnwzEWtq7Vg4Jz024YL0TOxN_9KDxeShngnU7cWQ3OrJNY1fSBzImM974l4GeE-iJsE4uj47QQu5bwqMNhIx7pBRYK3tKHv1NdA0YF32gzirr_QPw70Y_-o8v42a35nukd3Yw4wGc4AucPH11S9NmQdgUVLqeRiuYOl_McFoVaJQvSR1jnRHw-ufnfW40ZELGyc6Tv9hAVcRhQUAkpRdFxbdQXsJbmXSWnt - - - 200 - text/html;+charset=UTF-8 21.2548ms

[23:44:44 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css'. Physical path: '/app/wwwroot/lib/bootstrap/dist/css/bootstrap.min.css'

[23:44:44 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/lib/bootstrap/dist/css/bootstrap.min.css - - - 200 159515 text/css 29.3620ms

[23:44:44 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/lib/bootstrap/dist/js/bootstrap.bundle.min.js - -

[23:44:44 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/lib/jquery/dist/jquery.slim.min.js'. Physical path: '/app/wwwroot/lib/jquery/dist/jquery.slim.min.js'

[23:44:44 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/lib/jquery/dist/jquery.slim.min.js - - - 200 72397 application/javascript 47.1190ms

[23:44:44 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js'. Physical path: '/app/wwwroot/lib/bootstrap/dist/js/bootstrap.bundle.min.js'

[23:44:44 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/lib/bootstrap/dist/js/bootstrap.bundle.min.js - - - 200 80698 application/javascript 49.2873ms

[23:44:44 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - -

[23:44:44 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/lib/bootstrap/dist/css/bootstrap.min.css.map - -

[23:44:44 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map'. Physical path: '/app/wwwroot/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map'

[23:44:44 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - - - 200 318045 text/plain 33.4410ms

[23:44:44 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css.map'. Physical path: '/app/wwwroot/lib/bootstrap/dist/css/bootstrap.min.css.map'

[23:44:44 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/lib/bootstrap/dist/css/bootstrap.min.css.map - - - 200 641867 text/plain 31.1911ms

[23:45:05 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/connect/authorize?client_id=Starter.Bff&redirect_uri=https%3A%2F%2Flocalhost%2Fsignin-oidc&response_type=code&scope=openid%20profile%20Starter.Api%20offline_access&code_challenge=9dU6tpu1HGxxVVBPN4QpQnIT_ASVtXr05VR2FkWCZMM&code_challenge_method=S256&response_mode=form_post&nonce=638025975056318409.OTA1ODg3YWItOWFhYS00NzQyLWExNmYtYmU0OTJjYmVhZjBjMWYxMDdmMmMtMzgwYy00NDJkLTljZjgtMDc4ZTIwNzQxOWY5&state=CfDJ8NlCXmldZLBHsAViIel-sLwjtg6Qp5UG-TWRvZRs9-wNPi37YfJDJZenX4wEulBhsZP8vnAk-9vNcTxRFhFCMxwN4qClbr99sxJ0RcIjD5eZr1OWCelpld7soYicV2QNof_PsvcZLVHVKl2oeMd3EfABl3cCFoOl112WavLh6tEmuKRdd9UxvBB4qRcT3l9eqXIIaIZ_9eKf-x5i1XH-QSzCQy1DAVgIN8sLfjRPy0ToyT_mJVlInDLcpS_4cQTgDCG-8QqixJBpYOkFmZcIFo-B6_xnMqA5CWex4eT8XGBDWV-V6Hf0t-N3ePXtsWG17GjbGDHDOtEae3ad6QoT5beeQS1Pm8a8CpzRLp9iDVfNiHWYBcoVsizVFXBr3UNn9HzIOWUQqK5Q0btxsQLrZAY&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.7.1.0 - -

[23:45:05 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService
CORS policy execution successful.

[23:45:05 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware
No CORS policy found for the specified request.

[23:45:05 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:45:05 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:45:05 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /connect/authorize matched to endpoint type Authorize

[23:45:05 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint

[23:45:05 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize

[23:45:05 Debug] IdentityServer4.Endpoints.AuthorizeEndpoint
Start authorize request

[23:45:05 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:45:05 Debug] IdentityServer4.Endpoints.AuthorizeEndpoint
No user present in authorize request

[23:45:05 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Start authorize request protocol validation

[23:45:05 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:45:05 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Checking for PKCE parameters

[23:45:05 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator

[23:45:05 Debug] IdentityServer4.Endpoints.AuthorizeEndpoint
ValidatedAuthorizeRequest
{"ClientId":"Starter.Bff","ClientName":null,"RedirectUri":"https://localhost/signin-oidc","AllowedRedirectUris":["https://localhost/signin-oidc","https://bff:5005/signin-oidc","https://localhost/loggedin"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile Starter.Api offline_access","State":"CfDJ8NlCXmldZLBHsAViIel-sLwjtg6Qp5UG-TWRvZRs9-wNPi37YfJDJZenX4wEulBhsZP8vnAk-9vNcTxRFhFCMxwN4qClbr99sxJ0RcIjD5eZr1OWCelpld7soYicV2QNof_PsvcZLVHVKl2oeMd3EfABl3cCFoOl112WavLh6tEmuKRdd9UxvBB4qRcT3l9eqXIIaIZ_9eKf-x5i1XH-QSzCQy1DAVgIN8sLfjRPy0ToyT_mJVlInDLcpS_4cQTgDCG-8QqixJBpYOkFmZcIFo-B6_xnMqA5CWex4eT8XGBDWV-V6Hf0t-N3ePXtsWG17GjbGDHDOtEae3ad6QoT5beeQS1Pm8a8CpzRLp9iDVfNiHWYBcoVsizVFXBr3UNn9HzIOWUQqK5Q0btxsQLrZAY","UiLocales":null,"Nonce":"638025975056318409.OTA1ODg3YWItOWFhYS00NzQyLWExNmYtYmU0OTJjYmVhZjBjMWYxMDdmMmMtMzgwYy00NDJkLTljZjgtMDc4ZTIwNzQxOWY5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"Starter.Bff","redirect_uri":"https://localhost/signin-oidc","response_type":"code","scope":"openid profile Starter.Api offline_access","code_challenge":"9dU6tpu1HGxxVVBPN4QpQnIT_ASVtXr05VR2FkWCZMM","code_challenge_method":"S256","response_mode":"form_post","nonce":"638025975056318409.OTA1ODg3YWItOWFhYS00NzQyLWExNmYtYmU0OTJjYmVhZjBjMWYxMDdmMmMtMzgwYy00NDJkLTljZjgtMDc4ZTIwNzQxOWY5","state":"CfDJ8NlCXmldZLBHsAViIel-sLwjtg6Qp5UG-TWRvZRs9-wNPi37YfJDJZenX4wEulBhsZP8vnAk-9vNcTxRFhFCMxwN4qClbr99sxJ0RcIjD5eZr1OWCelpld7soYicV2QNof_PsvcZLVHVKl2oeMd3EfABl3cCFoOl112WavLh6tEmuKRdd9UxvBB4qRcT3l9eqXIIaIZ_9eKf-x5i1XH-QSzCQy1DAVgIN8sLfjRPy0ToyT_mJVlInDLcpS_4cQTgDCG-8QqixJBpYOkFmZcIFo-B6_xnMqA5CWex4eT8XGBDWV-V6Hf0t-N3ePXtsWG17GjbGDHDOtEae3ad6QoT5beeQS1Pm8a8CpzRLp9iDVfNiHWYBcoVsizVFXBr3UNn9HzIOWUQqK5Q0btxsQLrZAY","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}

[23:45:05 Information] IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator
Showing login: User is not authenticated

[23:45:05 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/connect/authorize?client_id=Starter.Bff&redirect_uri=https%3A%2F%2Flocalhost%2Fsignin-oidc&response_type=code&scope=openid%20profile%20Starter.Api%20offline_access&code_challenge=9dU6tpu1HGxxVVBPN4QpQnIT_ASVtXr05VR2FkWCZMM&code_challenge_method=S256&response_mode=form_post&nonce=638025975056318409.OTA1ODg3YWItOWFhYS00NzQyLWExNmYtYmU0OTJjYmVhZjBjMWYxMDdmMmMtMzgwYy00NDJkLTljZjgtMDc4ZTIwNzQxOWY5&state=CfDJ8NlCXmldZLBHsAViIel-sLwjtg6Qp5UG-TWRvZRs9-wNPi37YfJDJZenX4wEulBhsZP8vnAk-9vNcTxRFhFCMxwN4qClbr99sxJ0RcIjD5eZr1OWCelpld7soYicV2QNof_PsvcZLVHVKl2oeMd3EfABl3cCFoOl112WavLh6tEmuKRdd9UxvBB4qRcT3l9eqXIIaIZ_9eKf-x5i1XH-QSzCQy1DAVgIN8sLfjRPy0ToyT_mJVlInDLcpS_4cQTgDCG-8QqixJBpYOkFmZcIFo-B6_xnMqA5CWex4eT8XGBDWV-V6Hf0t-N3ePXtsWG17GjbGDHDOtEae3ad6QoT5beeQS1Pm8a8CpzRLp9iDVfNiHWYBcoVsizVFXBr3UNn9HzIOWUQqK5Q0btxsQLrZAY&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.7.1.0 - - - 302 0 - 9.2363ms

[23:45:05 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3DStarter.Bff%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520Starter.Api%2520offline_access%26code_challenge%3D9dU6tpu1HGxxVVBPN4QpQnIT_ASVtXr05VR2FkWCZMM%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D638025975056318409.OTA1ODg3YWItOWFhYS00NzQyLWExNmYtYmU0OTJjYmVhZjBjMWYxMDdmMmMtMzgwYy00NDJkLTljZjgtMDc4ZTIwNzQxOWY5%26state%3DCfDJ8NlCXmldZLBHsAViIel-sLwjtg6Qp5UG-TWRvZRs9-wNPi37YfJDJZenX4wEulBhsZP8vnAk-9vNcTxRFhFCMxwN4qClbr99sxJ0RcIjD5eZr1OWCelpld7soYicV2QNof_PsvcZLVHVKl2oeMd3EfABl3cCFoOl112WavLh6tEmuKRdd9UxvBB4qRcT3l9eqXIIaIZ_9eKf-x5i1XH-QSzCQy1DAVgIN8sLfjRPy0ToyT_mJVlInDLcpS_4cQTgDCG-8QqixJBpYOkFmZcIFo-B6_xnMqA5CWex4eT8XGBDWV-V6Hf0t-N3ePXtsWG17GjbGDHDOtEae3ad6QoT5beeQS1Pm8a8CpzRLp9iDVfNiHWYBcoVsizVFXBr3UNn9HzIOWUQqK5Q0btxsQLrZAY%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.7.1.0 - -

[23:45:05 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService
CORS policy execution successful.

[23:45:05 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware
No CORS policy found for the specified request.

[23:45:05 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:45:05 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:45:05 Information] Microsoft.AspNetCore.Routing.EndpointMiddleware
Executing endpoint 'Starter.Idp.Controllers.Account.AccountController.Login (IDP)'

[23:45:05 Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker
Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller Starter.Idp.Controllers.Account.AccountController (IDP).

[23:45:05 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:45:05 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Start authorize request protocol validation

[23:45:05 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:45:05 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Checking for PKCE parameters

[23:45:05 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator

[23:45:05 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:45:05 Information] Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor
Executing ViewResult, running view Login.

[23:45:05 Information] Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor
Executed ViewResult - view Login executed in 4.1908ms.

[23:45:05 Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker
Executed action Starter.Idp.Controllers.Account.AccountController.Login (IDP) in 7.6469ms

[23:45:05 Information] Microsoft.AspNetCore.Routing.EndpointMiddleware
Executed endpoint 'Starter.Idp.Controllers.Account.AccountController.Login (IDP)'

[23:45:05 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3DStarter.Bff%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520Starter.Api%2520offline_access%26code_challenge%3D9dU6tpu1HGxxVVBPN4QpQnIT_ASVtXr05VR2FkWCZMM%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D638025975056318409.OTA1ODg3YWItOWFhYS00NzQyLWExNmYtYmU0OTJjYmVhZjBjMWYxMDdmMmMtMzgwYy00NDJkLTljZjgtMDc4ZTIwNzQxOWY5%26state%3DCfDJ8NlCXmldZLBHsAViIel-sLwjtg6Qp5UG-TWRvZRs9-wNPi37YfJDJZenX4wEulBhsZP8vnAk-9vNcTxRFhFCMxwN4qClbr99sxJ0RcIjD5eZr1OWCelpld7soYicV2QNof_PsvcZLVHVKl2oeMd3EfABl3cCFoOl112WavLh6tEmuKRdd9UxvBB4qRcT3l9eqXIIaIZ_9eKf-x5i1XH-QSzCQy1DAVgIN8sLfjRPy0ToyT_mJVlInDLcpS_4cQTgDCG-8QqixJBpYOkFmZcIFo-B6_xnMqA5CWex4eT8XGBDWV-V6Hf0t-N3ePXtsWG17GjbGDHDOtEae3ad6QoT5beeQS1Pm8a8CpzRLp9iDVfNiHWYBcoVsizVFXBr3UNn9HzIOWUQqK5Q0btxsQLrZAY%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.7.1.0 - - - 200 - text/html;+charset=utf-8 12.3232ms

[23:45:05 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/lib/bootstrap/dist/css/bootstrap.min.css - -

[23:45:05 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/css/site.css - -

[23:45:05 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css'. Physical path: '/app/wwwroot/lib/bootstrap/dist/css/bootstrap.min.css'

[23:45:05 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/lib/bootstrap/dist/css/bootstrap.min.css - - - 200 159515 text/css 28.5878ms

[23:45:05 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/css/site.css'. Physical path: '/app/wwwroot/css/site.css'

[23:45:05 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/css/site.css - - - 200 497 text/css 13.4793ms

[23:45:05 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/lib/bootstrap/dist/css/bootstrap.min.css.map - -

[23:45:05 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - -

[23:45:05 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map'. Physical path: '/app/wwwroot/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map'

[23:45:05 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - - - 200 318045 text/plain 20.0913ms

[23:45:05 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css.map'. Physical path: '/app/wwwroot/lib/bootstrap/dist/css/bootstrap.min.css.map'

[23:45:05 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/lib/bootstrap/dist/css/bootstrap.min.css.map - - - 200 641867 text/plain 52.4344ms

[23:45:13 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 POST https://localhost/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3DStarter.Bff%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520Starter.Api%2520offline_access%26code_challenge%3D9dU6tpu1HGxxVVBPN4QpQnIT_ASVtXr05VR2FkWCZMM%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D638025975056318409.OTA1ODg3YWItOWFhYS00NzQyLWExNmYtYmU0OTJjYmVhZjBjMWYxMDdmMmMtMzgwYy00NDJkLTljZjgtMDc4ZTIwNzQxOWY5%26state%3DCfDJ8NlCXmldZLBHsAViIel-sLwjtg6Qp5UG-TWRvZRs9-wNPi37YfJDJZenX4wEulBhsZP8vnAk-9vNcTxRFhFCMxwN4qClbr99sxJ0RcIjD5eZr1OWCelpld7soYicV2QNof_PsvcZLVHVKl2oeMd3EfABl3cCFoOl112WavLh6tEmuKRdd9UxvBB4qRcT3l9eqXIIaIZ_9eKf-x5i1XH-QSzCQy1DAVgIN8sLfjRPy0ToyT_mJVlInDLcpS_4cQTgDCG-8QqixJBpYOkFmZcIFo-B6_xnMqA5CWex4eT8XGBDWV-V6Hf0t-N3ePXtsWG17GjbGDHDOtEae3ad6QoT5beeQS1Pm8a8CpzRLp9iDVfNiHWYBcoVsizVFXBr3UNn9HzIOWUQqK5Q0btxsQLrZAY%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.7.1.0 application/x-www-form-urlencoded 1198

[23:45:13 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService
CORS policy execution successful.

[23:45:13 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware
No CORS policy found for the specified request.

[23:45:13 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:45:13 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:45:13 Information] Microsoft.AspNetCore.Routing.EndpointMiddleware
Executing endpoint 'Starter.Idp.Controllers.Account.AccountController.Login (IDP)'

[23:45:13 Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker
Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Starter.Idp.Models.Account.LoginInputModel, System.String) on controller Starter.Idp.Controllers.Account.AccountController (IDP).

[23:45:13 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:45:13 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Start authorize request protocol validation

[23:45:13 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:45:13 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Checking for PKCE parameters

[23:45:13 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator

[23:45:13 Information] Microsoft.EntityFrameworkCore.Infrastructure
Entity Framework Core 5.0.8 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None

[23:45:13 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0

[23:45:13 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0

[23:45:13 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0

[23:45:13 Debug] IdentityServer4.Hosting.IdentityServerAuthenticationService
Augmenting SignInContext

[23:45:13 Debug] IdentityServer4.Hosting.IdentityServerAuthenticationService
Adding idp claim with value: local

[23:45:13 Debug] IdentityServer4.Hosting.IdentityServerAuthenticationService
Adding auth_time claim with value: 1667000713

[23:45:13 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:45:13 Information] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application signed in.

[23:45:13 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0

[23:45:13 Information] IdentityServer4.Events.DefaultEventService
{"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"4","DisplayName":"bob","Endpoint":"UI","ClientId":"Starter.Bff","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMLP7IIHD89O:00000002","TimeStamp":"2022-10-28T23:45:13.0000000Z","ProcessId":149,"LocalIpAddress":"172.18.0.4:5007","RemoteIpAddress":"172.18.0.1","$type":"UserLoginSuccessEvent"}

[23:45:13 Information] Microsoft.AspNetCore.Mvc.Infrastructure.RedirectResultExecutor
Executing RedirectResult, redirecting to /connect/authorize/callback?client_id=Starter.Bff&redirect_uri=https%3A%2F%2Flocalhost%2Fsignin-oidc&response_type=code&scope=openid%20profile%20Starter.Api%20offline_access&code_challenge=9dU6tpu1HGxxVVBPN4QpQnIT_ASVtXr05VR2FkWCZMM&code_challenge_method=S256&response_mode=form_post&nonce=638025975056318409.OTA1ODg3YWItOWFhYS00NzQyLWExNmYtYmU0OTJjYmVhZjBjMWYxMDdmMmMtMzgwYy00NDJkLTljZjgtMDc4ZTIwNzQxOWY5&state=CfDJ8NlCXmldZLBHsAViIel-sLwjtg6Qp5UG-TWRvZRs9-wNPi37YfJDJZenX4wEulBhsZP8vnAk-9vNcTxRFhFCMxwN4qClbr99sxJ0RcIjD5eZr1OWCelpld7soYicV2QNof_PsvcZLVHVKl2oeMd3EfABl3cCFoOl112WavLh6tEmuKRdd9UxvBB4qRcT3l9eqXIIaIZ_9eKf-x5i1XH-QSzCQy1DAVgIN8sLfjRPy0ToyT_mJVlInDLcpS_4cQTgDCG-8QqixJBpYOkFmZcIFo-B6_xnMqA5CWex4eT8XGBDWV-V6Hf0t-N3ePXtsWG17GjbGDHDOtEae3ad6QoT5beeQS1Pm8a8CpzRLp9iDVfNiHWYBcoVsizVFXBr3UNn9HzIOWUQqK5Q0btxsQLrZAY&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.7.1.0.

[23:45:13 Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker
Executed action Starter.Idp.Controllers.Account.AccountController.Login (IDP) in 33.3362ms

[23:45:13 Information] Microsoft.AspNetCore.Routing.EndpointMiddleware
Executed endpoint 'Starter.Idp.Controllers.Account.AccountController.Login (IDP)'

[23:45:13 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 POST https://localhost/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3DStarter.Bff%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520Starter.Api%2520offline_access%26code_challenge%3D9dU6tpu1HGxxVVBPN4QpQnIT_ASVtXr05VR2FkWCZMM%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D638025975056318409.OTA1ODg3YWItOWFhYS00NzQyLWExNmYtYmU0OTJjYmVhZjBjMWYxMDdmMmMtMzgwYy00NDJkLTljZjgtMDc4ZTIwNzQxOWY5%26state%3DCfDJ8NlCXmldZLBHsAViIel-sLwjtg6Qp5UG-TWRvZRs9-wNPi37YfJDJZenX4wEulBhsZP8vnAk-9vNcTxRFhFCMxwN4qClbr99sxJ0RcIjD5eZr1OWCelpld7soYicV2QNof_PsvcZLVHVKl2oeMd3EfABl3cCFoOl112WavLh6tEmuKRdd9UxvBB4qRcT3l9eqXIIaIZ_9eKf-x5i1XH-QSzCQy1DAVgIN8sLfjRPy0ToyT_mJVlInDLcpS_4cQTgDCG-8QqixJBpYOkFmZcIFo-B6_xnMqA5CWex4eT8XGBDWV-V6Hf0t-N3ePXtsWG17GjbGDHDOtEae3ad6QoT5beeQS1Pm8a8CpzRLp9iDVfNiHWYBcoVsizVFXBr3UNn9HzIOWUQqK5Q0btxsQLrZAY%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.7.1.0 application/x-www-form-urlencoded 1198 - 302 0 - 38.0219ms

[23:45:13 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/connect/authorize/callback?client_id=Starter.Bff&redirect_uri=https%3A%2F%2Flocalhost%2Fsignin-oidc&response_type=code&scope=openid%20profile%20Starter.Api%20offline_access&code_challenge=9dU6tpu1HGxxVVBPN4QpQnIT_ASVtXr05VR2FkWCZMM&code_challenge_method=S256&response_mode=form_post&nonce=638025975056318409.OTA1ODg3YWItOWFhYS00NzQyLWExNmYtYmU0OTJjYmVhZjBjMWYxMDdmMmMtMzgwYy00NDJkLTljZjgtMDc4ZTIwNzQxOWY5&state=CfDJ8NlCXmldZLBHsAViIel-sLwjtg6Qp5UG-TWRvZRs9-wNPi37YfJDJZenX4wEulBhsZP8vnAk-9vNcTxRFhFCMxwN4qClbr99sxJ0RcIjD5eZr1OWCelpld7soYicV2QNof_PsvcZLVHVKl2oeMd3EfABl3cCFoOl112WavLh6tEmuKRdd9UxvBB4qRcT3l9eqXIIaIZ_9eKf-x5i1XH-QSzCQy1DAVgIN8sLfjRPy0ToyT_mJVlInDLcpS_4cQTgDCG-8QqixJBpYOkFmZcIFo-B6_xnMqA5CWex4eT8XGBDWV-V6Hf0t-N3ePXtsWG17GjbGDHDOtEae3ad6QoT5beeQS1Pm8a8CpzRLp9iDVfNiHWYBcoVsizVFXBr3UNn9HzIOWUQqK5Q0btxsQLrZAY&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.7.1.0 - -

[23:45:13 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService
CORS policy execution successful.

[23:45:13 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware
No CORS policy found for the specified request.

[23:45:13 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was successfully authenticated.

[23:45:13 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was successfully authenticated.

[23:45:13 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /connect/authorize/callback matched to endpoint type Authorize

[23:45:13 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint

[23:45:13 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback

[23:45:13 Debug] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
Start authorize callback request

[23:45:13 Debug] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
User in authorize request: 4

[23:45:13 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Start authorize request protocol validation

[23:45:13 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:45:13 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Checking for PKCE parameters

[23:45:13 Debug] IdentityServer4.Validation.AuthorizeRequestValidator
Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator

[23:45:13 Debug] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
ValidatedAuthorizeRequest
{"ClientId":"Starter.Bff","ClientName":null,"RedirectUri":"https://localhost/signin-oidc","AllowedRedirectUris":["https://localhost/signin-oidc","https://bff:5005/signin-oidc","https://localhost/loggedin"],"SubjectId":"4","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile Starter.Api offline_access","State":"CfDJ8NlCXmldZLBHsAViIel-sLwjtg6Qp5UG-TWRvZRs9-wNPi37YfJDJZenX4wEulBhsZP8vnAk-9vNcTxRFhFCMxwN4qClbr99sxJ0RcIjD5eZr1OWCelpld7soYicV2QNof_PsvcZLVHVKl2oeMd3EfABl3cCFoOl112WavLh6tEmuKRdd9UxvBB4qRcT3l9eqXIIaIZ_9eKf-x5i1XH-QSzCQy1DAVgIN8sLfjRPy0ToyT_mJVlInDLcpS_4cQTgDCG-8QqixJBpYOkFmZcIFo-B6_xnMqA5CWex4eT8XGBDWV-V6Hf0t-N3ePXtsWG17GjbGDHDOtEae3ad6QoT5beeQS1Pm8a8CpzRLp9iDVfNiHWYBcoVsizVFXBr3UNn9HzIOWUQqK5Q0btxsQLrZAY","UiLocales":null,"Nonce":"638025975056318409.OTA1ODg3YWItOWFhYS00NzQyLWExNmYtYmU0OTJjYmVhZjBjMWYxMDdmMmMtMzgwYy00NDJkLTljZjgtMDc4ZTIwNzQxOWY5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"9B89B5C2991689FC7560CF7355FDF59E","Raw":{"client_id":"Starter.Bff","redirect_uri":"https://localhost/signin-oidc","response_type":"code","scope":"openid profile Starter.Api offline_access","code_challenge":"9dU6tpu1HGxxVVBPN4QpQnIT_ASVtXr05VR2FkWCZMM","code_challenge_method":"S256","response_mode":"form_post","nonce":"638025975056318409.OTA1ODg3YWItOWFhYS00NzQyLWExNmYtYmU0OTJjYmVhZjBjMWYxMDdmMmMtMzgwYy00NDJkLTljZjgtMDc4ZTIwNzQxOWY5","state":"CfDJ8NlCXmldZLBHsAViIel-sLwjtg6Qp5UG-TWRvZRs9-wNPi37YfJDJZenX4wEulBhsZP8vnAk-9vNcTxRFhFCMxwN4qClbr99sxJ0RcIjD5eZr1OWCelpld7soYicV2QNof_PsvcZLVHVKl2oeMd3EfABl3cCFoOl112WavLh6tEmuKRdd9UxvBB4qRcT3l9eqXIIaIZ_9eKf-x5i1XH-QSzCQy1DAVgIN8sLfjRPy0ToyT_mJVlInDLcpS_4cQTgDCG-8QqixJBpYOkFmZcIFo-B6_xnMqA5CWex4eT8XGBDWV-V6Hf0t-N3ePXtsWG17GjbGDHDOtEae3ad6QoT5beeQS1Pm8a8CpzRLp9iDVfNiHWYBcoVsizVFXBr3UNn9HzIOWUQqK5Q0btxsQLrZAY","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}

[23:45:13 Information] Microsoft.EntityFrameworkCore.Infrastructure
Entity Framework Core 5.0.8 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None

[23:45:13 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0

[23:45:13 Debug] IdentityServer4.Services.DefaultConsentService
Client is configured to not require consent, no consent is required

[23:45:13 Debug] IdentityServer4.ResponseHandling.AuthorizeResponseGenerator
Creating Authorization Code Flow response.

[23:45:13 Information] IdentityServer4.Events.DefaultEventService
{"ClientId":"Starter.Bff","ClientName":null,"RedirectUri":"https://localhost/signin-oidc","Endpoint":"Authorize","SubjectId":"4","Scopes":"openid profile Starter.Api offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****591F","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMLP7IIHD89P:00000002","TimeStamp":"2022-10-28T23:45:13.0000000Z","ProcessId":149,"LocalIpAddress":"172.18.0.4:5007","RemoteIpAddress":"172.18.0.1","$type":"TokenIssuedSuccessEvent"}

[23:45:13 Debug] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
Authorize endpoint response
{"SubjectId":"4","ClientId":"Starter.Bff","RedirectUri":"https://localhost/signin-oidc","State":"CfDJ8NlCXmldZLBHsAViIel-sLwjtg6Qp5UG-TWRvZRs9-wNPi37YfJDJZenX4wEulBhsZP8vnAk-9vNcTxRFhFCMxwN4qClbr99sxJ0RcIjD5eZr1OWCelpld7soYicV2QNof_PsvcZLVHVKl2oeMd3EfABl3cCFoOl112WavLh6tEmuKRdd9UxvBB4qRcT3l9eqXIIaIZ_9eKf-x5i1XH-QSzCQy1DAVgIN8sLfjRPy0ToyT_mJVlInDLcpS_4cQTgDCG-8QqixJBpYOkFmZcIFo-B6_xnMqA5CWex4eT8XGBDWV-V6Hf0t-N3ePXtsWG17GjbGDHDOtEae3ad6QoT5beeQS1Pm8a8CpzRLp9iDVfNiHWYBcoVsizVFXBr3UNn9HzIOWUQqK5Q0btxsQLrZAY","Scope":"openid profile Starter.Api offline_access","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}

[23:45:13 Debug] IdentityServer4.Hosting.IdentityServerAuthenticationService
Augmenting SignInContext

[23:45:13 Information] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application signed in.

[23:45:13 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/connect/authorize/callback?client_id=Starter.Bff&redirect_uri=https%3A%2F%2Flocalhost%2Fsignin-oidc&response_type=code&scope=openid%20profile%20Starter.Api%20offline_access&code_challenge=9dU6tpu1HGxxVVBPN4QpQnIT_ASVtXr05VR2FkWCZMM&code_challenge_method=S256&response_mode=form_post&nonce=638025975056318409.OTA1ODg3YWItOWFhYS00NzQyLWExNmYtYmU0OTJjYmVhZjBjMWYxMDdmMmMtMzgwYy00NDJkLTljZjgtMDc4ZTIwNzQxOWY5&state=CfDJ8NlCXmldZLBHsAViIel-sLwjtg6Qp5UG-TWRvZRs9-wNPi37YfJDJZenX4wEulBhsZP8vnAk-9vNcTxRFhFCMxwN4qClbr99sxJ0RcIjD5eZr1OWCelpld7soYicV2QNof_PsvcZLVHVKl2oeMd3EfABl3cCFoOl112WavLh6tEmuKRdd9UxvBB4qRcT3l9eqXIIaIZ_9eKf-x5i1XH-QSzCQy1DAVgIN8sLfjRPy0ToyT_mJVlInDLcpS_4cQTgDCG-8QqixJBpYOkFmZcIFo-B6_xnMqA5CWex4eT8XGBDWV-V6Hf0t-N3ePXtsWG17GjbGDHDOtEae3ad6QoT5beeQS1Pm8a8CpzRLp9iDVfNiHWYBcoVsizVFXBr3UNn9HzIOWUQqK5Q0btxsQLrZAY&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.7.1.0 - - - 200 - text/html;+charset=UTF-8 16.9213ms

[23:45:13 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.1 POST http://idp:5006/connect/token application/x-www-form-urlencoded 251

[23:45:13 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:45:13 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:45:13 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /connect/token matched to endpoint type Token

[23:45:13 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint

[23:45:13 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token

[23:45:13 Debug] IdentityServer4.Endpoints.TokenEndpoint
Start token request.

[23:45:13 Debug] IdentityServer4.Validation.ClientSecretValidator
Start client validation

[23:45:13 Debug] IdentityServer4.Validation.BasicAuthenticationSecretParser
Start parsing Basic Authentication secret

[23:45:13 Debug] IdentityServer4.Validation.PostBodySecretParser
Start parsing for secret in post body

[23:45:13 Debug] IdentityServer4.Validation.ISecretsListParser
Parser found secret: PostBodySecretParser

[23:45:13 Debug] IdentityServer4.Validation.ISecretsListParser
Secret id found: Starter.Bff

[23:45:13 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:45:13 Debug] IdentityServer4.Validation.ISecretsListValidator
Secret validator success: HashedSharedSecretValidator

[23:45:13 Debug] IdentityServer4.Validation.ClientSecretValidator
Client validation success

[23:45:13 Information] IdentityServer4.Events.DefaultEventService
{"ClientId":"Starter.Bff","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMLP7IIHD89Q:00000002","TimeStamp":"2022-10-28T23:45:13.0000000Z","ProcessId":149,"LocalIpAddress":"172.18.0.4:5006","RemoteIpAddress":"172.18.0.5","$type":"ClientAuthenticationSuccessEvent"}

[23:45:13 Debug] IdentityServer4.Validation.TokenRequestValidator
Start token request validation

[23:45:13 Debug] IdentityServer4.Validation.TokenRequestValidator
Start validation of authorization code token request

[23:45:13 Debug] IdentityServer4.Validation.TokenRequestValidator
Client required a proof key for code exchange. Starting PKCE validation

[23:45:13 Information] Microsoft.EntityFrameworkCore.Infrastructure
Entity Framework Core 5.0.8 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None

[23:45:13 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0

[23:45:13 Debug] IdentityServer4.Validation.TokenRequestValidator
Validation of authorization code token request success

[23:45:13 Information] IdentityServer4.Validation.TokenRequestValidator
Token request validation success, {"ClientId":"Starter.Bff","ClientName":null,"GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****591F","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"Starter.Bff","client_secret":"***REDACTED***","code":"94036ECAA4178E0F3E0B62FBA0946AB1C3AAE73AD3ED9192B570609015DE591F","grant_type":"authorization_code","redirect_uri":"https://localhost/signin-oidc","code_verifier":"YXKrYDufxm-QV2xUkbcnUAn4c8jMMax-8B9y14nqwM0"},"$type":"TokenRequestValidationLog"}

[23:45:13 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:45:13 Debug] IdentityServer4.Services.DefaultClaimsService
Getting claims for access token for client: Starter.Bff

[23:45:13 Debug] IdentityServer4.Services.DefaultClaimsService
Getting claims for access token for subject: 4

[23:45:13 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0

[23:45:13 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0

[23:45:13 Debug] IdentityServer4.Services.DefaultRefreshTokenService
Creating refresh token

[23:45:13 Debug] IdentityServer4.Services.DefaultRefreshTokenService
Setting an absolute lifetime: 2592000

[23:45:13 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:45:13 Debug] IdentityServer4.Services.DefaultClaimsService
Getting claims for identity token for subject: 4 and client: Starter.Bff

[23:45:13 Debug] IdentityServer4.Services.DefaultClaimsService
In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.

[23:45:13 Information] IdentityServer4.Events.DefaultEventService
{"ClientId":"Starter.Bff","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4","Scopes":"openid profile Starter.Api offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****ucHA","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****0F54","$type":"Token"},{"TokenType":"access_token","TokenValue":"****_xnw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMLP7IIHD89Q:00000002","TimeStamp":"2022-10-28T23:45:13.0000000Z","ProcessId":149,"LocalIpAddress":"172.18.0.4:5006","RemoteIpAddress":"172.18.0.5","$type":"TokenIssuedSuccessEvent"}

[23:45:13 Debug] IdentityServer4.Endpoints.TokenEndpoint
Token request success.

[23:45:13 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.1 POST http://idp:5006/connect/token application/x-www-form-urlencoded 251 - 200 - application/json;+charset=UTF-8 42.6335ms

[23:45:13 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.1 GET http://idp:5006/connect/userinfo - -

[23:45:13 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:45:13 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:45:13 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /connect/userinfo matched to endpoint type Userinfo

[23:45:13 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint

[23:45:13 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo

[23:45:13 Debug] IdentityServer4.Endpoints.UserInfoEndpoint
Start userinfo request

[23:45:13 Debug] IdentityServer4.Validation.BearerTokenUsageValidator
Bearer token found in header

[23:45:13 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:45:13 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:45:13 Information] Microsoft.EntityFrameworkCore.Infrastructure
Entity Framework Core 5.0.8 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None

[23:45:13 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0

[23:45:13 Debug] IdentityServer4.Validation.TokenValidator
Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator

[23:45:13 Debug] IdentityServer4.Validation.TokenValidator
Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"AAEEB18380C10BEE9A0DE11467903AAC","Claims":{"nbf":1667000713,"exp":1667004313,"iss":"https://localhost","aud":["starter.api","https://localhost/resources"],"client_id":"Starter.Bff","sub":"4","auth_time":1667000713,"idp":"local","jti":"AAEEB18380C10BEE9A0DE11467903AAC","sid":"9B89B5C2991689FC7560CF7355FDF59E","iat":1667000713,"scope":["openid","profile","Starter.Api","offline_access"],"amr":"pwd"},"$type":"TokenValidationLog"}

[23:45:13 Debug] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Creating userinfo response

[23:45:13 Debug] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Scopes in access token: openid profile Starter.Api offline_access

[23:45:13 Debug] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at

[23:45:13 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0

[23:45:13 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0

[23:45:13 Information] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Profile service returned the following claim types: sub website family_name given_name name preferred_username

[23:45:13 Debug] IdentityServer4.Endpoints.UserInfoEndpoint
End userinfo request

[23:45:13 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.1 GET http://idp:5006/connect/userinfo - - - 200 - application/json;+charset=UTF-8 17.5458ms

[23:45:14 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.1 GET http://idp:5006/connect/userinfo - -

[23:45:14 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:45:14 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:45:14 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /connect/userinfo matched to endpoint type Userinfo

[23:45:14 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint

[23:45:14 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo

[23:45:14 Debug] IdentityServer4.Endpoints.UserInfoEndpoint
Start userinfo request

[23:45:14 Debug] IdentityServer4.Validation.BearerTokenUsageValidator
Bearer token found in header

[23:45:14 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:45:14 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:45:14 Information] Microsoft.EntityFrameworkCore.Infrastructure
Entity Framework Core 5.0.8 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None

[23:45:14 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0

[23:45:14 Debug] IdentityServer4.Validation.TokenValidator
Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator

[23:45:14 Debug] IdentityServer4.Validation.TokenValidator
Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"AAEEB18380C10BEE9A0DE11467903AAC","Claims":{"nbf":1667000713,"exp":1667004313,"iss":"https://localhost","aud":["starter.api","https://localhost/resources"],"client_id":"Starter.Bff","sub":"4","auth_time":1667000713,"idp":"local","jti":"AAEEB18380C10BEE9A0DE11467903AAC","sid":"9B89B5C2991689FC7560CF7355FDF59E","iat":1667000713,"scope":["openid","profile","Starter.Api","offline_access"],"amr":"pwd"},"$type":"TokenValidationLog"}

[23:45:14 Debug] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Creating userinfo response

[23:45:14 Debug] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Scopes in access token: openid profile Starter.Api offline_access

[23:45:14 Debug] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at

[23:45:14 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0

[23:45:14 Information] Microsoft.EntityFrameworkCore.Database.Command
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0

[23:45:14 Information] IdentityServer4.ResponseHandling.UserInfoResponseGenerator
Profile service returned the following claim types: sub website family_name given_name name preferred_username

[23:45:14 Debug] IdentityServer4.Endpoints.UserInfoEndpoint
End userinfo request

[23:45:14 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.1 GET http://idp:5006/connect/userinfo - - - 200 - application/json;+charset=UTF-8 30.9249ms

[23:45:15 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/connect/endsession?post_logout_redirect_uri=https%3A%2F%2Flocalhost%2Fsignout-callback-oidc&id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6Ijg1RTc3MDAyODhFOUFCMkRBOEJFODA4QkEyREZGRTZDIiwidHlwIjoiSldUIn0.eyJuYmYiOjE2NjcwMDA3MTMsImV4cCI6MTY2NzAwMTAxMywiaXNzIjoiaHR0cHM6Ly9sb2NhbGhvc3QiLCJhdWQiOiJTdGFydGVyLkJmZiIsIm5vbmNlIjoiNjM4MDI1OTc1MDU2MzE4NDA5Lk9UQTFPRGczWVdJdE9XRmhZUzAwTnpReUxXRXhObVl0WW1VME9USmpZbVZoWmpCak1XWXhNRGRtTW1NdE16Z3dZeTAwTkRKa0xUbGpaamd0TURjNFpUSXdOelF4T1dZNSIsImlhdCI6MTY2NzAwMDcxMywiYXRfaGFzaCI6IlNKeFZUMGhMQXJZMEJVRVcwTFJtekEiLCJzX2hhc2giOiItMnIyS3VRZ0RHbGZfVkpoRVRYT1FnIiwic2lkIjoiOUI4OUI1QzI5OTE2ODlGQzc1NjBDRjczNTVGREY1OUUiLCJzdWIiOiI0IiwiYXV0aF90aW1lIjoxNjY3MDAwNzEzLCJpZHAiOiJsb2NhbCIsImFtciI6WyJwd2QiXX0.C3rrOVqFcjK3YCqujh9bGfSGXZXtmXNXy5pF7PwnYhz2pjSTU28eeXOhf5R6YQhTG06pYEOc1VTrxLefNJ33mfi-lppoyGYVSTZcdNEj55-BlpwB0M7_ftDYZOfTgxfoOPydG6k2sUyjZJsFr33TxwgGn0XhfJUU41-7sHjOF67XfRXDgccDR5cPpHgJIbjpQgC0_L-ra_U8HtmfVpu9L_0tsecG_U121H25L4ZlXQrPcGXwg0--ug81FNgZBOGYPk0UVNLVy7brdEezAA2YgiSPa6FlibTrylT2ObH1SoxM3MGK25Ch_CEIMb0r4OjMgxso28mIzRbMe2SM5IucHA&state=CfDJ8NlCXmldZLBHsAViIel-sLw_8-Hoh1hnphg8-MtMHoYzBD0IT50sQ585QFSqY817OxU11U5yUhvnt3HhVSkNwAme_MfAkk4SJTUTHzjYQVNRng2ca1uQ441wMfwxIM5v5DxvUJEu_QAED741hO2ukwTzQkkUhn35xrHRAlsBLHe4&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.7.1.0 - -

[23:45:15 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService
CORS policy execution successful.

[23:45:15 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware
No CORS policy found for the specified request.

[23:45:15 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was successfully authenticated.

[23:45:15 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was successfully authenticated.

[23:45:15 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /connect/endsession matched to endpoint type Endsession

[23:45:15 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint

[23:45:15 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession

[23:45:15 Debug] IdentityServer4.Endpoints.EndSessionEndpoint
Processing signout request for 4

[23:45:15 Debug] IdentityServer4.Validation.EndSessionRequestValidator
Start end session request validation

[23:45:15 Debug] IdentityServer4.Validation.TokenValidator
Start identity token validation

[23:45:15 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:45:15 Debug] IdentityServer4.Validation.TokenValidator
Client found: Starter.Bff / null

[23:45:15 Debug] IdentityServer4.Validation.TokenValidator
Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator

[23:45:15 Debug] IdentityServer4.Validation.TokenValidator
Token validation success
{"ClientId":"Starter.Bff","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1667000713,"exp":1667001013,"iss":"https://localhost","aud":"Starter.Bff","nonce":"638025975056318409.OTA1ODg3YWItOWFhYS00NzQyLWExNmYtYmU0OTJjYmVhZjBjMWYxMDdmMmMtMzgwYy00NDJkLTljZjgtMDc4ZTIwNzQxOWY5","iat":1667000713,"at_hash":"SJxVT0hLArY0BUEW0LRmzA","s_hash":"-2r2KuQgDGlf_VJhETXOQg","sid":"9B89B5C2991689FC7560CF7355FDF59E","sub":"4","auth_time":1667000713,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}

[23:45:15 Information] IdentityServer4.Validation.EndSessionRequestValidator
End session request validation success
{"ClientId":"Starter.Bff","ClientName":null,"SubjectId":"4","PostLogOutUri":"https://localhost/signout-callback-oidc","State":"CfDJ8NlCXmldZLBHsAViIel-sLw_8-Hoh1hnphg8-MtMHoYzBD0IT50sQ585QFSqY817OxU11U5yUhvnt3HhVSkNwAme_MfAkk4SJTUTHzjYQVNRng2ca1uQ441wMfwxIM5v5DxvUJEu_QAED741hO2ukwTzQkkUhn35xrHRAlsBLHe4","Raw":{"post_logout_redirect_uri":"https://localhost/signout-callback-oidc","id_token_hint":"***REDACTED***","state":"CfDJ8NlCXmldZLBHsAViIel-sLw_8-Hoh1hnphg8-MtMHoYzBD0IT50sQ585QFSqY817OxU11U5yUhvnt3HhVSkNwAme_MfAkk4SJTUTHzjYQVNRng2ca1uQ441wMfwxIM5v5DxvUJEu_QAED741hO2ukwTzQkkUhn35xrHRAlsBLHe4","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"EndSessionRequestValidationLog"}

[23:45:15 Debug] IdentityServer4.Endpoints.EndSessionEndpoint
Success validating end session request from Starter.Bff

[23:45:15 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/connect/endsession?post_logout_redirect_uri=https%3A%2F%2Flocalhost%2Fsignout-callback-oidc&id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6Ijg1RTc3MDAyODhFOUFCMkRBOEJFODA4QkEyREZGRTZDIiwidHlwIjoiSldUIn0.eyJuYmYiOjE2NjcwMDA3MTMsImV4cCI6MTY2NzAwMTAxMywiaXNzIjoiaHR0cHM6Ly9sb2NhbGhvc3QiLCJhdWQiOiJTdGFydGVyLkJmZiIsIm5vbmNlIjoiNjM4MDI1OTc1MDU2MzE4NDA5Lk9UQTFPRGczWVdJdE9XRmhZUzAwTnpReUxXRXhObVl0WW1VME9USmpZbVZoWmpCak1XWXhNRGRtTW1NdE16Z3dZeTAwTkRKa0xUbGpaamd0TURjNFpUSXdOelF4T1dZNSIsImlhdCI6MTY2NzAwMDcxMywiYXRfaGFzaCI6IlNKeFZUMGhMQXJZMEJVRVcwTFJtekEiLCJzX2hhc2giOiItMnIyS3VRZ0RHbGZfVkpoRVRYT1FnIiwic2lkIjoiOUI4OUI1QzI5OTE2ODlGQzc1NjBDRjczNTVGREY1OUUiLCJzdWIiOiI0IiwiYXV0aF90aW1lIjoxNjY3MDAwNzEzLCJpZHAiOiJsb2NhbCIsImFtciI6WyJwd2QiXX0.C3rrOVqFcjK3YCqujh9bGfSGXZXtmXNXy5pF7PwnYhz2pjSTU28eeXOhf5R6YQhTG06pYEOc1VTrxLefNJ33mfi-lppoyGYVSTZcdNEj55-BlpwB0M7_ftDYZOfTgxfoOPydG6k2sUyjZJsFr33TxwgGn0XhfJUU41-7sHjOF67XfRXDgccDR5cPpHgJIbjpQgC0_L-ra_U8HtmfVpu9L_0tsecG_U121H25L4ZlXQrPcGXwg0--ug81FNgZBOGYPk0UVNLVy7brdEezAA2YgiSPa6FlibTrylT2ObH1SoxM3MGK25Ch_CEIMb0r4OjMgxso28mIzRbMe2SM5IucHA&state=CfDJ8NlCXmldZLBHsAViIel-sLw_8-Hoh1hnphg8-MtMHoYzBD0IT50sQ585QFSqY817OxU11U5yUhvnt3HhVSkNwAme_MfAkk4SJTUTHzjYQVNRng2ca1uQ441wMfwxIM5v5DxvUJEu_QAED741hO2ukwTzQkkUhn35xrHRAlsBLHe4&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.7.1.0 - - - 302 0 - 19.0282ms

[23:45:15 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/Account/Logout?logoutId=CfDJ8Hang32hRfBDkNsasZEG-DEx39siCD41En9xq36brg_bkiPBI39pMjO2v5ED8qbLsKCnXOzERO0T9m_KZdpQxMyt6zkb8Vo8azbo-Ew62O3XbRN5GZ6-Zt_T3bXKRY5xf85B0qC7U_zPHMTU3pe8VFttSW4VZ2X5LTPrJtySzMydDRHNxCrkzbzVDzzdz7QDuiTW1NiAh8rd9dWnjEMaOp4sEjP4ooQhcg10B0w8G_sLwYMGbP-AescWw58vH9nRCJxQUct3WE_Ub16p9jdWhFAjB3xUDGuODDyIsjpbjwjLhMs_oLxLcO5gcx9-893SgqPbH9XTnvFeYLYi-uW8VJx_j0-c_tvIndUmgBGe3LK5ZKeJEEXy1xiB_AOs4SywtgKcEB4dGTKK6PDtwvlO56j0fmMcKHCXbgHKUgvNS5fotgUTo1c4AtUuE-nEZTECIPqiSXEJr_AX2RWm2m1AHUxzy-qWD5X7EzKyIRlOUIjUzILM2s7ilkQIbhVM-bpoIYelp9vVQ7bPXAcm8aC9gzid-oguSm3aMJE4H8F_2La55bnUTYSyk3MHfZPtq5so2PXFU2oiSauQviBXYD9fqUAxpa03MlTsV4c3ZZdIL7k0M9EL56yRSioZqRuIuTGXRH_8_I335VoPzXISWlGXqECz7n3YMwAZ-CAg6WZLoSyErC96AcJSL-qiKWrpYVlmD5e7KFCW4W-MFFT158bAbIn3v3Zx-D1HkzNxO-jUK-Gv2do_9D0fbC7DGkSmtrVmHA - -

[23:45:15 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService
CORS policy execution successful.

[23:45:15 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware
No CORS policy found for the specified request.

[23:45:15 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was successfully authenticated.

[23:45:15 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was successfully authenticated.

[23:45:15 Information] Microsoft.AspNetCore.Routing.EndpointMiddleware
Executing endpoint 'Starter.Idp.Controllers.Account.AccountController.Logout (IDP)'

[23:45:15 Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker
Route matched with {action = "Logout", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout(System.String) on controller Starter.Idp.Controllers.Account.AccountController (IDP).

[23:45:15 Information] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application signed out.

[23:45:15 Information] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.External signed out.

[23:45:15 Information] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.TwoFactorUserId signed out.

[23:45:15 Information] IdentityServer4.Events.DefaultEventService
{"SubjectId":"4","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HMLP7IIHD89T:00000002","TimeStamp":"2022-10-28T23:45:15.0000000Z","ProcessId":149,"LocalIpAddress":"172.18.0.4:5007","RemoteIpAddress":"172.18.0.1","$type":"UserLogoutSuccessEvent"}

[23:45:15 Information] Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor
Executing ViewResult, running view LoggedOut.

[23:45:15 Debug] IdentityServer4.Hosting.IdentityServerMiddleware
SignOutCalled set; processing post-signout session cleanup.

[23:45:15 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:45:15 Debug] IdentityServer4.Services.LogoutNotificationService
No client back-channel logout URLs

[23:45:15 Information] Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor
Executed ViewResult - view LoggedOut executed in 2.7283ms.

[23:45:15 Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker
Executed action Starter.Idp.Controllers.Account.AccountController.Logout (IDP) in 6.5973ms

[23:45:15 Information] Microsoft.AspNetCore.Routing.EndpointMiddleware
Executed endpoint 'Starter.Idp.Controllers.Account.AccountController.Logout (IDP)'

[23:45:15 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/Account/Logout?logoutId=CfDJ8Hang32hRfBDkNsasZEG-DEx39siCD41En9xq36brg_bkiPBI39pMjO2v5ED8qbLsKCnXOzERO0T9m_KZdpQxMyt6zkb8Vo8azbo-Ew62O3XbRN5GZ6-Zt_T3bXKRY5xf85B0qC7U_zPHMTU3pe8VFttSW4VZ2X5LTPrJtySzMydDRHNxCrkzbzVDzzdz7QDuiTW1NiAh8rd9dWnjEMaOp4sEjP4ooQhcg10B0w8G_sLwYMGbP-AescWw58vH9nRCJxQUct3WE_Ub16p9jdWhFAjB3xUDGuODDyIsjpbjwjLhMs_oLxLcO5gcx9-893SgqPbH9XTnvFeYLYi-uW8VJx_j0-c_tvIndUmgBGe3LK5ZKeJEEXy1xiB_AOs4SywtgKcEB4dGTKK6PDtwvlO56j0fmMcKHCXbgHKUgvNS5fotgUTo1c4AtUuE-nEZTECIPqiSXEJr_AX2RWm2m1AHUxzy-qWD5X7EzKyIRlOUIjUzILM2s7ilkQIbhVM-bpoIYelp9vVQ7bPXAcm8aC9gzid-oguSm3aMJE4H8F_2La55bnUTYSyk3MHfZPtq5so2PXFU2oiSauQviBXYD9fqUAxpa03MlTsV4c3ZZdIL7k0M9EL56yRSioZqRuIuTGXRH_8_I335VoPzXISWlGXqECz7n3YMwAZ-CAg6WZLoSyErC96AcJSL-qiKWrpYVlmD5e7KFCW4W-MFFT158bAbIn3v3Zx-D1HkzNxO-jUK-Gv2do_9D0fbC7DGkSmtrVmHA - - - 200 - text/html;+charset=utf-8 12.2608ms

[23:45:15 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/lib/bootstrap/dist/css/bootstrap.min.css - -

[23:45:15 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/css/site.css - -

[23:45:16 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/connect/endsession/callback?endSessionId=CfDJ8Hang32hRfBDkNsasZEG-DE9HjHUnnTrrZohQ9-_ezYH0XBdP6s44jhwkGXUUuqFMAj3sB1L2k9i6BKtb-7lDMcbNmV-Hs-QynawJEZq1MMO9NYKZvVJLK0Ph9MfaHDpf9MU4GCgW-A3seQ4n2QnTg-mTeIGCJlkdv-7ONb4pFOhXs35mbqp91SnwL7CbIsDpM_Pc3vXIasGHvqJZiwsLi5ybO9ugxl0UvafYEgGeVWDvp1QYhonV_LxIaQ7fkozZowlsxkKdeUGZz5WjSon3gf0AKhhZreh-M_Uy2m6Z-ww - -

[23:45:16 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService
CORS policy execution successful.

[23:45:16 Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware
No CORS policy found for the specified request.

[23:45:16 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:45:16 Debug] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler
AuthenticationScheme: Identity.Application was not authenticated.

[23:45:16 Debug] IdentityServer4.Hosting.EndpointRouter
Request path /connect/endsession/callback matched to endpoint type Endsession

[23:45:16 Debug] IdentityServer4.Hosting.EndpointRouter
Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint

[23:45:16 Information] IdentityServer4.Hosting.IdentityServerMiddleware
Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback

[23:45:16 Debug] IdentityServer4.Endpoints.EndSessionCallbackEndpoint
Processing signout callback request

[23:45:16 Debug] IdentityServer4.Stores.ValidatingClientStore
client configuration validation for client Starter.Bff succeeded.

[23:45:16 Debug] IdentityServer4.Services.LogoutNotificationService
No client front-channel logout URLs

[23:45:16 Information] IdentityServer4.Endpoints.EndSessionCallbackEndpoint
Successful signout callback.

[23:45:16 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/connect/endsession/callback?endSessionId=CfDJ8Hang32hRfBDkNsasZEG-DE9HjHUnnTrrZohQ9-_ezYH0XBdP6s44jhwkGXUUuqFMAj3sB1L2k9i6BKtb-7lDMcbNmV-Hs-QynawJEZq1MMO9NYKZvVJLK0Ph9MfaHDpf9MU4GCgW-A3seQ4n2QnTg-mTeIGCJlkdv-7ONb4pFOhXs35mbqp91SnwL7CbIsDpM_Pc3vXIasGHvqJZiwsLi5ybO9ugxl0UvafYEgGeVWDvp1QYhonV_LxIaQ7fkozZowlsxkKdeUGZz5WjSon3gf0AKhhZreh-M_Uy2m6Z-ww - - - 200 - text/html;+charset=UTF-8 10.9258ms

[23:45:16 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/css/site.css'. Physical path: '/app/wwwroot/css/site.css'

[23:45:16 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/css/site.css - - - 200 497 text/css 22.9789ms

[23:45:16 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css'. Physical path: '/app/wwwroot/lib/bootstrap/dist/css/bootstrap.min.css'

[23:45:16 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/lib/bootstrap/dist/css/bootstrap.min.css - - - 200 159515 text/css 53.8197ms

[23:45:16 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/lib/bootstrap/dist/css/bootstrap.min.css.map - -

[23:45:16 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request starting HTTP/1.0 GET https://localhost/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - -

[23:45:16 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map'. Physical path: '/app/wwwroot/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map'

[23:45:16 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - - - 200 318045 text/plain 60.7546ms

[23:45:16 Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware
Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css.map'. Physical path: '/app/wwwroot/lib/bootstrap/dist/css/bootstrap.min.css.map'

[23:45:16 Information] Microsoft.AspNetCore.Hosting.Diagnostics
Request finished HTTP/1.0 GET https://localhost/lib/bootstrap/dist/css/bootstrap.min.css.map - - - 200 641867 text/plain 84.8279ms

